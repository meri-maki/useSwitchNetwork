{"version":3,"file":"js/704.44eb3b54.js","mappings":"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","sources":["webpack://tooncoinweb/./src/tools/classNames.js","webpack://tooncoinweb/./src/ui/Button/Button.jsx","webpack://tooncoinweb/./src/ui/Link/Link.module.scss?fe5c","webpack://tooncoinweb/./public/assets/UI/icons/arrow_right.svg","webpack://tooncoinweb/./src/ui/Link/Link.jsx","webpack://tooncoinweb/./src/MintNFT/ConnectModal/ConnectModal.module.scss?faeb","webpack://tooncoinweb/./public/assets/mm.svg","webpack://tooncoinweb/./public/assets/wc.svg","webpack://tooncoinweb/./src/ui/Portal/Portal.jsx","webpack://tooncoinweb/./src/ui/Modal/Modal.jsx","webpack://tooncoinweb/./src/ui/Modal/Modal.module.scss?d9c3","webpack://tooncoinweb/./src/MintNFT/ConnectModal/ConnectModal.jsx","webpack://tooncoinweb/./src/MintNFT/ConnectButton.jsx","webpack://tooncoinweb/./node_modules/@amplitude/analytics-types/lib/esm/logger.js","webpack://tooncoinweb/./public/assets/NFT/CARDS.webp","webpack://tooncoinweb/./public/assets/NFT/diamond-blue-success.webp","webpack://tooncoinweb/./public/assets/NFT/diamond-blue-small.webp","webpack://tooncoinweb/./public/assets/NFT/diamond-purple-success.webp","webpack://tooncoinweb/./public/assets/UI/icons/discord.svg","webpack://tooncoinweb/./public/assets/TOKENOMIC/diamond.webp","webpack://tooncoinweb/./src/MintNFT/MintSuccess/MintSuccess.jsx","webpack://tooncoinweb/./src/MintNFT/MintSuccess/MintSuccess.module.scss?cbe6","webpack://tooncoinweb/./public/assets/VALUES/vote.webp","webpack://tooncoinweb/./public/assets/UI/icons/error.svg","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/node_modules/tslib/tslib.es6.mjs","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/debug.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/node_modules/tslib/tslib.es6.mjs","webpack://tooncoinweb/./node_modules/@amplitude/analytics-types/lib/esm/status.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/return-wrapper.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/messages.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/constants.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/result-builder.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/logger.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/config.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/plugins/destination.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-types/lib/esm/event.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/chunk.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/uuid.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/valid-properties.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/identify.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/revenue.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/timeline.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/event-builder.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/core-client.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-connector/dist/analytics-connector.esm.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/analytics-connector.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/node_modules/tslib/tslib.es6.mjs","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/plugins/identity.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/default-tracking.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/session.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/utils/snippet-helper.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/language.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/plugins/context.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/version.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/storage/memory.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/cookie-name.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/global-scope.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/query-params.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/storage/cookie.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/transports/base.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/transports/fetch.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/storage/browser-storage.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/storage/local-storage.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/storage/session-storage.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/transports/xhr.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/transports/send-beacon.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/cookie-migration/index.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/constants.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/config.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-web-attribution-browser/node_modules/tslib/tslib.es6.mjs","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/attribution/constants.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/attribution/campaign-parser.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-web-attribution-browser/lib/esm/helpers.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-web-attribution-browser/lib/esm/web-attribution.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-page-view-tracking-browser/node_modules/tslib/tslib.es6.mjs","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/browser-client-factory.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/utils.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/page-view-tracking.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/plugins/form-interaction-tracking.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/det-notification.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/browser-client.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/plugins/file-download-tracking.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/index.js","webpack://tooncoinweb/./src/helpers/amplitude.js","webpack://tooncoinweb/./src/MintNFT/UnsupportedBlock.jsx","webpack://tooncoinweb/./src/MintNFT/MintButton.jsx","webpack://tooncoinweb/./src/MintNFT/MintNFT.jsx","webpack://tooncoinweb/./src/helpers/hooks/useToast.jsx","webpack://tooncoinweb/./src/helpers/texts.jsx","webpack://tooncoinweb/./src/MintNFT/MintNFT.module.scss?ed67"],"sourcesContent":["// similar to popular library jedwatson/classnames\n\n// record - special type of typescript where KEY is string and VALUE is string OR Boolean\nexport function classNames(cls, mods, additional) {\n\treturn [\n\t\tcls,\n\t\t...additional.filter(Boolean),\n\t\t...Object.entries(mods)\n\t\t\t.filter(([_, value]) => Boolean(value)) // the first value in each array (represented by the underscore) is ignored and the filter only uses the second value (value).\n\t\t\t.map(([cls]) => cls),\n\t].join(\" \")\n}\n","import { classNames } from \"~/tools/classNames.js\"\nimport React from \"react\"\n\nexport default function Button(props) {\n\tconst { link, href, size, app, headerBtn, primary, className, yellow, icon, blue, pink, connect, children, glass, onClick, mint, discord, modal, type, ...otherProps } = props\n\tconst mods = {\n\t\tapp: app,\n\t\tprimary: primary,\n\t\tglass: glass,\n\t\theaderBtn: headerBtn,\n\t\t[size]: size,\n\t\tblue: blue,\n\t\tpink: pink,\n\t\ticon: icon,\n\t\tconnect: connect,\n\t\tmint: mint,\n\t\tdiscord: discord,\n\t\tmodal: modal,\n\t\tyellow: yellow,\n\t}\n\treturn (\n\t\t<>\n\t\t\t{link ? (\n\t\t\t\t<div className={`flex ${className ? className : \"\"}`}>\n\t\t\t\t\t<a href={href} target=\"_blank\" rel=\"noreferrer\" className={classNames(\"button\", mods, [className])} onClick={onClick} {...otherProps}>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<button className={classNames(\"button\", mods, [className])} onClick={onClick} {...otherProps} type={type ? type : \"button\"}>\n\t\t\t\t\t{children}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"link\":\"link_nbrUS\",\"arrow\":\"arrow_jZQrA\",\"wrapper\":\"wrapper_Wz1jT\"};","export default __webpack_public_path__ + \"09e3a154aa0b7592c6e244ce4197576f.svg\";","import { classNames } from \"~/tools/classNames\"\nimport React from \"react\"\n\nimport cls from \"./Link.module.scss\"\nimport Arrow from \"@/UI/icons/arrow_right.svg\"\n//<div className={`flex ${className} ${cls.wrapper}`}></div>\n\nexport default function Link(props) {\n\tconst { href, className, children, arrow, target, onClick, ...otherProps } = props\n\tconst mods = {\n\t\t[cls.arrow]: arrow,\n\t}\n\treturn (\n\t\t<>\n\t\t\t{href ? (\n\t\t\t\t<a href={href} target={target ? target : \"_blank\"} rel=\"noreferrer\" className={classNames(cls.link, mods, [className])} onClick={onClick} {...otherProps}>\n\t\t\t\t\t{children}\n\t\t\t\t\t{arrow && <img src={Arrow} className={cls.arrow} alt=\"arrow link\" width=\"24\" height=\"24\" />}\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\t<div className={classNames(cls.link, mods, [className])} onClick={onClick} {...otherProps}>\n\t\t\t\t\t{children}\n\t\t\t\t\t{arrow && <img src={Arrow} className={cls.arrow} alt=\"arrow link\" width=\"24\" height=\"24\" />}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"ConnectModal\":\"ConnectModal_QAeia\",\"cardsBlock\":\"cardsBlock_E2mf0\"};","export default __webpack_public_path__ + \"b4e71f6375ce977be59ea6375a1b58a1.svg\";","export default __webpack_public_path__ + \"11807d8a0741d067a70df57ef02c0dd6.svg\";","import { createPortal } from \"react-dom\"\n\nexport const Portal = (props) => {\n\tconst { children, element = document.body } = props\n\treturn createPortal(children, element)\n}\n","import React, { useCallback, useEffect, useRef, useState } from \"react\"\nimport { classNames } from \"~/tools/classNames.js\"\nimport Cross from \"@/UI/icons/cross.svg\"\nimport { Portal } from \"../Portal/Portal\"\nimport cls from \"./Modal.module.scss\"\n\nconst ANIMATION_DELAY = 500\n\nexport const Modal = (props) => {\n\tconst { className, children, isOpen, onClose } = props\n\tconst [isClosing, setIsClosing] = useState(false)\n\tconst timerRef = useRef()\n\tconst closeHandler = useCallback(() => {\n\t\tif (onClose) {\n\t\t\tsetIsClosing(true)\n\t\t\ttimerRef.current = setTimeout(() => {\n\t\t\t\tonClose()\n\t\t\t\tsetIsClosing(false)\n\t\t\t}, ANIMATION_DELAY)\n\t\t}\n\t}, [onClose])\n\tconst onKeyDown = useCallback(\n\t\t(e) => {\n\t\t\tif (e.key === \"Escape\") {\n\t\t\t\tcloseHandler()\n\t\t\t}\n\t\t},\n\t\t[closeHandler]\n\t)\n\n\tuseEffect(() => {\n\t\tif (isOpen) {\n\t\t\twindow.addEventListener(\"keydown\", onKeyDown)\n\t\t}\n\n\t\treturn () => {\n\t\t\tclearTimeout(timerRef.current)\n\t\t\twindow.removeEventListener(\"keydown\", onKeyDown)\n\t\t}\n\t}, [isOpen, onKeyDown])\n\n\tconst onContentClick = (e) => {\n\t\te.stopPropagation()\n\t}\n\n\tconst mods = {\n\t\t[cls.opened]: isOpen,\n\t\t[cls.isClosing]: isClosing,\n\t}\n\n\treturn (\n\t\t<Portal>\n\t\t\t<div className={classNames(cls.Modal, mods, [className])}>\n\t\t\t\t<div className={cls.overlay} onClick={closeHandler}>\n\t\t\t\t\t<div className={cls.wrapper}>\n\t\t\t\t\t\t<img src={Cross} className={cls.cross} onClick={closeHandler} />\n\t\t\t\t\t\t<div className={cls.content} onClick={onContentClick}>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Portal>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Modal\":\"Modal_Vvnoa\",\"overlay\":\"overlay_Nz0fE\",\"wrapper\":\"wrapper_QBL7W\",\"append-animate\":\"append-animate_khZAm\",\"content\":\"content_QghS8\",\"opened\":\"opened_mZ_1y\",\"isClosing\":\"isClosing_cGJ35\",\"cross\":\"cross_X9nFF\"};","/* eslint-disable react/no-unescaped-entities */\nimport React, { useContext } from \"react\"\nimport { useWeb3Modal } from \"@web3modal/wagmi/react\"\nimport Button from \"../../ui/Button/Button\"\nimport Link from \"../../ui/Link/Link\"\n\nimport cls from \"./ConnectModal.module.scss\"\nimport MM from \"@/mm.svg\"\nimport WC from \"@/wc.svg\"\nimport { Modal } from \"../../ui/Modal/Modal\"\n\nfunction WCConnector(props) {\n\tconst { open } = useWeb3Modal()\n\tconst { onClose } = props\n\treturn (\n\t\t<Button\n\t\t\tmodal\n\t\t\tonClick={() => {\n\t\t\t\tonClose()\n\t\t\t\topen()\n\t\t\t}}\n\t\t>\n\t\t\t<img src={WC} width=\"80\" height=\"80\" data-img />\n\t\t\t<h4>WalletConnect</h4>\n\t\t\t<p>Use WalletConnect to connect</p>\n\t\t\t<Link arrow className={cls.link}>\n\t\t\t\tConnect\n\t\t\t</Link>\n\t\t</Button>\n\t)\n}\n\nfunction MMConnector() {\n\treturn (\n\t\t<Button link href={\"\"} modal>\n\t\t\t<img src={MM} width=\"80\" height=\"80\" data-img />\n\t\t\t<h4>MetaMask</h4>\n\t\t\t<p>Connect to your MetaMask Wallet</p>\n\t\t\t<Link arrow>Connect</Link>\n\t\t</Button>\n\t)\n}\n\nconst ConnectModal = (props) => {\n\tconst { isOpen, onClose } = props\n\treturn (\n\t\t<Modal className={cls.ConnectModal} isOpen={isOpen} onClose={onClose}>\n\t\t\t<h3>Choose one</h3>\n\t\t\t<div className={cls.cardsBlock}>\n\t\t\t\t<MMConnector />\n\t\t\t\t<WCConnector onClose={onClose} />\n\t\t\t</div>\n\t\t</Modal>\n\t)\n}\nexport default ConnectModal\n","import { useWeb3Modal } from \"@web3modal/wagmi/react\"\nimport React, { useState, useCallback } from \"react\"\nimport Button from \"../ui/Button/Button\"\n\nimport mainconfig, { supportedChains } from \"../config\"\nimport ConnectModal from \"./ConnectModal/ConnectModal\"\nimport { useAccount } from \"wagmi\"\n\nfunction Account({ header }) {\n\treturn (\n\t\t<div className={header ? \"disabledChild\" : \"\"}>\n\t\t\t<w3m-account-button balance={false} />\n\t\t</div>\n\t)\n}\n\nfunction Chain() {\n\treturn <w3m-network-button />\n}\n\nconst ConnectButton = (props) => {\n\tconst { action, connect, header, chain } = props\n\tconst { open } = useWeb3Modal()\n\tconst { isConnected } = useAccount()\n\n\tconst isMetaMask = mainconfig.isMetaMask\n\tconst isMobile = mainconfig.isMobile\n\n\tconst [connectModal, setConnectModal] = useState(false)\n\tconst onCloseModal = useCallback(() => {\n\t\tsetConnectModal(false)\n\t}, [])\n\treturn (\n\t\t<>\n\t\t\t{isConnected ? (\n\t\t\t\t<>\n\t\t\t\t\t{isMetaMask && header === false && supportedChains.includes(chain.id) && <Chain />}\n\t\t\t\t\t{!isMetaMask && header === false && supportedChains.includes(chain.id) && <Chain />}\n\t\t\t\t\t<Account header={header} />\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<Button\n\t\t\t\t\t\theaderBtn={header}\n\t\t\t\t\t\tpink\n\t\t\t\t\t\tconnect={connect}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (action) {\n\t\t\t\t\t\t\t\taction()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isMobile && !isMetaMask) {\n\t\t\t\t\t\t\t\tsetConnectModal(true)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\topen()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tConnect Wallet\n\t\t\t\t\t\t<div className=\"sh\"></div>\n\t\t\t\t\t</Button>\n\t\t\t\t\t{connectModal && <ConnectModal isOpen={connectModal} onClose={onCloseModal} />}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t)\n}\nexport default React.memo(ConnectButton)\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"None\"] = 0] = \"None\";\n    LogLevel[LogLevel[\"Error\"] = 1] = \"Error\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Verbose\"] = 3] = \"Verbose\";\n    LogLevel[LogLevel[\"Debug\"] = 4] = \"Debug\";\n})(LogLevel || (LogLevel = {}));\n//# sourceMappingURL=logger.js.map","export default __webpack_public_path__ + \"7cc8666e0f5e0b64c953b42c3a1b284d.webp\";","export default __webpack_public_path__ + \"fc1ea6cc1bd27e7e3b1babdd24b66f19.webp\";","export default __webpack_public_path__ + \"a65305de9ebb7e931838c461d30c8572.webp\";","export default __webpack_public_path__ + \"8ff9fa8ace06a3e39f946643dbb00eaa.webp\";","export default __webpack_public_path__ + \"34abbd9fbd602a087cacaf79b317a931.svg\";","export default __webpack_public_path__ + \"5bd2b4ffa02a554acd9e88bf8ed7c4d3.webp\";","/* eslint-disable react/no-unescaped-entities */\nimport React from \"react\"\nimport Button from \"../../ui/Button/Button\"\nimport { Modal } from \"../../ui/Modal/Modal.jsx\"\nimport cls from \"./MintSuccess.module.scss\"\nimport Card from \"@/NFT/CARDS.webp\"\nimport Blue from \"@/NFT/diamond-blue-success.webp\"\nimport Small from \"@/NFT/diamond-blue-small.webp\"\nimport Desk from \"@/NFT/diamond-purple-success.webp\"\nimport DiscordIcon from \"@/UI/icons/discord.svg\"\n\nimport Purple from \"@/TOKENOMIC/diamond.webp\"\n\nconst MintSuccess = (props) => {\n\tconst { isOpen, onClose } = props\n\treturn (\n\t\t<Modal className={cls.MintSuccess} isOpen={isOpen} onClose={onClose}>\n\t\t\t<h3>\n\t\t\t\tCongratulations!\n\t\t\t\t<br /> You're In!\n\t\t\t</h3>\n\t\t\t<div className={cls.imagesBlock}>\n\t\t\t\t<img alt=\"icon\" src={Blue} width=\"35\" height=\"auto\" className={cls.blue} data-absolute />\n\t\t\t\t<img alt=\"icon\" src={Purple} width=\"39\" height=\"auto\" className={cls.purple} data-absolute />\n\t\t\t\t<img alt=\"icon\" src={Desk} width=\"40\" height=\"auto\" className={cls.desk} data-absolute />\n\n\t\t\t\t<img alt=\"icon\" src={Card} className={cls.card} width=\"320\" height=\"auto\" />\n\t\t\t\t<img alt=\"icon\" src={Small} width=\"21\" height=\"auto\" className={cls.small} data-absolute />\n\t\t\t</div>\n\t\t\t<h5>\n\t\t\t\tJoin our <b>exclusive Discord community</b> for early adopters now - click the{\" \"}\n\t\t\t\t<a href={Links.discord} className=\"bold primary-200\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tsecret link\n\t\t\t\t</a>{\" \"}\n\t\t\t\tand <b>grab your perks</b>!\n\t\t\t</h5>\n\t\t\t<Button link discord yellow className={cls.button}>\n\t\t\t\t<img src={DiscordIcon} alt=\"x\" width=\"16\" height=\"16\" />\n\t\t\t\t<span>Join now 🔥</span>\n\t\t\t\t<div className=\"sh\"></div>\n\t\t\t</Button>\n\t\t</Modal>\n\t)\n}\nexport default MintSuccess\n","// extracted by mini-css-extract-plugin\nexport default {\"MintSuccess\":\"MintSuccess_HPEu8\",\"button\":\"button_P5lGr\",\"imagesBlock\":\"imagesBlock_uUCDs\",\"card\":\"card_ep5Mz\",\"desk\":\"desk_XsxNU\",\"purple\":\"purple_KNtLs\",\"blue\":\"blue_u7PhU\",\"small\":\"small_ejBtD\"};","export default __webpack_public_path__ + \"c28fccd806f03a30bf4e27e9caca8e23.webp\";","export default __webpack_public_path__ + \"bc30d57d61d58ad0bba4440c21791ddc.svg\";","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { __assign, __values } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { LogLevel } from '@amplitude/analytics-types';\nexport var getStacktrace = function (ignoreDepth) {\n    if (ignoreDepth === void 0) { ignoreDepth = 0; }\n    var trace = new Error().stack || '';\n    return trace\n        .split('\\n')\n        .slice(2 + ignoreDepth)\n        .map(function (text) { return text.trim(); });\n};\n// This hook makes sure we always get the latest logger and logLevel.\nexport var getClientLogConfig = function (client) { return function () {\n    var _a = __assign({}, client.config), logger = _a.loggerProvider, logLevel = _a.logLevel;\n    return {\n        logger: logger,\n        logLevel: logLevel,\n    };\n}; };\n// This is a convenient function to get the attribute from object with string path, similar to lodash '#get'.\nexport var getValueByStringPath = function (obj, path) {\n    var e_1, _a;\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\n    path = path.replace(/^\\./, ''); // strip a leading dot\n    try {\n        for (var _b = __values(path.split('.')), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var attr = _c.value;\n            if (attr in obj) {\n                obj = obj[attr];\n            }\n            else {\n                return;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return obj;\n};\nexport var getClientStates = function (client, paths) { return function () {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n            var path = paths_1_1.value;\n            res[path] = getValueByStringPath(client, path);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return res;\n}; };\nexport var debugWrapper = function (fn, fnName, getLogConfig, getStates, fnContext) {\n    if (fnContext === void 0) { fnContext = null; }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _a = getLogConfig(), logger = _a.logger, logLevel = _a.logLevel;\n        // return early if possible to reduce overhead\n        if ((logLevel && logLevel < LogLevel.Debug) || !logLevel || !logger) {\n            return fn.apply(fnContext, args);\n        }\n        var debugContext = {\n            type: 'invoke public method',\n            name: fnName,\n            args: args,\n            stacktrace: getStacktrace(1),\n            time: {\n                start: new Date().toISOString(),\n            },\n            states: {},\n        };\n        if (getStates && debugContext.states) {\n            debugContext.states.before = getStates();\n        }\n        var result = fn.apply(fnContext, args);\n        if (result && result.promise) {\n            // if result is a promise, add the callback\n            result.promise.then(function () {\n                if (getStates && debugContext.states) {\n                    debugContext.states.after = getStates();\n                }\n                if (debugContext.time) {\n                    debugContext.time.end = new Date().toISOString();\n                }\n                logger.debug(JSON.stringify(debugContext, null, 2));\n            });\n        }\n        else {\n            if (getStates && debugContext.states) {\n                debugContext.states.after = getStates();\n            }\n            if (debugContext.time) {\n                debugContext.time.end = new Date().toISOString();\n            }\n            logger.debug(JSON.stringify(debugContext, null, 2));\n        }\n        return result;\n    };\n};\n//# sourceMappingURL=debug.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","/** The status of an event. */\nexport var Status;\n(function (Status) {\n    /** The status could not be determined. */\n    Status[\"Unknown\"] = \"unknown\";\n    /** The event was skipped due to configuration or callbacks. */\n    Status[\"Skipped\"] = \"skipped\";\n    /** The event was sent successfully. */\n    Status[\"Success\"] = \"success\";\n    /** A user or device in the payload is currently rate limited and should try again later. */\n    Status[\"RateLimit\"] = \"rate_limit\";\n    /** The sent payload was too large to be processed. */\n    Status[\"PayloadTooLarge\"] = \"payload_too_large\";\n    /** The event could not be processed. */\n    Status[\"Invalid\"] = \"invalid\";\n    /** A server-side error ocurred during submission. */\n    Status[\"Failed\"] = \"failed\";\n    /** a server or client side error occuring when a request takes too long and is cancelled */\n    Status[\"Timeout\"] = \"Timeout\";\n    /** NodeJS runtime environment error.. E.g. disconnected from network */\n    Status[\"SystemError\"] = \"SystemError\";\n})(Status || (Status = {}));\n//# sourceMappingURL=status.js.map","export var returnWrapper = function (awaitable) { return ({\n    promise: awaitable || Promise.resolve(),\n}); };\n//# sourceMappingURL=return-wrapper.js.map","export var SUCCESS_MESSAGE = 'Event tracked successfully';\nexport var UNEXPECTED_ERROR_MESSAGE = 'Unexpected error occurred';\nexport var MAX_RETRIES_EXCEEDED_MESSAGE = 'Event rejected due to exceeded retry count';\nexport var OPT_OUT_MESSAGE = 'Event skipped due to optOut config';\nexport var MISSING_API_KEY_MESSAGE = 'Event rejected due to missing API key';\nexport var INVALID_API_KEY = 'Invalid API key';\nexport var CLIENT_NOT_INITIALIZED = 'Client not initialized';\n//# sourceMappingURL=messages.js.map","export var UNSET_VALUE = '-';\nexport var AMPLITUDE_PREFIX = 'AMP';\nexport var STORAGE_PREFIX = \"\".concat(AMPLITUDE_PREFIX, \"_unsent\");\nexport var AMPLITUDE_SERVER_URL = 'https://api2.amplitude.com/2/httpapi';\nexport var EU_AMPLITUDE_SERVER_URL = 'https://api.eu.amplitude.com/2/httpapi';\nexport var AMPLITUDE_BATCH_SERVER_URL = 'https://api2.amplitude.com/batch';\nexport var EU_AMPLITUDE_BATCH_SERVER_URL = 'https://api.eu.amplitude.com/batch';\n//# sourceMappingURL=constants.js.map","import { Status } from '@amplitude/analytics-types';\nexport var buildResult = function (event, code, message) {\n    if (code === void 0) { code = 0; }\n    if (message === void 0) { message = Status.Unknown; }\n    return { event: event, code: code, message: message };\n};\n//# sourceMappingURL=result-builder.js.map","import { LogLevel } from '@amplitude/analytics-types';\nvar PREFIX = 'Amplitude Logger ';\nvar Logger = /** @class */ (function () {\n    function Logger() {\n        this.logLevel = LogLevel.None;\n    }\n    Logger.prototype.disable = function () {\n        this.logLevel = LogLevel.None;\n    };\n    Logger.prototype.enable = function (logLevel) {\n        if (logLevel === void 0) { logLevel = LogLevel.Warn; }\n        this.logLevel = logLevel;\n    };\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Verbose) {\n            return;\n        }\n        console.log(\"\".concat(PREFIX, \"[Log]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Warn) {\n            return;\n        }\n        console.warn(\"\".concat(PREFIX, \"[Warn]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Error) {\n            return;\n        }\n        console.error(\"\".concat(PREFIX, \"[Error]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Debug) {\n            return;\n        }\n        // console.debug output is hidden by default in chrome\n        console.log(\"\".concat(PREFIX, \"[Debug]: \").concat(args.join(' ')));\n    };\n    return Logger;\n}());\nexport { Logger };\n//# sourceMappingURL=logger.js.map","import { LogLevel, } from '@amplitude/analytics-types';\nimport { AMPLITUDE_SERVER_URL, AMPLITUDE_BATCH_SERVER_URL, EU_AMPLITUDE_SERVER_URL, EU_AMPLITUDE_BATCH_SERVER_URL, } from './constants';\nimport { Logger } from './logger';\nexport var getDefaultConfig = function () { return ({\n    flushMaxRetries: 12,\n    flushQueueSize: 200,\n    flushIntervalMillis: 10000,\n    instanceName: '$default_instance',\n    logLevel: LogLevel.Warn,\n    loggerProvider: new Logger(),\n    optOut: false,\n    serverUrl: AMPLITUDE_SERVER_URL,\n    serverZone: 'US',\n    useBatch: false,\n}); };\nvar Config = /** @class */ (function () {\n    function Config(options) {\n        var _a, _b, _c, _d;\n        this._optOut = false;\n        var defaultConfig = getDefaultConfig();\n        this.apiKey = options.apiKey;\n        this.flushIntervalMillis = (_a = options.flushIntervalMillis) !== null && _a !== void 0 ? _a : defaultConfig.flushIntervalMillis;\n        this.flushMaxRetries = options.flushMaxRetries || defaultConfig.flushMaxRetries;\n        this.flushQueueSize = options.flushQueueSize || defaultConfig.flushQueueSize;\n        this.instanceName = options.instanceName || defaultConfig.instanceName;\n        this.loggerProvider = options.loggerProvider || defaultConfig.loggerProvider;\n        this.logLevel = (_b = options.logLevel) !== null && _b !== void 0 ? _b : defaultConfig.logLevel;\n        this.minIdLength = options.minIdLength;\n        this.plan = options.plan;\n        this.ingestionMetadata = options.ingestionMetadata;\n        this.optOut = (_c = options.optOut) !== null && _c !== void 0 ? _c : defaultConfig.optOut;\n        this.serverUrl = options.serverUrl;\n        this.serverZone = options.serverZone || defaultConfig.serverZone;\n        this.storageProvider = options.storageProvider;\n        this.transportProvider = options.transportProvider;\n        this.useBatch = (_d = options.useBatch) !== null && _d !== void 0 ? _d : defaultConfig.useBatch;\n        this.loggerProvider.enable(this.logLevel);\n        var serverConfig = createServerConfig(options.serverUrl, options.serverZone, options.useBatch);\n        this.serverZone = serverConfig.serverZone;\n        this.serverUrl = serverConfig.serverUrl;\n    }\n    Object.defineProperty(Config.prototype, \"optOut\", {\n        get: function () {\n            return this._optOut;\n        },\n        set: function (optOut) {\n            this._optOut = optOut;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Config;\n}());\nexport { Config };\nexport var getServerUrl = function (serverZone, useBatch) {\n    if (serverZone === 'EU') {\n        return useBatch ? EU_AMPLITUDE_BATCH_SERVER_URL : EU_AMPLITUDE_SERVER_URL;\n    }\n    return useBatch ? AMPLITUDE_BATCH_SERVER_URL : AMPLITUDE_SERVER_URL;\n};\nexport var createServerConfig = function (serverUrl, serverZone, useBatch) {\n    if (serverUrl === void 0) { serverUrl = ''; }\n    if (serverZone === void 0) { serverZone = getDefaultConfig().serverZone; }\n    if (useBatch === void 0) { useBatch = getDefaultConfig().useBatch; }\n    if (serverUrl) {\n        return { serverUrl: serverUrl, serverZone: undefined };\n    }\n    var _serverZone = ['US', 'EU'].includes(serverZone) ? serverZone : getDefaultConfig().serverZone;\n    return {\n        serverZone: _serverZone,\n        serverUrl: getServerUrl(_serverZone, useBatch),\n    };\n};\n//# sourceMappingURL=config.js.map","import { __awaiter, __generator, __read, __rest, __spreadArray } from \"tslib\";\nimport { Status, } from '@amplitude/analytics-types';\nimport { INVALID_API_KEY, MAX_RETRIES_EXCEEDED_MESSAGE, MISSING_API_KEY_MESSAGE, SUCCESS_MESSAGE, UNEXPECTED_ERROR_MESSAGE, } from '../messages';\nimport { STORAGE_PREFIX } from '../constants';\nimport { chunk } from '../utils/chunk';\nimport { buildResult } from '../utils/result-builder';\nimport { createServerConfig } from '../config';\nfunction getErrorMessage(error) {\n    if (error instanceof Error)\n        return error.message;\n    return String(error);\n}\nexport function getResponseBodyString(res) {\n    var responseBodyString = '';\n    try {\n        if ('body' in res) {\n            responseBodyString = JSON.stringify(res.body, null, 2);\n        }\n    }\n    catch (_a) {\n        // to avoid crash, but don't care about the error, add comment to avoid empty block lint error\n    }\n    return responseBodyString;\n}\nvar Destination = /** @class */ (function () {\n    function Destination() {\n        this.name = 'amplitude';\n        this.type = 'destination';\n        this.retryTimeout = 1000;\n        this.throttleTimeout = 30000;\n        this.storageKey = '';\n        this.scheduled = null;\n        this.queue = [];\n    }\n    Destination.prototype.setup = function (config) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var unsent;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.config = config;\n                        this.storageKey = \"\".concat(STORAGE_PREFIX, \"_\").concat(this.config.apiKey.substring(0, 10));\n                        return [4 /*yield*/, ((_a = this.config.storageProvider) === null || _a === void 0 ? void 0 : _a.get(this.storageKey))];\n                    case 1:\n                        unsent = _b.sent();\n                        this.saveEvents(); // sets storage to '[]'\n                        if (unsent && unsent.length > 0) {\n                            void Promise.all(unsent.map(function (event) { return _this.execute(event); })).catch();\n                        }\n                        return [2 /*return*/, Promise.resolve(undefined)];\n                }\n            });\n        });\n    };\n    Destination.prototype.execute = function (event) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var context = {\n                event: event,\n                attempts: 0,\n                callback: function (result) { return resolve(result); },\n                timeout: 0,\n            };\n            void _this.addToQueue(context);\n        });\n    };\n    Destination.prototype.addToQueue = function () {\n        var _this = this;\n        var list = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            list[_i] = arguments[_i];\n        }\n        var tryable = list.filter(function (context) {\n            if (context.attempts < _this.config.flushMaxRetries) {\n                context.attempts += 1;\n                return true;\n            }\n            void _this.fulfillRequest([context], 500, MAX_RETRIES_EXCEEDED_MESSAGE);\n            return false;\n        });\n        tryable.forEach(function (context) {\n            _this.queue = _this.queue.concat(context);\n            if (context.timeout === 0) {\n                _this.schedule(_this.config.flushIntervalMillis);\n                return;\n            }\n            setTimeout(function () {\n                context.timeout = 0;\n                _this.schedule(0);\n            }, context.timeout);\n        });\n        this.saveEvents();\n    };\n    Destination.prototype.schedule = function (timeout) {\n        var _this = this;\n        if (this.scheduled)\n            return;\n        this.scheduled = setTimeout(function () {\n            void _this.flush(true).then(function () {\n                if (_this.queue.length > 0) {\n                    _this.schedule(timeout);\n                }\n            });\n        }, timeout);\n    };\n    Destination.prototype.flush = function (useRetry) {\n        if (useRetry === void 0) { useRetry = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var list, later, batches;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        list = [];\n                        later = [];\n                        this.queue.forEach(function (context) { return (context.timeout === 0 ? list.push(context) : later.push(context)); });\n                        this.queue = later;\n                        if (this.scheduled) {\n                            clearTimeout(this.scheduled);\n                            this.scheduled = null;\n                        }\n                        batches = chunk(list, this.config.flushQueueSize);\n                        return [4 /*yield*/, Promise.all(batches.map(function (batch) { return _this.send(batch, useRetry); }))];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Destination.prototype.send = function (list, useRetry) {\n        if (useRetry === void 0) { useRetry = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var payload, serverUrl, res, e_1, errorMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.config.apiKey) {\n                            return [2 /*return*/, this.fulfillRequest(list, 400, MISSING_API_KEY_MESSAGE)];\n                        }\n                        payload = {\n                            api_key: this.config.apiKey,\n                            events: list.map(function (context) {\n                                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                                var _a = context.event, extra = _a.extra, eventWithoutExtra = __rest(_a, [\"extra\"]);\n                                return eventWithoutExtra;\n                            }),\n                            options: {\n                                min_id_length: this.config.minIdLength,\n                            },\n                            client_upload_time: new Date().toISOString(),\n                        };\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        serverUrl = createServerConfig(this.config.serverUrl, this.config.serverZone, this.config.useBatch).serverUrl;\n                        return [4 /*yield*/, this.config.transportProvider.send(serverUrl, payload)];\n                    case 2:\n                        res = _a.sent();\n                        if (res === null) {\n                            this.fulfillRequest(list, 0, UNEXPECTED_ERROR_MESSAGE);\n                            return [2 /*return*/];\n                        }\n                        if (!useRetry) {\n                            if ('body' in res) {\n                                this.fulfillRequest(list, res.statusCode, \"\".concat(res.status, \": \").concat(getResponseBodyString(res)));\n                            }\n                            else {\n                                this.fulfillRequest(list, res.statusCode, res.status);\n                            }\n                            return [2 /*return*/];\n                        }\n                        this.handleResponse(res, list);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        errorMessage = getErrorMessage(e_1);\n                        this.config.loggerProvider.error(errorMessage);\n                        this.fulfillRequest(list, 0, errorMessage);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Destination.prototype.handleResponse = function (res, list) {\n        var status = res.status;\n        switch (status) {\n            case Status.Success: {\n                this.handleSuccessResponse(res, list);\n                break;\n            }\n            case Status.Invalid: {\n                this.handleInvalidResponse(res, list);\n                break;\n            }\n            case Status.PayloadTooLarge: {\n                this.handlePayloadTooLargeResponse(res, list);\n                break;\n            }\n            case Status.RateLimit: {\n                this.handleRateLimitResponse(res, list);\n                break;\n            }\n            default: {\n                // log intermediate event status before retry\n                this.config.loggerProvider.warn(\"{code: 0, error: \\\"Status '\".concat(status, \"' provided for \").concat(list.length, \" events\\\"}\"));\n                this.handleOtherResponse(list);\n                break;\n            }\n        }\n    };\n    Destination.prototype.handleSuccessResponse = function (res, list) {\n        this.fulfillRequest(list, res.statusCode, SUCCESS_MESSAGE);\n    };\n    Destination.prototype.handleInvalidResponse = function (res, list) {\n        var _this = this;\n        if (res.body.missingField || res.body.error.startsWith(INVALID_API_KEY)) {\n            this.fulfillRequest(list, res.statusCode, res.body.error);\n            return;\n        }\n        var dropIndex = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(Object.values(res.body.eventsWithInvalidFields)), false), __read(Object.values(res.body.eventsWithMissingFields)), false), __read(Object.values(res.body.eventsWithInvalidIdLengths)), false), __read(res.body.silencedEvents), false).flat();\n        var dropIndexSet = new Set(dropIndex);\n        var retry = list.filter(function (context, index) {\n            if (dropIndexSet.has(index)) {\n                _this.fulfillRequest([context], res.statusCode, res.body.error);\n                return;\n            }\n            return true;\n        });\n        if (retry.length > 0) {\n            // log intermediate event status before retry\n            this.config.loggerProvider.warn(getResponseBodyString(res));\n        }\n        this.addToQueue.apply(this, __spreadArray([], __read(retry), false));\n    };\n    Destination.prototype.handlePayloadTooLargeResponse = function (res, list) {\n        if (list.length === 1) {\n            this.fulfillRequest(list, res.statusCode, res.body.error);\n            return;\n        }\n        // log intermediate event status before retry\n        this.config.loggerProvider.warn(getResponseBodyString(res));\n        this.config.flushQueueSize /= 2;\n        this.addToQueue.apply(this, __spreadArray([], __read(list), false));\n    };\n    Destination.prototype.handleRateLimitResponse = function (res, list) {\n        var _this = this;\n        var dropUserIds = Object.keys(res.body.exceededDailyQuotaUsers);\n        var dropDeviceIds = Object.keys(res.body.exceededDailyQuotaDevices);\n        var throttledIndex = res.body.throttledEvents;\n        var dropUserIdsSet = new Set(dropUserIds);\n        var dropDeviceIdsSet = new Set(dropDeviceIds);\n        var throttledIndexSet = new Set(throttledIndex);\n        var retry = list.filter(function (context, index) {\n            if ((context.event.user_id && dropUserIdsSet.has(context.event.user_id)) ||\n                (context.event.device_id && dropDeviceIdsSet.has(context.event.device_id))) {\n                _this.fulfillRequest([context], res.statusCode, res.body.error);\n                return;\n            }\n            if (throttledIndexSet.has(index)) {\n                context.timeout = _this.throttleTimeout;\n            }\n            return true;\n        });\n        if (retry.length > 0) {\n            // log intermediate event status before retry\n            this.config.loggerProvider.warn(getResponseBodyString(res));\n        }\n        this.addToQueue.apply(this, __spreadArray([], __read(retry), false));\n    };\n    Destination.prototype.handleOtherResponse = function (list) {\n        var _this = this;\n        this.addToQueue.apply(this, __spreadArray([], __read(list.map(function (context) {\n            context.timeout = context.attempts * _this.retryTimeout;\n            return context;\n        })), false));\n    };\n    Destination.prototype.fulfillRequest = function (list, code, message) {\n        this.saveEvents();\n        list.forEach(function (context) { return context.callback(buildResult(context.event, code, message)); });\n    };\n    /**\n     * Saves events to storage\n     * This is called on\n     * 1) new events are added to queue; or\n     * 2) response comes back for a request\n     */\n    Destination.prototype.saveEvents = function () {\n        if (!this.config.storageProvider) {\n            return;\n        }\n        var events = Array.from(this.queue.map(function (context) { return context.event; }));\n        void this.config.storageProvider.set(this.storageKey, events);\n    };\n    return Destination;\n}());\nexport { Destination };\n//# sourceMappingURL=destination.js.map","export var IdentifyOperation;\n(function (IdentifyOperation) {\n    // Base Operations to set values\n    IdentifyOperation[\"SET\"] = \"$set\";\n    IdentifyOperation[\"SET_ONCE\"] = \"$setOnce\";\n    // Operations around modifying existing values\n    IdentifyOperation[\"ADD\"] = \"$add\";\n    IdentifyOperation[\"APPEND\"] = \"$append\";\n    IdentifyOperation[\"PREPEND\"] = \"$prepend\";\n    IdentifyOperation[\"REMOVE\"] = \"$remove\";\n    // Operations around appending values *if* they aren't present\n    IdentifyOperation[\"PREINSERT\"] = \"$preInsert\";\n    IdentifyOperation[\"POSTINSERT\"] = \"$postInsert\";\n    // Operations around removing properties/values\n    IdentifyOperation[\"UNSET\"] = \"$unset\";\n    IdentifyOperation[\"CLEAR_ALL\"] = \"$clearAll\";\n})(IdentifyOperation || (IdentifyOperation = {}));\nexport var RevenueProperty;\n(function (RevenueProperty) {\n    RevenueProperty[\"REVENUE_PRODUCT_ID\"] = \"$productId\";\n    RevenueProperty[\"REVENUE_QUANTITY\"] = \"$quantity\";\n    RevenueProperty[\"REVENUE_PRICE\"] = \"$price\";\n    RevenueProperty[\"REVENUE_TYPE\"] = \"$revenueType\";\n    RevenueProperty[\"REVENUE\"] = \"$revenue\";\n})(RevenueProperty || (RevenueProperty = {}));\n/**\n * Strings that have special meaning when used as an event's type\n * and have different specifications.\n */\nexport var SpecialEventType;\n(function (SpecialEventType) {\n    SpecialEventType[\"IDENTIFY\"] = \"$identify\";\n    SpecialEventType[\"GROUP_IDENTIFY\"] = \"$groupidentify\";\n    SpecialEventType[\"REVENUE\"] = \"revenue_amount\";\n})(SpecialEventType || (SpecialEventType = {}));\n//# sourceMappingURL=event.js.map","// Creates an array of elements split into groups the length of size.\n// If array can't be split evenly, the final chunk will be the remaining elements.\n// Works similary as https://lodash.com/docs/4.17.15#chunk\nexport var chunk = function (arr, size) {\n    var chunkSize = Math.max(size, 1);\n    return arr.reduce(function (chunks, element, index) {\n        var chunkIndex = Math.floor(index / chunkSize);\n        if (!chunks[chunkIndex]) {\n            chunks[chunkIndex] = [];\n        }\n        chunks[chunkIndex].push(element);\n        return chunks;\n    }, []);\n};\n//# sourceMappingURL=chunk.js.map","/**\n * Source: [jed's gist]{@link https://gist.github.com/982883}.\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f, and\n * y is replaced with a random hexadecimal digit from 8 to b.\n * Used to generate UUIDs for deviceIds.\n * @private\n */\nexport var UUID = function (a) {\n    return a // if the placeholder was passed, return\n        ? // a random number from 0 to 15\n            (a ^ // unless b is 8,\n                ((Math.random() * // in which case\n                    16) >> // a random number from\n                    (a / 4))) // 8 to 11\n                .toString(16) // in hexadecimal\n        : // or otherwise a concatenated string:\n            (String(1e7) + // 10000000 +\n                String(-1e3) + // -1000 +\n                String(-4e3) + // -4000 +\n                String(-8e3) + // -80000000 +\n                String(-1e11)) // -100000000000,\n                .replace(\n            // replacing\n            /[018]/g, // zeroes, ones, and eights with\n            UUID);\n};\n//# sourceMappingURL=uuid.js.map","import { __values } from \"tslib\";\nvar MAX_PROPERTY_KEYS = 1000;\nexport var isValidObject = function (properties) {\n    if (Object.keys(properties).length > MAX_PROPERTY_KEYS) {\n        return false;\n    }\n    for (var key in properties) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        var value = properties[key];\n        if (!isValidProperties(key, value))\n            return false;\n    }\n    return true;\n};\nexport var isValidProperties = function (property, value) {\n    var e_1, _a;\n    if (typeof property !== 'string')\n        return false;\n    if (Array.isArray(value)) {\n        var isValid = true;\n        try {\n            for (var value_1 = __values(value), value_1_1 = value_1.next(); !value_1_1.done; value_1_1 = value_1.next()) {\n                var valueElement = value_1_1.value;\n                if (Array.isArray(valueElement)) {\n                    return false;\n                }\n                else if (typeof valueElement === 'object') {\n                    isValid = isValid && isValidObject(valueElement);\n                }\n                else if (!['number', 'string'].includes(typeof valueElement)) {\n                    return false;\n                }\n                if (!isValid) {\n                    return false;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (value_1_1 && !value_1_1.done && (_a = value_1.return)) _a.call(value_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    else if (value === null || value === undefined) {\n        return false;\n    }\n    else if (typeof value === 'object') {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        return isValidObject(value);\n    }\n    else if (!['number', 'string', 'boolean'].includes(typeof value)) {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=valid-properties.js.map","import { __assign } from \"tslib\";\nimport { IdentifyOperation, } from '@amplitude/analytics-types';\nimport { UNSET_VALUE } from './constants';\nimport { isValidProperties } from './utils/valid-properties';\nvar Identify = /** @class */ (function () {\n    function Identify() {\n        this._propertySet = new Set();\n        this._properties = {};\n    }\n    Identify.prototype.getUserProperties = function () {\n        return __assign({}, this._properties);\n    };\n    Identify.prototype.set = function (property, value) {\n        this._safeSet(IdentifyOperation.SET, property, value);\n        return this;\n    };\n    Identify.prototype.setOnce = function (property, value) {\n        this._safeSet(IdentifyOperation.SET_ONCE, property, value);\n        return this;\n    };\n    Identify.prototype.append = function (property, value) {\n        this._safeSet(IdentifyOperation.APPEND, property, value);\n        return this;\n    };\n    Identify.prototype.prepend = function (property, value) {\n        this._safeSet(IdentifyOperation.PREPEND, property, value);\n        return this;\n    };\n    Identify.prototype.postInsert = function (property, value) {\n        this._safeSet(IdentifyOperation.POSTINSERT, property, value);\n        return this;\n    };\n    Identify.prototype.preInsert = function (property, value) {\n        this._safeSet(IdentifyOperation.PREINSERT, property, value);\n        return this;\n    };\n    Identify.prototype.remove = function (property, value) {\n        this._safeSet(IdentifyOperation.REMOVE, property, value);\n        return this;\n    };\n    Identify.prototype.add = function (property, value) {\n        this._safeSet(IdentifyOperation.ADD, property, value);\n        return this;\n    };\n    Identify.prototype.unset = function (property) {\n        this._safeSet(IdentifyOperation.UNSET, property, UNSET_VALUE);\n        return this;\n    };\n    Identify.prototype.clearAll = function () {\n        // When clear all happens, all properties are unset. Reset the entire object.\n        this._properties = {};\n        this._properties[IdentifyOperation.CLEAR_ALL] = UNSET_VALUE;\n        return this;\n    };\n    // Returns whether or not this set actually worked.\n    Identify.prototype._safeSet = function (operation, property, value) {\n        if (this._validate(operation, property, value)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            var userPropertyMap = this._properties[operation];\n            if (userPropertyMap === undefined) {\n                userPropertyMap = {};\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                this._properties[operation] = userPropertyMap;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            userPropertyMap[property] = value;\n            this._propertySet.add(property);\n            return true;\n        }\n        return false;\n    };\n    Identify.prototype._validate = function (operation, property, value) {\n        if (this._properties[IdentifyOperation.CLEAR_ALL] !== undefined) {\n            // clear all already set. Skipping operation;\n            return false;\n        }\n        if (this._propertySet.has(property)) {\n            // Property already used. Skipping operation\n            return false;\n        }\n        if (operation === IdentifyOperation.ADD) {\n            return typeof value === 'number';\n        }\n        if (operation !== IdentifyOperation.UNSET && operation !== IdentifyOperation.REMOVE) {\n            return isValidProperties(property, value);\n        }\n        return true;\n    };\n    return Identify;\n}());\nexport { Identify };\n//# sourceMappingURL=identify.js.map","import { __assign } from \"tslib\";\nimport { RevenueProperty, } from '@amplitude/analytics-types';\nimport { isValidObject } from './utils/valid-properties';\nvar Revenue = /** @class */ (function () {\n    function Revenue() {\n        this.productId = '';\n        this.quantity = 1;\n        this.price = 0.0;\n    }\n    Revenue.prototype.setProductId = function (productId) {\n        this.productId = productId;\n        return this;\n    };\n    Revenue.prototype.setQuantity = function (quantity) {\n        if (quantity > 0) {\n            this.quantity = quantity;\n        }\n        return this;\n    };\n    Revenue.prototype.setPrice = function (price) {\n        this.price = price;\n        return this;\n    };\n    Revenue.prototype.setRevenueType = function (revenueType) {\n        this.revenueType = revenueType;\n        return this;\n    };\n    Revenue.prototype.setRevenue = function (revenue) {\n        this.revenue = revenue;\n        return this;\n    };\n    Revenue.prototype.setEventProperties = function (properties) {\n        if (isValidObject(properties)) {\n            this.properties = properties;\n        }\n        return this;\n    };\n    Revenue.prototype.getEventProperties = function () {\n        var eventProperties = this.properties ? __assign({}, this.properties) : {};\n        eventProperties[RevenueProperty.REVENUE_PRODUCT_ID] = this.productId;\n        eventProperties[RevenueProperty.REVENUE_QUANTITY] = this.quantity;\n        eventProperties[RevenueProperty.REVENUE_PRICE] = this.price;\n        eventProperties[RevenueProperty.REVENUE_TYPE] = this.revenueType;\n        eventProperties[RevenueProperty.REVENUE] = this.revenue;\n        return eventProperties;\n    };\n    return Revenue;\n}());\nexport { Revenue };\n//# sourceMappingURL=revenue.js.map","import { __assign, __awaiter, __generator, __read, __values } from \"tslib\";\nimport { buildResult } from './utils/result-builder';\nimport { UUID } from './utils/uuid';\nvar Timeline = /** @class */ (function () {\n    function Timeline(client) {\n        this.client = client;\n        this.queue = [];\n        // Flag to guarantee one schedule apply is running\n        this.applying = false;\n        // Flag indicates whether timeline is ready to process event\n        // Events collected before timeline is ready will stay in the queue to be processed later\n        this.plugins = [];\n    }\n    Timeline.prototype.register = function (plugin, config) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        plugin.name = (_a = plugin.name) !== null && _a !== void 0 ? _a : UUID();\n                        plugin.type = (_b = plugin.type) !== null && _b !== void 0 ? _b : 'enrichment';\n                        return [4 /*yield*/, ((_c = plugin.setup) === null || _c === void 0 ? void 0 : _c.call(plugin, config, this.client))];\n                    case 1:\n                        _d.sent();\n                        this.plugins.push(plugin);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.deregister = function (pluginName) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var index, plugin;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        index = this.plugins.findIndex(function (plugin) { return plugin.name === pluginName; });\n                        plugin = this.plugins[index];\n                        this.plugins.splice(index, 1);\n                        return [4 /*yield*/, ((_a = plugin.teardown) === null || _a === void 0 ? void 0 : _a.call(plugin))];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.reset = function (client) {\n        this.applying = false;\n        var plugins = this.plugins;\n        plugins.map(function (plugin) { var _a; return (_a = plugin.teardown) === null || _a === void 0 ? void 0 : _a.call(plugin); });\n        this.plugins = [];\n        this.client = client;\n    };\n    Timeline.prototype.push = function (event) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            _this.queue.push([event, resolve]);\n            _this.scheduleApply(0);\n        });\n    };\n    Timeline.prototype.scheduleApply = function (timeout) {\n        var _this = this;\n        if (this.applying)\n            return;\n        this.applying = true;\n        setTimeout(function () {\n            void _this.apply(_this.queue.shift()).then(function () {\n                _this.applying = false;\n                if (_this.queue.length > 0) {\n                    _this.scheduleApply(0);\n                }\n            });\n        }, timeout);\n    };\n    Timeline.prototype.apply = function (item) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, event, _b, resolve, before, before_1, before_1_1, plugin, e, e_1_1, enrichment, enrichment_1, enrichment_1_1, plugin, e, e_2_1, destination, executeDestinations;\n            var e_1, _c, e_2, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!item) {\n                            return [2 /*return*/];\n                        }\n                        _a = __read(item, 1), event = _a[0];\n                        _b = __read(item, 2), resolve = _b[1];\n                        before = this.plugins.filter(function (plugin) { return plugin.type === 'before'; });\n                        _e.label = 1;\n                    case 1:\n                        _e.trys.push([1, 6, 7, 8]);\n                        before_1 = __values(before), before_1_1 = before_1.next();\n                        _e.label = 2;\n                    case 2:\n                        if (!!before_1_1.done) return [3 /*break*/, 5];\n                        plugin = before_1_1.value;\n                        /* istanbul ignore if */\n                        if (!plugin.execute) {\n                            // do nothing\n                            return [3 /*break*/, 4];\n                        }\n                        return [4 /*yield*/, plugin.execute(__assign({}, event))];\n                    case 3:\n                        e = _e.sent();\n                        if (e === null) {\n                            resolve({ event: event, code: 0, message: '' });\n                            return [2 /*return*/];\n                        }\n                        else {\n                            event = e;\n                        }\n                        _e.label = 4;\n                    case 4:\n                        before_1_1 = before_1.next();\n                        return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        e_1_1 = _e.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 8];\n                    case 7:\n                        try {\n                            if (before_1_1 && !before_1_1.done && (_c = before_1.return)) _c.call(before_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                        return [7 /*endfinally*/];\n                    case 8:\n                        enrichment = this.plugins.filter(function (plugin) { return plugin.type === 'enrichment' || plugin.type === undefined; });\n                        _e.label = 9;\n                    case 9:\n                        _e.trys.push([9, 14, 15, 16]);\n                        enrichment_1 = __values(enrichment), enrichment_1_1 = enrichment_1.next();\n                        _e.label = 10;\n                    case 10:\n                        if (!!enrichment_1_1.done) return [3 /*break*/, 13];\n                        plugin = enrichment_1_1.value;\n                        /* istanbul ignore if */\n                        if (!plugin.execute) {\n                            // do nothing\n                            return [3 /*break*/, 12];\n                        }\n                        return [4 /*yield*/, plugin.execute(__assign({}, event))];\n                    case 11:\n                        e = _e.sent();\n                        if (e === null) {\n                            resolve({ event: event, code: 0, message: '' });\n                            return [2 /*return*/];\n                        }\n                        else {\n                            event = e;\n                        }\n                        _e.label = 12;\n                    case 12:\n                        enrichment_1_1 = enrichment_1.next();\n                        return [3 /*break*/, 10];\n                    case 13: return [3 /*break*/, 16];\n                    case 14:\n                        e_2_1 = _e.sent();\n                        e_2 = { error: e_2_1 };\n                        return [3 /*break*/, 16];\n                    case 15:\n                        try {\n                            if (enrichment_1_1 && !enrichment_1_1.done && (_d = enrichment_1.return)) _d.call(enrichment_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                        return [7 /*endfinally*/];\n                    case 16:\n                        destination = this.plugins.filter(function (plugin) { return plugin.type === 'destination'; });\n                        executeDestinations = destination.map(function (plugin) {\n                            var eventClone = __assign({}, event);\n                            return plugin.execute(eventClone).catch(function (e) { return buildResult(eventClone, 0, String(e)); });\n                        });\n                        void Promise.all(executeDestinations).then(function (_a) {\n                            var _b = __read(_a, 1), result = _b[0];\n                            var resolveResult = result || buildResult(event, 100, 'Event not tracked, no destination plugins on the instance');\n                            resolve(resolveResult);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.flush = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var queue, destination, executeDestinations;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        queue = this.queue;\n                        this.queue = [];\n                        return [4 /*yield*/, Promise.all(queue.map(function (item) { return _this.apply(item); }))];\n                    case 1:\n                        _a.sent();\n                        destination = this.plugins.filter(function (plugin) { return plugin.type === 'destination'; });\n                        executeDestinations = destination.map(function (plugin) {\n                            return plugin.flush && plugin.flush();\n                        });\n                        return [4 /*yield*/, Promise.all(executeDestinations)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Timeline;\n}());\nexport { Timeline };\n//# sourceMappingURL=timeline.js.map","import { __assign } from \"tslib\";\nimport { SpecialEventType, } from '@amplitude/analytics-types';\nimport { Identify } from '../identify';\nexport var createTrackEvent = function (eventInput, eventProperties, eventOptions) {\n    var baseEvent = typeof eventInput === 'string' ? { event_type: eventInput } : eventInput;\n    return __assign(__assign(__assign({}, baseEvent), eventOptions), (eventProperties && { event_properties: eventProperties }));\n};\nexport var createIdentifyEvent = function (identify, eventOptions) {\n    var identifyEvent = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.IDENTIFY, user_properties: identify.getUserProperties() });\n    return identifyEvent;\n};\nexport var createGroupIdentifyEvent = function (groupType, groupName, identify, eventOptions) {\n    var _a;\n    var groupIdentify = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.GROUP_IDENTIFY, group_properties: identify.getUserProperties(), groups: (_a = {},\n            _a[groupType] = groupName,\n            _a) });\n    return groupIdentify;\n};\nexport var createGroupEvent = function (groupType, groupName, eventOptions) {\n    var _a;\n    var identify = new Identify();\n    identify.set(groupType, groupName);\n    var groupEvent = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.IDENTIFY, user_properties: identify.getUserProperties(), groups: (_a = {},\n            _a[groupType] = groupName,\n            _a) });\n    return groupEvent;\n};\nexport var createRevenueEvent = function (revenue, eventOptions) {\n    return __assign(__assign({}, eventOptions), { event_type: SpecialEventType.REVENUE, event_properties: revenue.getEventProperties() });\n};\n//# sourceMappingURL=event-builder.js.map","import { __awaiter, __generator, __values } from \"tslib\";\nimport { CLIENT_NOT_INITIALIZED, OPT_OUT_MESSAGE } from './messages';\nimport { Timeline } from './timeline';\nimport { createGroupEvent, createGroupIdentifyEvent, createIdentifyEvent, createRevenueEvent, createTrackEvent, } from './utils/event-builder';\nimport { buildResult } from './utils/result-builder';\nimport { returnWrapper } from './utils/return-wrapper';\nvar AmplitudeCore = /** @class */ (function () {\n    function AmplitudeCore(name) {\n        if (name === void 0) { name = '$default'; }\n        this.initializing = false;\n        this.q = [];\n        this.dispatchQ = [];\n        this.logEvent = this.track.bind(this);\n        this.timeline = new Timeline(this);\n        this.name = name;\n    }\n    AmplitudeCore.prototype._init = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.config = config;\n                        this.timeline.reset(this);\n                        return [4 /*yield*/, this.runQueuedFunctions('q')];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.runQueuedFunctions = function (queueName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var queuedFunctions, queuedFunctions_1, queuedFunctions_1_1, queuedFunction, e_1_1;\n            var e_1, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        queuedFunctions = this[queueName];\n                        this[queueName] = [];\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 6, 7, 8]);\n                        queuedFunctions_1 = __values(queuedFunctions), queuedFunctions_1_1 = queuedFunctions_1.next();\n                        _b.label = 2;\n                    case 2:\n                        if (!!queuedFunctions_1_1.done) return [3 /*break*/, 5];\n                        queuedFunction = queuedFunctions_1_1.value;\n                        return [4 /*yield*/, queuedFunction()];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4:\n                        queuedFunctions_1_1 = queuedFunctions_1.next();\n                        return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        e_1_1 = _b.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 8];\n                    case 7:\n                        try {\n                            if (queuedFunctions_1_1 && !queuedFunctions_1_1.done && (_a = queuedFunctions_1.return)) _a.call(queuedFunctions_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                        return [7 /*endfinally*/];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.track = function (eventInput, eventProperties, eventOptions) {\n        var event = createTrackEvent(eventInput, eventProperties, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.identify = function (identify, eventOptions) {\n        var event = createIdentifyEvent(identify, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.groupIdentify = function (groupType, groupName, identify, eventOptions) {\n        var event = createGroupIdentifyEvent(groupType, groupName, identify, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.setGroup = function (groupType, groupName, eventOptions) {\n        var event = createGroupEvent(groupType, groupName, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.revenue = function (revenue, eventOptions) {\n        var event = createRevenueEvent(revenue, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.add = function (plugin) {\n        if (!this.config) {\n            this.q.push(this.add.bind(this, plugin));\n            return returnWrapper();\n        }\n        return returnWrapper(this.timeline.register(plugin, this.config));\n    };\n    AmplitudeCore.prototype.remove = function (pluginName) {\n        if (!this.config) {\n            this.q.push(this.remove.bind(this, pluginName));\n            return returnWrapper();\n        }\n        return returnWrapper(this.timeline.deregister(pluginName));\n    };\n    AmplitudeCore.prototype.dispatchWithCallback = function (event, callback) {\n        if (!this.config) {\n            return callback(buildResult(event, 0, CLIENT_NOT_INITIALIZED));\n        }\n        void this.process(event).then(callback);\n    };\n    AmplitudeCore.prototype.dispatch = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (!this.config) {\n                    return [2 /*return*/, new Promise(function (resolve) {\n                            _this.dispatchQ.push(_this.dispatchWithCallback.bind(_this, event, resolve));\n                        })];\n                }\n                return [2 /*return*/, this.process(event)];\n            });\n        });\n    };\n    AmplitudeCore.prototype.process = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, e_2, message, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        // skip event processing if opt out\n                        if (this.config.optOut) {\n                            return [2 /*return*/, buildResult(event, 0, OPT_OUT_MESSAGE)];\n                        }\n                        return [4 /*yield*/, this.timeline.push(event)];\n                    case 1:\n                        result = _a.sent();\n                        result.code === 200\n                            ? this.config.loggerProvider.log(result.message)\n                            : result.code === 100\n                                ? this.config.loggerProvider.warn(result.message)\n                                : this.config.loggerProvider.error(result.message);\n                        return [2 /*return*/, result];\n                    case 2:\n                        e_2 = _a.sent();\n                        message = String(e_2);\n                        this.config.loggerProvider.error(message);\n                        result = buildResult(event, 0, message);\n                        return [2 /*return*/, result];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.setOptOut = function (optOut) {\n        if (!this.config) {\n            this.q.push(this.setOptOut.bind(this, Boolean(optOut)));\n            return;\n        }\n        this.config.optOut = Boolean(optOut);\n    };\n    AmplitudeCore.prototype.flush = function () {\n        return returnWrapper(this.timeline.flush());\n    };\n    return AmplitudeCore;\n}());\nexport { AmplitudeCore };\n//# sourceMappingURL=core-client.js.map","var ApplicationContextProviderImpl = /** @class */ (function () {\n    function ApplicationContextProviderImpl() {\n    }\n    ApplicationContextProviderImpl.prototype.getApplicationContext = function () {\n        return {\n            versionName: this.versionName,\n            language: getLanguage(),\n            platform: 'Web',\n            os: undefined,\n            deviceModel: undefined,\n        };\n    };\n    return ApplicationContextProviderImpl;\n}());\nvar getLanguage = function () {\n    return ((typeof navigator !== 'undefined' &&\n        ((navigator.languages && navigator.languages[0]) ||\n            navigator.language)) ||\n        '');\n};\n\nvar EventBridgeImpl = /** @class */ (function () {\n    function EventBridgeImpl() {\n        this.queue = [];\n    }\n    EventBridgeImpl.prototype.logEvent = function (event) {\n        if (!this.receiver) {\n            if (this.queue.length < 512) {\n                this.queue.push(event);\n            }\n        }\n        else {\n            this.receiver(event);\n        }\n    };\n    EventBridgeImpl.prototype.setEventReceiver = function (receiver) {\n        this.receiver = receiver;\n        if (this.queue.length > 0) {\n            this.queue.forEach(function (event) {\n                receiver(event);\n            });\n            this.queue = [];\n        }\n    };\n    return EventBridgeImpl;\n}());\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar isEqual = function (obj1, obj2) {\n    var primitive = ['string', 'number', 'boolean', 'undefined'];\n    var typeA = typeof obj1;\n    var typeB = typeof obj2;\n    if (typeA !== typeB) {\n        return false;\n    }\n    for (var _i = 0, primitive_1 = primitive; _i < primitive_1.length; _i++) {\n        var p = primitive_1[_i];\n        if (p === typeA) {\n            return obj1 === obj2;\n        }\n    }\n    // check null\n    if (obj1 == null && obj2 == null) {\n        return true;\n    }\n    else if (obj1 == null || obj2 == null) {\n        return false;\n    }\n    // if got here - objects\n    if (obj1.length !== obj2.length) {\n        return false;\n    }\n    //check if arrays\n    var isArrayA = Array.isArray(obj1);\n    var isArrayB = Array.isArray(obj2);\n    if (isArrayA !== isArrayB) {\n        return false;\n    }\n    if (isArrayA && isArrayB) {\n        //arrays\n        for (var i = 0; i < obj1.length; i++) {\n            if (!isEqual(obj1[i], obj2[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        //objects\n        var sorted1 = Object.keys(obj1).sort();\n        var sorted2 = Object.keys(obj2).sort();\n        if (!isEqual(sorted1, sorted2)) {\n            return false;\n        }\n        //compare object values\n        var result_1 = true;\n        Object.keys(obj1).forEach(function (key) {\n            if (!isEqual(obj1[key], obj2[key])) {\n                result_1 = false;\n            }\n        });\n        return result_1;\n    }\n    return true;\n};\n\nvar ID_OP_SET = '$set';\nvar ID_OP_UNSET = '$unset';\nvar ID_OP_CLEAR_ALL = '$clearAll';\n// Polyfill for Object.entries\nif (!Object.entries) {\n    Object.entries = function (obj) {\n        var ownProps = Object.keys(obj);\n        var i = ownProps.length;\n        var resArray = new Array(i);\n        while (i--) {\n            resArray[i] = [ownProps[i], obj[ownProps[i]]];\n        }\n        return resArray;\n    };\n}\nvar IdentityStoreImpl = /** @class */ (function () {\n    function IdentityStoreImpl() {\n        this.identity = { userProperties: {} };\n        this.listeners = new Set();\n    }\n    IdentityStoreImpl.prototype.editIdentity = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var actingUserProperties = __assign({}, this.identity.userProperties);\n        var actingIdentity = __assign(__assign({}, this.identity), { userProperties: actingUserProperties });\n        return {\n            setUserId: function (userId) {\n                actingIdentity.userId = userId;\n                return this;\n            },\n            setDeviceId: function (deviceId) {\n                actingIdentity.deviceId = deviceId;\n                return this;\n            },\n            setUserProperties: function (userProperties) {\n                actingIdentity.userProperties = userProperties;\n                return this;\n            },\n            setOptOut: function (optOut) {\n                actingIdentity.optOut = optOut;\n                return this;\n            },\n            updateUserProperties: function (actions) {\n                var actingProperties = actingIdentity.userProperties || {};\n                for (var _i = 0, _a = Object.entries(actions); _i < _a.length; _i++) {\n                    var _b = _a[_i], action = _b[0], properties = _b[1];\n                    switch (action) {\n                        case ID_OP_SET:\n                            for (var _c = 0, _d = Object.entries(properties); _c < _d.length; _c++) {\n                                var _e = _d[_c], key = _e[0], value = _e[1];\n                                actingProperties[key] = value;\n                            }\n                            break;\n                        case ID_OP_UNSET:\n                            for (var _f = 0, _g = Object.keys(properties); _f < _g.length; _f++) {\n                                var key = _g[_f];\n                                delete actingProperties[key];\n                            }\n                            break;\n                        case ID_OP_CLEAR_ALL:\n                            actingProperties = {};\n                            break;\n                    }\n                }\n                actingIdentity.userProperties = actingProperties;\n                return this;\n            },\n            commit: function () {\n                self.setIdentity(actingIdentity);\n                return this;\n            },\n        };\n    };\n    IdentityStoreImpl.prototype.getIdentity = function () {\n        return __assign({}, this.identity);\n    };\n    IdentityStoreImpl.prototype.setIdentity = function (identity) {\n        var originalIdentity = __assign({}, this.identity);\n        this.identity = __assign({}, identity);\n        if (!isEqual(originalIdentity, this.identity)) {\n            this.listeners.forEach(function (listener) {\n                listener(identity);\n            });\n        }\n    };\n    IdentityStoreImpl.prototype.addIdentityListener = function (listener) {\n        this.listeners.add(listener);\n    };\n    IdentityStoreImpl.prototype.removeIdentityListener = function (listener) {\n        this.listeners.delete(listener);\n    };\n    return IdentityStoreImpl;\n}());\n\nvar safeGlobal = typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n        ? global\n        : self;\n\nvar AnalyticsConnector = /** @class */ (function () {\n    function AnalyticsConnector() {\n        this.identityStore = new IdentityStoreImpl();\n        this.eventBridge = new EventBridgeImpl();\n        this.applicationContextProvider = new ApplicationContextProviderImpl();\n    }\n    AnalyticsConnector.getInstance = function (instanceName) {\n        if (!safeGlobal['analyticsConnectorInstances']) {\n            safeGlobal['analyticsConnectorInstances'] = {};\n        }\n        if (!safeGlobal['analyticsConnectorInstances'][instanceName]) {\n            safeGlobal['analyticsConnectorInstances'][instanceName] =\n                new AnalyticsConnector();\n        }\n        return safeGlobal['analyticsConnectorInstances'][instanceName];\n    };\n    return AnalyticsConnector;\n}());\n\nexport { AnalyticsConnector };\n","import { AnalyticsConnector } from '@amplitude/analytics-connector';\nexport var getAnalyticsConnector = function (instanceName) {\n    if (instanceName === void 0) { instanceName = '$default_instance'; }\n    return AnalyticsConnector.getInstance(instanceName);\n};\nexport var setConnectorUserId = function (userId, instanceName) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setUserId(userId).commit();\n};\nexport var setConnectorDeviceId = function (deviceId, instanceName) {\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setDeviceId(deviceId).commit();\n};\n//# sourceMappingURL=analytics-connector.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { __awaiter, __generator } from \"tslib\";\nimport { getAnalyticsConnector } from '../analytics-connector';\nvar IdentityEventSender = /** @class */ (function () {\n    function IdentityEventSender() {\n        this.name = 'identity';\n        this.type = 'before';\n        this.identityStore = getAnalyticsConnector().identityStore;\n    }\n    IdentityEventSender.prototype.execute = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var userProperties;\n            return __generator(this, function (_a) {\n                userProperties = context.user_properties;\n                if (userProperties) {\n                    this.identityStore.editIdentity().updateUserProperties(userProperties).commit();\n                }\n                return [2 /*return*/, context];\n            });\n        });\n    };\n    IdentityEventSender.prototype.setup = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (config.instanceName) {\n                    this.identityStore = getAnalyticsConnector(config.instanceName).identityStore;\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return IdentityEventSender;\n}());\nexport { IdentityEventSender };\n//# sourceMappingURL=identity.js.map","import { __assign } from \"tslib\";\n/**\n * Returns false if defaultTracking === false or if defaultTracking[event],\n * otherwise returns true\n */\nvar isTrackingEnabled = function (defaultTracking, event) {\n    if (typeof defaultTracking === 'boolean') {\n        return defaultTracking;\n    }\n    if ((defaultTracking === null || defaultTracking === void 0 ? void 0 : defaultTracking[event]) === false) {\n        return false;\n    }\n    return true;\n};\nexport var isAttributionTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'attribution');\n};\nexport var isFileDownloadTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'fileDownloads');\n};\nexport var isFormInteractionTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'formInteractions');\n};\nexport var isPageViewTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'pageViews');\n};\nexport var isSessionTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'sessions');\n};\nexport var getPageViewTrackingConfig = function (config) {\n    var trackOn = function () { return false; };\n    var trackHistoryChanges = undefined;\n    var eventType;\n    var isDefaultPageViewTrackingEnabled = isPageViewTrackingEnabled(config.defaultTracking);\n    if (isDefaultPageViewTrackingEnabled) {\n        trackOn = undefined;\n        eventType = undefined;\n        if (config.defaultTracking &&\n            typeof config.defaultTracking === 'object' &&\n            config.defaultTracking.pageViews &&\n            typeof config.defaultTracking.pageViews === 'object') {\n            if ('trackOn' in config.defaultTracking.pageViews) {\n                trackOn = config.defaultTracking.pageViews.trackOn;\n            }\n            if ('trackHistoryChanges' in config.defaultTracking.pageViews) {\n                trackHistoryChanges = config.defaultTracking.pageViews.trackHistoryChanges;\n            }\n            if ('eventType' in config.defaultTracking.pageViews && config.defaultTracking.pageViews.eventType) {\n                eventType = config.defaultTracking.pageViews.eventType;\n            }\n        }\n    }\n    return {\n        trackOn: trackOn,\n        trackHistoryChanges: trackHistoryChanges,\n        eventType: eventType,\n    };\n};\nexport var getAttributionTrackingConfig = function (config) {\n    if (isAttributionTrackingEnabled(config.defaultTracking) &&\n        config.defaultTracking &&\n        typeof config.defaultTracking === 'object' &&\n        config.defaultTracking.attribution &&\n        typeof config.defaultTracking.attribution === 'object') {\n        return __assign({}, config.defaultTracking.attribution);\n    }\n    return {};\n};\n//# sourceMappingURL=default-tracking.js.map","export var isNewSession = function (sessionTimeout, lastEventTime) {\n    if (lastEventTime === void 0) { lastEventTime = Date.now(); }\n    var currentTime = Date.now();\n    var timeSinceLastEvent = currentTime - lastEventTime;\n    return timeSinceLastEvent > sessionTimeout;\n};\n//# sourceMappingURL=session.js.map","/**\n * Applies the proxied functions on the proxied amplitude snippet to an instance of the real object.\n * @ignore\n */\nexport var runQueuedFunctions = function (instance, queue) {\n    convertProxyObjectToRealObject(instance, queue);\n};\n/**\n * Applies the proxied functions on the proxied object to an instance of the real object.\n * Used to convert proxied Identify and Revenue objects.\n */\nexport var convertProxyObjectToRealObject = function (instance, queue) {\n    for (var i = 0; i < queue.length; i++) {\n        var _a = queue[i], name_1 = _a.name, args = _a.args, resolve = _a.resolve;\n        var fn = instance && instance[name_1];\n        if (typeof fn === 'function') {\n            var result = fn.apply(instance, args);\n            if (typeof resolve === 'function') {\n                resolve(result === null || result === void 0 ? void 0 : result.promise);\n            }\n        }\n    }\n    return instance;\n};\n/**\n * Check if the param is snippet proxy\n */\nexport var isInstanceProxy = function (instance) {\n    var instanceProxy = instance;\n    return instanceProxy && instanceProxy._q !== undefined;\n};\n//# sourceMappingURL=snippet-helper.js.map","export var getLanguage = function () {\n    var _a, _b, _c, _d;\n    if (typeof navigator === 'undefined')\n        return '';\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    var userLanguage = navigator.userLanguage;\n    return (_d = (_c = (_b = (_a = navigator.languages) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : navigator.language) !== null && _c !== void 0 ? _c : userLanguage) !== null && _d !== void 0 ? _d : '';\n};\n//# sourceMappingURL=language.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { UUID } from '@amplitude/analytics-core';\nimport { getLanguage } from '@amplitude/analytics-client-common';\nimport { VERSION } from '../version';\nvar BROWSER_PLATFORM = 'Web';\nvar IP_ADDRESS = '$remote';\nvar Context = /** @class */ (function () {\n    function Context() {\n        this.name = '@amplitude/plugin-context-browser';\n        this.type = 'before';\n        this.library = \"amplitude-ts/\".concat(VERSION);\n        /* istanbul ignore else */\n        if (typeof navigator !== 'undefined') {\n            this.userAgent = navigator.userAgent;\n        }\n    }\n    Context.prototype.setup = function (config) {\n        this.config = config;\n        return Promise.resolve(undefined);\n    };\n    Context.prototype.execute = function (context) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var time, lastEventId, nextEventId, event;\n            return __generator(this, function (_c) {\n                time = new Date().getTime();\n                lastEventId = (_a = this.config.lastEventId) !== null && _a !== void 0 ? _a : -1;\n                nextEventId = (_b = context.event_id) !== null && _b !== void 0 ? _b : lastEventId + 1;\n                this.config.lastEventId = nextEventId;\n                if (!context.time) {\n                    this.config.lastEventTime = time;\n                }\n                event = __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({ user_id: this.config.userId, device_id: this.config.deviceId, session_id: this.config.sessionId, time: time }, (this.config.appVersion && { app_version: this.config.appVersion })), (this.config.trackingOptions.platform && { platform: BROWSER_PLATFORM })), (this.config.trackingOptions.language && { language: getLanguage() })), (this.config.trackingOptions.ipAddress && { ip: IP_ADDRESS })), { insert_id: UUID(), partner_id: this.config.partnerId, plan: this.config.plan }), (this.config.ingestionMetadata && {\n                    ingestion_metadata: {\n                        source_name: this.config.ingestionMetadata.sourceName,\n                        source_version: this.config.ingestionMetadata.sourceVersion,\n                    },\n                })), context), { event_id: nextEventId, library: this.library, user_agent: this.userAgent });\n                return [2 /*return*/, event];\n            });\n        });\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=context.js.map","export var VERSION = '2.3.3';\n//# sourceMappingURL=version.js.map","import { __awaiter, __generator } from \"tslib\";\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage() {\n        this.memoryStorage = new Map();\n    }\n    MemoryStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, true];\n            });\n        });\n    };\n    MemoryStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.memoryStorage.get(key)];\n            });\n        });\n    };\n    MemoryStorage.prototype.getRaw = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.get(key)];\n                    case 1:\n                        value = _a.sent();\n                        return [2 /*return*/, value ? JSON.stringify(value) : undefined];\n                }\n            });\n        });\n    };\n    MemoryStorage.prototype.set = function (key, value) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.set(key, value);\n                return [2 /*return*/];\n            });\n        });\n    };\n    MemoryStorage.prototype.remove = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.delete(key);\n                return [2 /*return*/];\n            });\n        });\n    };\n    MemoryStorage.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.clear();\n                return [2 /*return*/];\n            });\n        });\n    };\n    return MemoryStorage;\n}());\nexport { MemoryStorage };\n//# sourceMappingURL=memory.js.map","import { AMPLITUDE_PREFIX } from '@amplitude/analytics-core';\nexport var getCookieName = function (apiKey, postKey, limit) {\n    if (postKey === void 0) { postKey = ''; }\n    if (limit === void 0) { limit = 10; }\n    return [AMPLITUDE_PREFIX, postKey, apiKey.substring(0, limit)].filter(Boolean).join('_');\n};\nexport var getOldCookieName = function (apiKey) {\n    return \"\".concat(AMPLITUDE_PREFIX.toLowerCase(), \"_\").concat(apiKey.substring(0, 6));\n};\n//# sourceMappingURL=cookie-name.js.map","/* eslint-disable no-restricted-globals */\n/* Only file allowed to access to globalThis, window, self */\nexport var getGlobalScope = function () {\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    return undefined;\n};\n//# sourceMappingURL=global-scope.js.map","import { getGlobalScope } from './global-scope';\nexport var getQueryParams = function () {\n    var _a;\n    var globalScope = getGlobalScope();\n    /* istanbul ignore if */\n    if (!((_a = globalScope === null || globalScope === void 0 ? void 0 : globalScope.location) === null || _a === void 0 ? void 0 : _a.search)) {\n        return {};\n    }\n    var pairs = globalScope.location.search.substring(1).split('&').filter(Boolean);\n    var params = pairs.reduce(function (acc, curr) {\n        var query = curr.split('=', 2);\n        var key = tryDecodeURIComponent(query[0]);\n        var value = tryDecodeURIComponent(query[1]);\n        if (!value) {\n            return acc;\n        }\n        acc[key] = value;\n        return acc;\n    }, {});\n    return params;\n};\nexport var tryDecodeURIComponent = function (value) {\n    if (value === void 0) { value = ''; }\n    try {\n        return decodeURIComponent(value);\n    }\n    catch (_a) {\n        return '';\n    }\n};\n//# sourceMappingURL=query-params.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { getGlobalScope } from '../global-scope';\nvar CookieStorage = /** @class */ (function () {\n    function CookieStorage(options) {\n        this.options = __assign({}, options);\n    }\n    CookieStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var testStrorage, testKey, value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (!getGlobalScope()) {\n                            return [2 /*return*/, false];\n                        }\n                        CookieStorage.testValue = String(Date.now());\n                        testStrorage = new CookieStorage(this.options);\n                        testKey = 'AMP_TEST';\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, 5, 7]);\n                        return [4 /*yield*/, testStrorage.set(testKey, CookieStorage.testValue)];\n                    case 2:\n                        _b.sent();\n                        return [4 /*yield*/, testStrorage.get(testKey)];\n                    case 3:\n                        value = _b.sent();\n                        return [2 /*return*/, value === CookieStorage.testValue];\n                    case 4:\n                        _a = _b.sent();\n                        /* istanbul ignore next */\n                        return [2 /*return*/, false];\n                    case 5: return [4 /*yield*/, testStrorage.remove(testKey)];\n                    case 6:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRaw(key)];\n                    case 1:\n                        value = _a.sent();\n                        if (!value) {\n                            return [2 /*return*/, undefined];\n                        }\n                        try {\n                            try {\n                                value = decodeURIComponent(atob(value));\n                            }\n                            catch (_b) {\n                                // value not encoded\n                            }\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                            return [2 /*return*/, JSON.parse(value)];\n                        }\n                        catch (_c) {\n                            /* istanbul ignore next */\n                            return [2 /*return*/, undefined];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.getRaw = function (key) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var globalScope, cookie, match;\n            return __generator(this, function (_c) {\n                globalScope = getGlobalScope();\n                cookie = (_b = (_a = globalScope === null || globalScope === void 0 ? void 0 : globalScope.document) === null || _a === void 0 ? void 0 : _a.cookie.split('; ')) !== null && _b !== void 0 ? _b : [];\n                match = cookie.find(function (c) { return c.indexOf(key + '=') === 0; });\n                if (!match) {\n                    return [2 /*return*/, undefined];\n                }\n                return [2 /*return*/, match.substring(key.length + 1)];\n            });\n        });\n    };\n    CookieStorage.prototype.set = function (key, value) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var expirationDays, expires, expireDate, date, str, globalScope;\n            return __generator(this, function (_b) {\n                try {\n                    expirationDays = (_a = this.options.expirationDays) !== null && _a !== void 0 ? _a : 0;\n                    expires = value !== null ? expirationDays : -1;\n                    expireDate = undefined;\n                    if (expires) {\n                        date = new Date();\n                        date.setTime(date.getTime() + expires * 24 * 60 * 60 * 1000);\n                        expireDate = date;\n                    }\n                    str = \"\".concat(key, \"=\").concat(btoa(encodeURIComponent(JSON.stringify(value))));\n                    if (expireDate) {\n                        str += \"; expires=\".concat(expireDate.toUTCString());\n                    }\n                    str += '; path=/';\n                    if (this.options.domain) {\n                        str += \"; domain=\".concat(this.options.domain);\n                    }\n                    if (this.options.secure) {\n                        str += '; Secure';\n                    }\n                    if (this.options.sameSite) {\n                        str += \"; SameSite=\".concat(this.options.sameSite);\n                    }\n                    globalScope = getGlobalScope();\n                    if (globalScope) {\n                        globalScope.document.cookie = str;\n                    }\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    CookieStorage.prototype.remove = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.set(key, null)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    return CookieStorage;\n}());\nexport { CookieStorage };\n//# sourceMappingURL=cookie.js.map","/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport { Status } from '@amplitude/analytics-types';\nvar BaseTransport = /** @class */ (function () {\n    function BaseTransport() {\n    }\n    BaseTransport.prototype.send = function (_serverUrl, _payload) {\n        return Promise.resolve(null);\n    };\n    BaseTransport.prototype.buildResponse = function (responseJSON) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n        if (typeof responseJSON !== 'object') {\n            return null;\n        }\n        var statusCode = responseJSON.code || 0;\n        var status = this.buildStatus(statusCode);\n        switch (status) {\n            case Status.Success:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        eventsIngested: (_a = responseJSON.events_ingested) !== null && _a !== void 0 ? _a : 0,\n                        payloadSizeBytes: (_b = responseJSON.payload_size_bytes) !== null && _b !== void 0 ? _b : 0,\n                        serverUploadTime: (_c = responseJSON.server_upload_time) !== null && _c !== void 0 ? _c : 0,\n                    },\n                };\n            case Status.Invalid:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_d = responseJSON.error) !== null && _d !== void 0 ? _d : '',\n                        missingField: (_e = responseJSON.missing_field) !== null && _e !== void 0 ? _e : '',\n                        eventsWithInvalidFields: (_f = responseJSON.events_with_invalid_fields) !== null && _f !== void 0 ? _f : {},\n                        eventsWithMissingFields: (_g = responseJSON.events_with_missing_fields) !== null && _g !== void 0 ? _g : {},\n                        eventsWithInvalidIdLengths: (_h = responseJSON.events_with_invalid_id_lengths) !== null && _h !== void 0 ? _h : {},\n                        epsThreshold: (_j = responseJSON.eps_threshold) !== null && _j !== void 0 ? _j : 0,\n                        exceededDailyQuotaDevices: (_k = responseJSON.exceeded_daily_quota_devices) !== null && _k !== void 0 ? _k : {},\n                        silencedDevices: (_l = responseJSON.silenced_devices) !== null && _l !== void 0 ? _l : [],\n                        silencedEvents: (_m = responseJSON.silenced_events) !== null && _m !== void 0 ? _m : [],\n                        throttledDevices: (_o = responseJSON.throttled_devices) !== null && _o !== void 0 ? _o : {},\n                        throttledEvents: (_p = responseJSON.throttled_events) !== null && _p !== void 0 ? _p : [],\n                    },\n                };\n            case Status.PayloadTooLarge:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_q = responseJSON.error) !== null && _q !== void 0 ? _q : '',\n                    },\n                };\n            case Status.RateLimit:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_r = responseJSON.error) !== null && _r !== void 0 ? _r : '',\n                        epsThreshold: (_s = responseJSON.eps_threshold) !== null && _s !== void 0 ? _s : 0,\n                        throttledDevices: (_t = responseJSON.throttled_devices) !== null && _t !== void 0 ? _t : {},\n                        throttledUsers: (_u = responseJSON.throttled_users) !== null && _u !== void 0 ? _u : {},\n                        exceededDailyQuotaDevices: (_v = responseJSON.exceeded_daily_quota_devices) !== null && _v !== void 0 ? _v : {},\n                        exceededDailyQuotaUsers: (_w = responseJSON.exceeded_daily_quota_users) !== null && _w !== void 0 ? _w : {},\n                        throttledEvents: (_x = responseJSON.throttled_events) !== null && _x !== void 0 ? _x : [],\n                    },\n                };\n            case Status.Timeout:\n            default:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                };\n        }\n    };\n    BaseTransport.prototype.buildStatus = function (code) {\n        if (code >= 200 && code < 300) {\n            return Status.Success;\n        }\n        if (code === 429) {\n            return Status.RateLimit;\n        }\n        if (code === 413) {\n            return Status.PayloadTooLarge;\n        }\n        if (code === 408) {\n            return Status.Timeout;\n        }\n        if (code >= 400 && code < 500) {\n            return Status.Invalid;\n        }\n        if (code >= 500) {\n            return Status.Failed;\n        }\n        return Status.Unknown;\n    };\n    return BaseTransport;\n}());\nexport { BaseTransport };\n//# sourceMappingURL=base.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar FetchTransport = /** @class */ (function (_super) {\n    __extends(FetchTransport, _super);\n    function FetchTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FetchTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var options, response, responsePayload;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (typeof fetch === 'undefined') {\n                            throw new Error('FetchTransport is not supported');\n                        }\n                        options = {\n                            headers: {\n                                'Content-Type': 'application/json',\n                                Accept: '*/*',\n                            },\n                            body: JSON.stringify(payload),\n                            method: 'POST',\n                        };\n                        return [4 /*yield*/, fetch(serverUrl, options)];\n                    case 1:\n                        response = _a.sent();\n                        return [4 /*yield*/, response.json()];\n                    case 2:\n                        responsePayload = _a.sent();\n                        return [2 /*return*/, this.buildResponse(responsePayload)];\n                }\n            });\n        });\n    };\n    return FetchTransport;\n}(BaseTransport));\nexport { FetchTransport };\n//# sourceMappingURL=fetch.js.map","import { __awaiter, __generator } from \"tslib\";\nvar BrowserStorage = /** @class */ (function () {\n    function BrowserStorage(storage) {\n        this.storage = storage;\n    }\n    BrowserStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var random, testStorage, testKey, value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (!this.storage) {\n                            return [2 /*return*/, false];\n                        }\n                        random = String(Date.now());\n                        testStorage = new BrowserStorage(this.storage);\n                        testKey = 'AMP_TEST';\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, 5, 7]);\n                        return [4 /*yield*/, testStorage.set(testKey, random)];\n                    case 2:\n                        _b.sent();\n                        return [4 /*yield*/, testStorage.get(testKey)];\n                    case 3:\n                        value = _b.sent();\n                        return [2 /*return*/, value === random];\n                    case 4:\n                        _a = _b.sent();\n                        /* istanbul ignore next */\n                        return [2 /*return*/, false];\n                    case 5: return [4 /*yield*/, testStorage.remove(testKey)];\n                    case 6:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.getRaw(key)];\n                    case 1:\n                        value = _b.sent();\n                        if (!value) {\n                            return [2 /*return*/, undefined];\n                        }\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                        return [2 /*return*/, JSON.parse(value)];\n                    case 2:\n                        _a = _b.sent();\n                        console.error(\"[Amplitude] Error: Could not get value from storage\");\n                        return [2 /*return*/, undefined];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserStorage.prototype.getRaw = function (key) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                return [2 /*return*/, ((_a = this.storage) === null || _a === void 0 ? void 0 : _a.getItem(key)) || undefined];\n            });\n        });\n    };\n    BrowserStorage.prototype.set = function (key, value) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = this.storage) === null || _a === void 0 ? void 0 : _a.setItem(key, JSON.stringify(value));\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserStorage.prototype.remove = function (key) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = this.storage) === null || _a === void 0 ? void 0 : _a.removeItem(key);\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserStorage.prototype.reset = function () {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = this.storage) === null || _a === void 0 ? void 0 : _a.clear();\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return BrowserStorage;\n}());\nexport { BrowserStorage };\n//# sourceMappingURL=browser-storage.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nimport { BrowserStorage } from './browser-storage';\nvar MAX_ARRAY_LENGTH = 1000;\nvar LocalStorage = /** @class */ (function (_super) {\n    __extends(LocalStorage, _super);\n    function LocalStorage(config) {\n        var _this = this;\n        var _a;\n        _this = _super.call(this, (_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.localStorage) || this;\n        _this.loggerProvider = config === null || config === void 0 ? void 0 : config.loggerProvider;\n        return _this;\n    }\n    LocalStorage.prototype.set = function (key, value) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var droppedEventsCount;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(Array.isArray(value) && value.length > MAX_ARRAY_LENGTH)) return [3 /*break*/, 2];\n                        droppedEventsCount = value.length - MAX_ARRAY_LENGTH;\n                        return [4 /*yield*/, _super.prototype.set.call(this, key, value.slice(0, MAX_ARRAY_LENGTH))];\n                    case 1:\n                        _b.sent();\n                        (_a = this.loggerProvider) === null || _a === void 0 ? void 0 : _a.error(\"Failed to save \".concat(droppedEventsCount, \" events because the queue length exceeded \").concat(MAX_ARRAY_LENGTH, \".\"));\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, _super.prototype.set.call(this, key, value)];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return LocalStorage;\n}(BrowserStorage));\nexport { LocalStorage };\n//# sourceMappingURL=local-storage.js.map","import { __extends } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nimport { BrowserStorage } from './browser-storage';\nvar SessionStorage = /** @class */ (function (_super) {\n    __extends(SessionStorage, _super);\n    function SessionStorage() {\n        var _a;\n        return _super.call(this, (_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.sessionStorage) || this;\n    }\n    return SessionStorage;\n}(BrowserStorage));\nexport { SessionStorage };\n//# sourceMappingURL=session-storage.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar XHRTransport = /** @class */ (function (_super) {\n    __extends(XHRTransport, _super);\n    function XHRTransport() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            done: 4,\n        };\n        return _this;\n    }\n    XHRTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        /* istanbul ignore if */\n                        if (typeof XMLHttpRequest === 'undefined') {\n                            reject(new Error('XHRTransport is not supported.'));\n                        }\n                        var xhr = new XMLHttpRequest();\n                        xhr.open('POST', serverUrl, true);\n                        xhr.onreadystatechange = function () {\n                            if (xhr.readyState === _this.state.done) {\n                                try {\n                                    var responsePayload = xhr.responseText;\n                                    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                                    var parsedResponsePayload = JSON.parse(responsePayload);\n                                    var result = _this.buildResponse(parsedResponsePayload);\n                                    resolve(result);\n                                }\n                                catch (e) {\n                                    reject(e);\n                                }\n                            }\n                        };\n                        xhr.setRequestHeader('Content-Type', 'application/json');\n                        xhr.setRequestHeader('Accept', '*/*');\n                        xhr.send(JSON.stringify(payload));\n                    })];\n            });\n        });\n    };\n    return XHRTransport;\n}(BaseTransport));\nexport { XHRTransport };\n//# sourceMappingURL=xhr.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar SendBeaconTransport = /** @class */ (function (_super) {\n    __extends(SendBeaconTransport, _super);\n    function SendBeaconTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SendBeaconTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var globalScope = getGlobalScope();\n                        /* istanbul ignore if */\n                        if (!(globalScope === null || globalScope === void 0 ? void 0 : globalScope.navigator.sendBeacon)) {\n                            throw new Error('SendBeaconTransport is not supported');\n                        }\n                        try {\n                            var data = JSON.stringify(payload);\n                            var success = globalScope.navigator.sendBeacon(serverUrl, JSON.stringify(payload));\n                            if (success) {\n                                return resolve(_this.buildResponse({\n                                    code: 200,\n                                    events_ingested: payload.events.length,\n                                    payload_size_bytes: data.length,\n                                    server_upload_time: Date.now(),\n                                }));\n                            }\n                            return resolve(_this.buildResponse({ code: 500 }));\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                    })];\n            });\n        });\n    };\n    return SendBeaconTransport;\n}(BaseTransport));\nexport { SendBeaconTransport };\n//# sourceMappingURL=send-beacon.js.map","import { __awaiter, __generator, __read } from \"tslib\";\nimport { getOldCookieName } from '@amplitude/analytics-client-common';\nexport var parseLegacyCookies = function (apiKey, cookieStorage, deleteLegacyCookies) {\n    if (deleteLegacyCookies === void 0) { deleteLegacyCookies = true; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var cookieName, cookies, _a, deviceId, userId, optOut, sessionId, lastEventTime, lastEventId;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    cookieName = getOldCookieName(apiKey);\n                    return [4 /*yield*/, cookieStorage.getRaw(cookieName)];\n                case 1:\n                    cookies = _b.sent();\n                    if (!cookies) {\n                        return [2 /*return*/, {\n                                optOut: false,\n                            }];\n                    }\n                    if (!deleteLegacyCookies) return [3 /*break*/, 3];\n                    return [4 /*yield*/, cookieStorage.remove(cookieName)];\n                case 2:\n                    _b.sent();\n                    _b.label = 3;\n                case 3:\n                    _a = __read(cookies.split('.'), 6), deviceId = _a[0], userId = _a[1], optOut = _a[2], sessionId = _a[3], lastEventTime = _a[4], lastEventId = _a[5];\n                    return [2 /*return*/, {\n                            deviceId: deviceId,\n                            userId: decode(userId),\n                            sessionId: parseTime(sessionId),\n                            lastEventId: parseTime(lastEventId),\n                            lastEventTime: parseTime(lastEventTime),\n                            optOut: Boolean(optOut),\n                        }];\n            }\n        });\n    });\n};\nexport var parseTime = function (num) {\n    var integer = parseInt(num, 32);\n    if (isNaN(integer)) {\n        return undefined;\n    }\n    return integer;\n};\nexport var decode = function (value) {\n    if (!atob || !escape || !value) {\n        return undefined;\n    }\n    try {\n        return decodeURIComponent(escape(atob(value)));\n    }\n    catch (_a) {\n        return undefined;\n    }\n};\n//# sourceMappingURL=index.js.map","export var DEFAULT_EVENT_PREFIX = '[Amplitude]';\nexport var DEFAULT_PAGE_VIEW_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Page Viewed\");\nexport var DEFAULT_FORM_START_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Started\");\nexport var DEFAULT_FORM_SUBMIT_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Submitted\");\nexport var DEFAULT_FILE_DOWNLOAD_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Downloaded\");\nexport var DEFAULT_SESSION_START_EVENT = 'session_start';\nexport var DEFAULT_SESSION_END_EVENT = 'session_end';\nexport var FILE_EXTENSION = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Extension\");\nexport var FILE_NAME = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Name\");\nexport var LINK_ID = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link ID\");\nexport var LINK_TEXT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link Text\");\nexport var LINK_URL = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link URL\");\nexport var FORM_ID = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form ID\");\nexport var FORM_NAME = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Name\");\nexport var FORM_DESTINATION = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Destination\");\nexport var DEFAULT_IDENTITY_STORAGE = 'cookie';\nexport var DEFAULT_SERVER_ZONE = 'US';\n//# sourceMappingURL=constants.js.map","import { __assign, __awaiter, __extends, __generator } from \"tslib\";\nimport { LogLevel, } from '@amplitude/analytics-types';\nimport { Config, Logger, MemoryStorage, UUID } from '@amplitude/analytics-core';\nimport { CookieStorage, getCookieName, FetchTransport, getQueryParams } from '@amplitude/analytics-client-common';\nimport { LocalStorage } from './storage/local-storage';\nimport { SessionStorage } from './storage/session-storage';\nimport { XHRTransport } from './transports/xhr';\nimport { SendBeaconTransport } from './transports/send-beacon';\nimport { parseLegacyCookies } from './cookie-migration';\nimport { DEFAULT_IDENTITY_STORAGE, DEFAULT_SERVER_ZONE } from './constants';\n// Exported for testing purposes only. Do not expose to public interface.\nvar BrowserConfig = /** @class */ (function (_super) {\n    __extends(BrowserConfig, _super);\n    function BrowserConfig(apiKey, appVersion, cookieStorage, cookieOptions, defaultTracking, deviceId, flushIntervalMillis, flushMaxRetries, flushQueueSize, identityStorage, ingestionMetadata, instanceName, lastEventId, lastEventTime, loggerProvider, logLevel, minIdLength, optOut, partnerId, plan, serverUrl, serverZone, sessionId, sessionTimeout, storageProvider, trackingOptions, transport, useBatch, userId) {\n        if (cookieStorage === void 0) { cookieStorage = new MemoryStorage(); }\n        if (cookieOptions === void 0) { cookieOptions = {\n            domain: '',\n            expiration: 365,\n            sameSite: 'Lax',\n            secure: false,\n            upgrade: true,\n        }; }\n        if (flushIntervalMillis === void 0) { flushIntervalMillis = 1000; }\n        if (flushMaxRetries === void 0) { flushMaxRetries = 5; }\n        if (flushQueueSize === void 0) { flushQueueSize = 30; }\n        if (identityStorage === void 0) { identityStorage = DEFAULT_IDENTITY_STORAGE; }\n        if (loggerProvider === void 0) { loggerProvider = new Logger(); }\n        if (logLevel === void 0) { logLevel = LogLevel.Warn; }\n        if (optOut === void 0) { optOut = false; }\n        if (serverUrl === void 0) { serverUrl = ''; }\n        if (serverZone === void 0) { serverZone = DEFAULT_SERVER_ZONE; }\n        if (sessionTimeout === void 0) { sessionTimeout = 30 * 60 * 1000; }\n        if (storageProvider === void 0) { storageProvider = new LocalStorage({ loggerProvider: loggerProvider }); }\n        if (trackingOptions === void 0) { trackingOptions = {\n            ipAddress: true,\n            language: true,\n            platform: true,\n        }; }\n        if (transport === void 0) { transport = 'fetch'; }\n        if (useBatch === void 0) { useBatch = false; }\n        var _this = _super.call(this, { apiKey: apiKey, storageProvider: storageProvider, transportProvider: createTransport(transport) }) || this;\n        _this.apiKey = apiKey;\n        _this.appVersion = appVersion;\n        _this.cookieOptions = cookieOptions;\n        _this.defaultTracking = defaultTracking;\n        _this.flushIntervalMillis = flushIntervalMillis;\n        _this.flushMaxRetries = flushMaxRetries;\n        _this.flushQueueSize = flushQueueSize;\n        _this.identityStorage = identityStorage;\n        _this.ingestionMetadata = ingestionMetadata;\n        _this.instanceName = instanceName;\n        _this.loggerProvider = loggerProvider;\n        _this.logLevel = logLevel;\n        _this.minIdLength = minIdLength;\n        _this.partnerId = partnerId;\n        _this.plan = plan;\n        _this.serverUrl = serverUrl;\n        _this.serverZone = serverZone;\n        _this.sessionTimeout = sessionTimeout;\n        _this.storageProvider = storageProvider;\n        _this.trackingOptions = trackingOptions;\n        _this.transport = transport;\n        _this.useBatch = useBatch;\n        _this._optOut = false;\n        _this._cookieStorage = cookieStorage;\n        _this.deviceId = deviceId;\n        _this.lastEventId = lastEventId;\n        _this.lastEventTime = lastEventTime;\n        _this.optOut = optOut;\n        _this.sessionId = sessionId;\n        _this.userId = userId;\n        _this.loggerProvider.enable(_this.logLevel);\n        return _this;\n    }\n    Object.defineProperty(BrowserConfig.prototype, \"cookieStorage\", {\n        get: function () {\n            return this._cookieStorage;\n        },\n        set: function (cookieStorage) {\n            if (this._cookieStorage !== cookieStorage) {\n                this._cookieStorage = cookieStorage;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"deviceId\", {\n        get: function () {\n            return this._deviceId;\n        },\n        set: function (deviceId) {\n            if (this._deviceId !== deviceId) {\n                this._deviceId = deviceId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"userId\", {\n        get: function () {\n            return this._userId;\n        },\n        set: function (userId) {\n            if (this._userId !== userId) {\n                this._userId = userId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"sessionId\", {\n        get: function () {\n            return this._sessionId;\n        },\n        set: function (sessionId) {\n            if (this._sessionId !== sessionId) {\n                this._sessionId = sessionId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"optOut\", {\n        get: function () {\n            return this._optOut;\n        },\n        set: function (optOut) {\n            if (this._optOut !== optOut) {\n                this._optOut = optOut;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"lastEventTime\", {\n        get: function () {\n            return this._lastEventTime;\n        },\n        set: function (lastEventTime) {\n            if (this._lastEventTime !== lastEventTime) {\n                this._lastEventTime = lastEventTime;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"lastEventId\", {\n        get: function () {\n            return this._lastEventId;\n        },\n        set: function (lastEventId) {\n            if (this._lastEventId !== lastEventId) {\n                this._lastEventId = lastEventId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BrowserConfig.prototype.updateStorage = function () {\n        var cache = {\n            deviceId: this._deviceId,\n            userId: this._userId,\n            sessionId: this._sessionId,\n            optOut: this._optOut,\n            lastEventTime: this._lastEventTime,\n            lastEventId: this._lastEventId,\n        };\n        void this.cookieStorage.set(getCookieName(this.apiKey), cache);\n    };\n    return BrowserConfig;\n}(Config));\nexport { BrowserConfig };\nexport var useBrowserConfig = function (apiKey, options, amplitudeInstance) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var identityStorage, cookieOptions, _a, _b, cookieStorage, legacyCookies, previousCookies, queryParams, deviceId, lastEventId, lastEventTime, optOut, sessionId, userId, trackingOptions;\n        var _c;\n        var _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1;\n        return __generator(this, function (_2) {\n            switch (_2.label) {\n                case 0:\n                    identityStorage = options.identityStorage || DEFAULT_IDENTITY_STORAGE;\n                    _c = {};\n                    if (!(identityStorage !== DEFAULT_IDENTITY_STORAGE)) return [3 /*break*/, 1];\n                    _a = '';\n                    return [3 /*break*/, 5];\n                case 1:\n                    if (!((_e = (_d = options.cookieOptions) === null || _d === void 0 ? void 0 : _d.domain) !== null && _e !== void 0)) return [3 /*break*/, 2];\n                    _b = _e;\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, getTopLevelDomain()];\n                case 3:\n                    _b = (_2.sent());\n                    _2.label = 4;\n                case 4:\n                    _a = _b;\n                    _2.label = 5;\n                case 5:\n                    cookieOptions = __assign.apply(void 0, [(_c.domain = _a, _c.expiration = 365, _c.sameSite = 'Lax', _c.secure = false, _c.upgrade = true, _c), options.cookieOptions]);\n                    cookieStorage = createCookieStorage(options.identityStorage, cookieOptions);\n                    return [4 /*yield*/, parseLegacyCookies(apiKey, cookieStorage, (_g = (_f = options.cookieOptions) === null || _f === void 0 ? void 0 : _f.upgrade) !== null && _g !== void 0 ? _g : true)];\n                case 6:\n                    legacyCookies = _2.sent();\n                    return [4 /*yield*/, cookieStorage.get(getCookieName(apiKey))];\n                case 7:\n                    previousCookies = _2.sent();\n                    queryParams = getQueryParams();\n                    deviceId = (_l = (_k = (_j = (_h = options.deviceId) !== null && _h !== void 0 ? _h : queryParams.deviceId) !== null && _j !== void 0 ? _j : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.deviceId) !== null && _k !== void 0 ? _k : legacyCookies.deviceId) !== null && _l !== void 0 ? _l : UUID();\n                    lastEventId = (_m = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.lastEventId) !== null && _m !== void 0 ? _m : legacyCookies.lastEventId;\n                    lastEventTime = (_o = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.lastEventTime) !== null && _o !== void 0 ? _o : legacyCookies.lastEventTime;\n                    optOut = (_q = (_p = options.optOut) !== null && _p !== void 0 ? _p : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.optOut) !== null && _q !== void 0 ? _q : legacyCookies.optOut;\n                    sessionId = (_r = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.sessionId) !== null && _r !== void 0 ? _r : legacyCookies.sessionId;\n                    userId = (_t = (_s = options.userId) !== null && _s !== void 0 ? _s : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.userId) !== null && _t !== void 0 ? _t : legacyCookies.userId;\n                    amplitudeInstance.previousSessionDeviceId = (_u = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.deviceId) !== null && _u !== void 0 ? _u : legacyCookies.deviceId;\n                    amplitudeInstance.previousSessionUserId = (_v = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.userId) !== null && _v !== void 0 ? _v : legacyCookies.userId;\n                    trackingOptions = {\n                        ipAddress: (_x = (_w = options.trackingOptions) === null || _w === void 0 ? void 0 : _w.ipAddress) !== null && _x !== void 0 ? _x : true,\n                        language: (_z = (_y = options.trackingOptions) === null || _y === void 0 ? void 0 : _y.language) !== null && _z !== void 0 ? _z : true,\n                        platform: (_1 = (_0 = options.trackingOptions) === null || _0 === void 0 ? void 0 : _0.platform) !== null && _1 !== void 0 ? _1 : true,\n                    };\n                    return [2 /*return*/, new BrowserConfig(apiKey, options.appVersion, cookieStorage, cookieOptions, options.defaultTracking, deviceId, options.flushIntervalMillis, options.flushMaxRetries, options.flushQueueSize, identityStorage, options.ingestionMetadata, options.instanceName, lastEventId, lastEventTime, options.loggerProvider, options.logLevel, options.minIdLength, optOut, options.partnerId, options.plan, options.serverUrl, options.serverZone, sessionId, options.sessionTimeout, options.storageProvider, trackingOptions, options.transport, options.useBatch, userId)];\n            }\n        });\n    });\n};\nexport var createCookieStorage = function (identityStorage, cookieOptions) {\n    if (identityStorage === void 0) { identityStorage = DEFAULT_IDENTITY_STORAGE; }\n    if (cookieOptions === void 0) { cookieOptions = {}; }\n    switch (identityStorage) {\n        case 'localStorage':\n            return new LocalStorage();\n        case 'sessionStorage':\n            return new SessionStorage();\n        case 'none':\n            return new MemoryStorage();\n        case 'cookie':\n        default:\n            return new CookieStorage(__assign(__assign({}, cookieOptions), { expirationDays: cookieOptions.expiration }));\n    }\n};\nexport var createTransport = function (transport) {\n    if (transport === 'xhr') {\n        return new XHRTransport();\n    }\n    if (transport === 'beacon') {\n        return new SendBeaconTransport();\n    }\n    return new FetchTransport();\n};\nexport var getTopLevelDomain = function (url) { return __awaiter(void 0, void 0, void 0, function () {\n    var host, parts, levels, storageKey, i, i, domain, options, storage, value;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, new CookieStorage().isEnabled()];\n            case 1:\n                if (!(_a.sent()) || (!url && typeof location === 'undefined')) {\n                    return [2 /*return*/, ''];\n                }\n                host = url !== null && url !== void 0 ? url : location.hostname;\n                parts = host.split('.');\n                levels = [];\n                storageKey = 'AMP_TLDTEST';\n                for (i = parts.length - 2; i >= 0; --i) {\n                    levels.push(parts.slice(i).join('.'));\n                }\n                i = 0;\n                _a.label = 2;\n            case 2:\n                if (!(i < levels.length)) return [3 /*break*/, 7];\n                domain = levels[i];\n                options = { domain: '.' + domain };\n                storage = new CookieStorage(options);\n                return [4 /*yield*/, storage.set(storageKey, 1)];\n            case 3:\n                _a.sent();\n                return [4 /*yield*/, storage.get(storageKey)];\n            case 4:\n                value = _a.sent();\n                if (!value) return [3 /*break*/, 6];\n                return [4 /*yield*/, storage.remove(storageKey)];\n            case 5:\n                _a.sent();\n                return [2 /*return*/, '.' + domain];\n            case 6:\n                i++;\n                return [3 /*break*/, 2];\n            case 7: return [2 /*return*/, ''];\n        }\n    });\n}); };\n//# sourceMappingURL=config.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","export var UTM_CAMPAIGN = 'utm_campaign';\nexport var UTM_CONTENT = 'utm_content';\nexport var UTM_ID = 'utm_id';\nexport var UTM_MEDIUM = 'utm_medium';\nexport var UTM_SOURCE = 'utm_source';\nexport var UTM_TERM = 'utm_term';\nexport var DCLID = 'dclid';\nexport var FBCLID = 'fbclid';\nexport var GBRAID = 'gbraid';\nexport var GCLID = 'gclid';\nexport var KO_CLICK_ID = 'ko_click_id';\nexport var LI_FAT_ID = 'li_fat_id';\nexport var MSCLKID = 'msclkid';\nexport var RDT_CID = 'rtd_cid';\nexport var TTCLID = 'ttclid';\nexport var TWCLID = 'twclid';\nexport var WBRAID = 'wbraid';\nexport var EMPTY_VALUE = 'EMPTY';\nexport var BASE_CAMPAIGN = {\n    utm_campaign: undefined,\n    utm_content: undefined,\n    utm_id: undefined,\n    utm_medium: undefined,\n    utm_source: undefined,\n    utm_term: undefined,\n    referrer: undefined,\n    referring_domain: undefined,\n    dclid: undefined,\n    gbraid: undefined,\n    gclid: undefined,\n    fbclid: undefined,\n    ko_click_id: undefined,\n    li_fat_id: undefined,\n    msclkid: undefined,\n    rtd_cid: undefined,\n    ttclid: undefined,\n    twclid: undefined,\n    wbraid: undefined,\n};\nexport var MKTG = 'MKTG';\n//# sourceMappingURL=constants.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { getQueryParams } from '../query-params';\nimport { UTM_CAMPAIGN, UTM_CONTENT, UTM_MEDIUM, UTM_SOURCE, UTM_TERM, GCLID, FBCLID, BASE_CAMPAIGN, DCLID, MSCLKID, RDT_CID, TWCLID, TTCLID, KO_CLICK_ID, LI_FAT_ID, GBRAID, WBRAID, UTM_ID, } from './constants';\nvar CampaignParser = /** @class */ (function () {\n    function CampaignParser() {\n    }\n    CampaignParser.prototype.parse = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, __assign(__assign(__assign(__assign({}, BASE_CAMPAIGN), this.getUtmParam()), this.getReferrer()), this.getClickIds())];\n            });\n        });\n    };\n    CampaignParser.prototype.getUtmParam = function () {\n        var params = getQueryParams();\n        var utmCampaign = params[UTM_CAMPAIGN];\n        var utmContent = params[UTM_CONTENT];\n        var utmId = params[UTM_ID];\n        var utmMedium = params[UTM_MEDIUM];\n        var utmSource = params[UTM_SOURCE];\n        var utmTerm = params[UTM_TERM];\n        return {\n            utm_campaign: utmCampaign,\n            utm_content: utmContent,\n            utm_id: utmId,\n            utm_medium: utmMedium,\n            utm_source: utmSource,\n            utm_term: utmTerm,\n        };\n    };\n    CampaignParser.prototype.getReferrer = function () {\n        var _a, _b;\n        var data = {\n            referrer: undefined,\n            referring_domain: undefined,\n        };\n        try {\n            data.referrer = document.referrer || undefined;\n            data.referring_domain = (_b = (_a = data.referrer) === null || _a === void 0 ? void 0 : _a.split('/')[2]) !== null && _b !== void 0 ? _b : undefined;\n        }\n        catch (_c) {\n            // nothing to track\n        }\n        return data;\n    };\n    CampaignParser.prototype.getClickIds = function () {\n        var _a;\n        var params = getQueryParams();\n        return _a = {},\n            _a[DCLID] = params[DCLID],\n            _a[FBCLID] = params[FBCLID],\n            _a[GBRAID] = params[GBRAID],\n            _a[GCLID] = params[GCLID],\n            _a[KO_CLICK_ID] = params[KO_CLICK_ID],\n            _a[LI_FAT_ID] = params[LI_FAT_ID],\n            _a[MSCLKID] = params[MSCLKID],\n            _a[RDT_CID] = params[RDT_CID],\n            _a[TTCLID] = params[TTCLID],\n            _a[TWCLID] = params[TWCLID],\n            _a[WBRAID] = params[WBRAID],\n            _a;\n    };\n    return CampaignParser;\n}());\nexport { CampaignParser };\n//# sourceMappingURL=campaign-parser.js.map","import { __assign, __read, __rest } from \"tslib\";\nimport { BASE_CAMPAIGN } from '@amplitude/analytics-client-common';\nimport { AMPLITUDE_PREFIX, createIdentifyEvent, Identify } from '@amplitude/analytics-core';\nexport var getStorageKey = function (apiKey, postKey, limit) {\n    if (postKey === void 0) { postKey = ''; }\n    if (limit === void 0) { limit = 10; }\n    return [AMPLITUDE_PREFIX, postKey, apiKey.substring(0, limit)].filter(Boolean).join('_');\n};\nvar domainWithoutSubdomain = function (domain) {\n    var parts = domain.split('.');\n    if (parts.length <= 2) {\n        return domain;\n    }\n    return parts.slice(parts.length - 2, parts.length).join('.');\n};\n//Direct traffic mean no external referral, no UTMs, no click-ids, and no other customer identified marketing campaign url params.\nvar isDirectTraffic = function (current) {\n    return Object.values(current).every(function (value) { return !value; });\n};\nexport var isNewCampaign = function (current, previous, options, isNewSession) {\n    if (isNewSession === void 0) { isNewSession = true; }\n    var referrer = current.referrer, referring_domain = current.referring_domain, currentCampaign = __rest(current, [\"referrer\", \"referring_domain\"]);\n    var _a = previous || {}, _previous_referrer = _a.referrer, prevReferringDomain = _a.referring_domain, previousCampaign = __rest(_a, [\"referrer\", \"referring_domain\"]);\n    if (isExcludedReferrer(options.excludeReferrers, current.referring_domain)) {\n        return false;\n    }\n    //In the same session, direct traffic should not override or unset any persisting query params\n    if (!isNewSession && isDirectTraffic(current) && previous) {\n        return false;\n    }\n    var hasNewCampaign = JSON.stringify(currentCampaign) !== JSON.stringify(previousCampaign);\n    var hasNewDomain = domainWithoutSubdomain(referring_domain || '') !== domainWithoutSubdomain(prevReferringDomain || '');\n    return !previous || hasNewCampaign || hasNewDomain;\n};\nexport var isExcludedReferrer = function (excludeReferrers, referringDomain) {\n    if (excludeReferrers === void 0) { excludeReferrers = []; }\n    if (referringDomain === void 0) { referringDomain = ''; }\n    return excludeReferrers.some(function (value) {\n        return value instanceof RegExp ? value.test(referringDomain) : value === referringDomain;\n    });\n};\nexport var createCampaignEvent = function (campaign, options) {\n    var campaignParameters = __assign(__assign({}, BASE_CAMPAIGN), campaign);\n    var identifyEvent = Object.entries(campaignParameters).reduce(function (identify, _a) {\n        var _b;\n        var _c = __read(_a, 2), key = _c[0], value = _c[1];\n        identify.setOnce(\"initial_\".concat(key), (_b = value !== null && value !== void 0 ? value : options.initialEmptyValue) !== null && _b !== void 0 ? _b : 'EMPTY');\n        if (value) {\n            return identify.set(key, value);\n        }\n        return identify.unset(key);\n    }, new Identify());\n    return createIdentifyEvent(identifyEvent);\n};\nexport var getDefaultExcludedReferrers = function (cookieDomain) {\n    var domain = cookieDomain;\n    if (domain) {\n        if (domain.startsWith('.')) {\n            domain = domain.substring(1);\n        }\n        return [new RegExp(\"\".concat(domain.replace('.', '\\\\.'), \"$\"))];\n    }\n    return [];\n};\n//# sourceMappingURL=helpers.js.map","import { __assign, __awaiter, __generator, __read } from \"tslib\";\nimport { CampaignParser } from '@amplitude/analytics-client-common';\nimport { createCampaignEvent, getDefaultExcludedReferrers, getStorageKey, isNewCampaign } from './helpers';\nimport { isNewSession } from '@amplitude/analytics-client-common';\nexport var webAttributionPlugin = function (options) {\n    var _this = this;\n    if (options === void 0) { options = {}; }\n    var plugin = {\n        name: '@amplitude/plugin-web-attribution-browser',\n        type: 'before',\n        setup: function (config, amplitude) {\n            var _a;\n            return __awaiter(this, void 0, void 0, function () {\n                var pluginConfig, storage, storageKey, _b, currentCampaign, previousCampaign, isEventInNewSession, campaignEvent;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0:\n                            pluginConfig = __assign({ initialEmptyValue: 'EMPTY', resetSessionOnNewCampaign: false, excludeReferrers: getDefaultExcludedReferrers((_a = config.cookieOptions) === null || _a === void 0 ? void 0 : _a.domain) }, options);\n                            config.loggerProvider.log('Installing @amplitude/plugin-web-attribution-browser.');\n                            storage = config.cookieStorage;\n                            storageKey = getStorageKey(config.apiKey, 'MKTG');\n                            return [4 /*yield*/, Promise.all([\n                                    new CampaignParser().parse(),\n                                    storage.get(storageKey),\n                                ])];\n                        case 1:\n                            _b = __read.apply(void 0, [_c.sent(), 2]), currentCampaign = _b[0], previousCampaign = _b[1];\n                            isEventInNewSession = isNewSession(config.sessionTimeout, config.lastEventTime);\n                            if (isNewCampaign(currentCampaign, previousCampaign, pluginConfig, isEventInNewSession)) {\n                                if (pluginConfig.resetSessionOnNewCampaign) {\n                                    amplitude.setSessionId(Date.now());\n                                    config.loggerProvider.log('Created a new session for new campaign.');\n                                }\n                                config.loggerProvider.log('Tracking attribution.');\n                                campaignEvent = createCampaignEvent(currentCampaign, pluginConfig);\n                                amplitude.track(campaignEvent);\n                                void storage.set(storageKey, currentCampaign);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        execute: function (event) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n            return [2 /*return*/, event];\n        }); }); },\n    };\n    return plugin;\n};\n//# sourceMappingURL=web-attribution.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { debugWrapper, getClientLogConfig, getClientStates } from '@amplitude/analytics-core';\nimport { AmplitudeBrowser } from './browser-client';\nexport var createInstance = function () {\n    var client = new AmplitudeBrowser();\n    return {\n        init: debugWrapper(client.init.bind(client), 'init', getClientLogConfig(client), getClientStates(client, ['config'])),\n        add: debugWrapper(client.add.bind(client), 'add', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.plugins'])),\n        remove: debugWrapper(client.remove.bind(client), 'remove', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.plugins'])),\n        track: debugWrapper(client.track.bind(client), 'track', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        logEvent: debugWrapper(client.logEvent.bind(client), 'logEvent', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        identify: debugWrapper(client.identify.bind(client), 'identify', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        groupIdentify: debugWrapper(client.groupIdentify.bind(client), 'groupIdentify', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        setGroup: debugWrapper(client.setGroup.bind(client), 'setGroup', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        revenue: debugWrapper(client.revenue.bind(client), 'revenue', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        flush: debugWrapper(client.flush.bind(client), 'flush', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        getUserId: debugWrapper(client.getUserId.bind(client), 'getUserId', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId'])),\n        setUserId: debugWrapper(client.setUserId.bind(client), 'setUserId', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId'])),\n        getDeviceId: debugWrapper(client.getDeviceId.bind(client), 'getDeviceId', getClientLogConfig(client), getClientStates(client, ['config', 'config.deviceId'])),\n        setDeviceId: debugWrapper(client.setDeviceId.bind(client), 'setDeviceId', getClientLogConfig(client), getClientStates(client, ['config', 'config.deviceId'])),\n        reset: debugWrapper(client.reset.bind(client), 'reset', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId', 'config.deviceId'])),\n        getSessionId: debugWrapper(client.getSessionId.bind(client), 'getSessionId', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setSessionId: debugWrapper(client.setSessionId.bind(client), 'setSessionId', getClientLogConfig(client), getClientStates(client, ['config'])),\n        extendSession: debugWrapper(client.extendSession.bind(client), 'extendSession', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setOptOut: debugWrapper(client.setOptOut.bind(client), 'setOptOut', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setTransport: debugWrapper(client.setTransport.bind(client), 'setTransport', getClientLogConfig(client), getClientStates(client, ['config'])),\n    };\n};\nexport default createInstance();\n//# sourceMappingURL=browser-client-factory.js.map","export var omitUndefined = function (input) {\n    var obj = {};\n    for (var key in input) {\n        var val = input[key];\n        if (val) {\n            obj[key] = val;\n        }\n    }\n    return obj;\n};\n//# sourceMappingURL=utils.js.map","import { __assign, __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nimport { CampaignParser, getGlobalScope } from '@amplitude/analytics-client-common';\nimport { IdentifyOperation, } from '@amplitude/analytics-types';\nimport { BASE_CAMPAIGN } from '@amplitude/analytics-client-common';\nimport { omitUndefined } from './utils';\nexport var pageViewTrackingPlugin = function (options) {\n    if (options === void 0) { options = {}; }\n    var amplitude;\n    var globalScope = getGlobalScope();\n    var loggerProvider = undefined;\n    var pushState;\n    var createPageViewEvent = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var _a;\n        var _b;\n        var _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    _b = {\n                        event_type: (_c = options.eventType) !== null && _c !== void 0 ? _c : '[Amplitude] Page Viewed'\n                    };\n                    _a = [{}];\n                    return [4 /*yield*/, getCampaignParams()];\n                case 1: return [2 /*return*/, (_b.event_properties = __assign.apply(void 0, [__assign.apply(void 0, _a.concat([(_d.sent())])), { '[Amplitude] Page Domain': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.hostname) || '', '[Amplitude] Page Location': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.href) || '', '[Amplitude] Page Path': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.pathname) || '', '[Amplitude] Page Title': /* istanbul ignore next */ (typeof document !== 'undefined' && document.title) || '', '[Amplitude] Page URL': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.href.split('?')[0]) || '' }]),\n                        _b)];\n            }\n        });\n    }); };\n    var shouldTrackOnPageLoad = function () {\n        return typeof options.trackOn === 'undefined' || (typeof options.trackOn === 'function' && options.trackOn());\n    };\n    /* istanbul ignore next */\n    var previousURL = typeof location !== 'undefined' ? location.href : null;\n    var trackHistoryPageView = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var newURL, shouldTrackPageView, _a, _b, _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    newURL = location.href;\n                    shouldTrackPageView = shouldTrackHistoryPageView(options.trackHistoryChanges, newURL, previousURL || '') && shouldTrackOnPageLoad();\n                    // Note: Update `previousURL` in the same clock tick as `shouldTrackHistoryPageView()`\n                    // This was previously done after `amplitude?.track(await createPageViewEvent());` and\n                    // causes a concurrency issue where app triggers `pushState` twice with the same URL target\n                    // but `previousURL` is only updated after the second `pushState` producing two page viewed events\n                    previousURL = newURL;\n                    if (!shouldTrackPageView) return [3 /*break*/, 4];\n                    /* istanbul ignore next */\n                    loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Tracking page view event');\n                    if (!(amplitude === null || amplitude === void 0)) return [3 /*break*/, 1];\n                    _a = void 0;\n                    return [3 /*break*/, 3];\n                case 1:\n                    _c = (_b = amplitude).track;\n                    return [4 /*yield*/, createPageViewEvent()];\n                case 2:\n                    _a = _c.apply(_b, [_d.sent()]);\n                    _d.label = 3;\n                case 3:\n                    _a;\n                    _d.label = 4;\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    /* istanbul ignore next */\n    var trackHistoryPageViewWrapper = function () {\n        void trackHistoryPageView();\n    };\n    var plugin = {\n        name: '@amplitude/plugin-page-view-tracking-browser',\n        type: 'enrichment',\n        setup: function (config, client) { return __awaiter(void 0, void 0, void 0, function () {\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        amplitude = client;\n                        loggerProvider = config.loggerProvider;\n                        loggerProvider.log('Installing @amplitude/plugin-page-view-tracking-browser');\n                        if (globalScope) {\n                            globalScope.addEventListener('popstate', trackHistoryPageViewWrapper);\n                            // Save reference to original push state, to be used in teardown\n                            // eslint-disable-next-line @typescript-eslint/unbound-method\n                            pushState = globalScope.history.pushState;\n                            /* istanbul ignore next */\n                            // There is no global browser listener for changes to history, so we have\n                            // to modify pushState directly.\n                            // https://stackoverflow.com/a/64927639\n                            // eslint-disable-next-line @typescript-eslint/unbound-method\n                            globalScope.history.pushState = new Proxy(globalScope.history.pushState, {\n                                apply: function (target, thisArg, _a) {\n                                    var _b = __read(_a, 3), state = _b[0], unused = _b[1], url = _b[2];\n                                    target.apply(thisArg, [state, unused, url]);\n                                    void trackHistoryPageView();\n                                },\n                            });\n                        }\n                        if (!shouldTrackOnPageLoad()) return [3 /*break*/, 2];\n                        loggerProvider.log('Tracking page view event');\n                        _b = (_a = amplitude).track;\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        _b.apply(_a, [_c.sent()]);\n                        _c.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        }); },\n        execute: function (event) { return __awaiter(void 0, void 0, void 0, function () {\n            var pageViewEvent;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(options.trackOn === 'attribution' && isCampaignEvent(event))) return [3 /*break*/, 2];\n                        /* istanbul ignore next */ // loggerProvider should be defined by the time execute is invoked\n                        loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Enriching campaign event to page view event with campaign parameters');\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        pageViewEvent = _a.sent();\n                        event.event_type = pageViewEvent.event_type;\n                        event.event_properties = __assign(__assign({}, event.event_properties), pageViewEvent.event_properties);\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, event];\n                }\n            });\n        }); },\n        teardown: function () { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (globalScope) {\n                    globalScope.removeEventListener('popstate', trackHistoryPageViewWrapper);\n                    if (pushState) {\n                        globalScope.history.pushState = pushState;\n                    }\n                }\n                return [2 /*return*/];\n            });\n        }); },\n    };\n    return plugin;\n};\nvar getCampaignParams = function () { return __awaiter(void 0, void 0, void 0, function () { var _a; return __generator(this, function (_b) {\n    switch (_b.label) {\n        case 0:\n            _a = omitUndefined;\n            return [4 /*yield*/, new CampaignParser().parse()];\n        case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n    }\n}); }); };\nvar isCampaignEvent = function (event) {\n    if (event.event_type === '$identify' && event.user_properties) {\n        var properties = event.user_properties;\n        var $set = properties[IdentifyOperation.SET] || {};\n        var $unset = properties[IdentifyOperation.UNSET] || {};\n        var userProperties_1 = __spreadArray(__spreadArray([], __read(Object.keys($set)), false), __read(Object.keys($unset)), false);\n        return Object.keys(BASE_CAMPAIGN).every(function (value) { return userProperties_1.includes(value); });\n    }\n    return false;\n};\nexport var shouldTrackHistoryPageView = function (trackingOption, newURL, oldURL) {\n    switch (trackingOption) {\n        case 'pathOnly':\n            return newURL.split('?')[0] !== oldURL.split('?')[0];\n        default:\n            return newURL !== oldURL;\n    }\n};\n//# sourceMappingURL=page-view-tracking.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { DEFAULT_FORM_START_EVENT, DEFAULT_FORM_SUBMIT_EVENT, FORM_ID, FORM_NAME, FORM_DESTINATION, } from '../constants';\nexport var formInteractionTracking = function () {\n    var observer;\n    var eventListeners = [];\n    var addEventListener = function (element, type, handler) {\n        element.addEventListener(type, handler);\n        eventListeners.push({\n            element: element,\n            type: type,\n            handler: handler,\n        });\n    };\n    var removeClickListeners = function () {\n        eventListeners.forEach(function (_a) {\n            var element = _a.element, type = _a.type, handler = _a.handler;\n            /* istanbul ignore next */\n            element === null || element === void 0 ? void 0 : element.removeEventListener(type, handler);\n        });\n        eventListeners = [];\n    };\n    var name = '@amplitude/plugin-form-interaction-tracking-browser';\n    var type = 'enrichment';\n    var setup = function (config, amplitude) { return __awaiter(void 0, void 0, void 0, function () {\n        var addFormInteractionListener, forms;\n        return __generator(this, function (_a) {\n            /* istanbul ignore if */\n            if (!amplitude) {\n                // TODO: Add required minimum version of @amplitude/analytics-browser\n                config.loggerProvider.warn('Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.');\n                return [2 /*return*/];\n            }\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') {\n                return [2 /*return*/];\n            }\n            addFormInteractionListener = function (form) {\n                var hasFormChanged = false;\n                addEventListener(form, 'change', function () {\n                    var _a;\n                    if (!hasFormChanged) {\n                        amplitude.track(DEFAULT_FORM_START_EVENT, (_a = {},\n                            _a[FORM_ID] = form.id,\n                            _a[FORM_NAME] = stringOrUndefined(form.name),\n                            _a[FORM_DESTINATION] = form.action,\n                            _a));\n                    }\n                    hasFormChanged = true;\n                });\n                addEventListener(form, 'submit', function () {\n                    var _a, _b;\n                    if (!hasFormChanged) {\n                        amplitude.track(DEFAULT_FORM_START_EVENT, (_a = {},\n                            _a[FORM_ID] = form.id,\n                            _a[FORM_NAME] = stringOrUndefined(form.name),\n                            _a[FORM_DESTINATION] = form.action,\n                            _a));\n                    }\n                    amplitude.track(DEFAULT_FORM_SUBMIT_EVENT, (_b = {},\n                        _b[FORM_ID] = form.id,\n                        _b[FORM_NAME] = stringOrUndefined(form.name),\n                        _b[FORM_DESTINATION] = form.action,\n                        _b));\n                    hasFormChanged = false;\n                });\n            };\n            forms = Array.from(document.getElementsByTagName('form'));\n            forms.forEach(addFormInteractionListener);\n            // Adds listener to anchor tags added after initial load\n            /* istanbul ignore else */\n            if (typeof MutationObserver !== 'undefined') {\n                observer = new MutationObserver(function (mutations) {\n                    mutations.forEach(function (mutation) {\n                        mutation.addedNodes.forEach(function (node) {\n                            if (node.nodeName === 'FORM') {\n                                addFormInteractionListener(node);\n                            }\n                            if ('querySelectorAll' in node && typeof node.querySelectorAll === 'function') {\n                                Array.from(node.querySelectorAll('form')).map(addFormInteractionListener);\n                            }\n                        });\n                    });\n                });\n                observer.observe(document.body, {\n                    subtree: true,\n                    childList: true,\n                });\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var execute = function (event) { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        return [2 /*return*/, event];\n    }); }); };\n    var teardown = function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n            removeClickListeners();\n            return [2 /*return*/];\n        });\n    }); };\n    return {\n        name: name,\n        type: type,\n        setup: setup,\n        execute: execute,\n        teardown: teardown,\n    };\n};\nexport var stringOrUndefined = function (name) {\n    /* istanbul ignore if */\n    if (typeof name !== 'string') {\n        // We found instances where the value of `name` is an Element and not a string.\n        // Elements may have circular references and would throw an error when passed to `JSON.stringify(...)`.\n        // If a non-string value is seen, assume there is no value.\n        return undefined;\n    }\n    return name;\n};\n//# sourceMappingURL=form-interaction-tracking.js.map","var notified = false;\nexport var detNotify = function (config) {\n    if (notified || config.defaultTracking !== undefined) {\n        return;\n    }\n    var message = \"`options.defaultTracking` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to `options.defaultTracking`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:\\n\\namplitude.init(<YOUR_API_KEY>, {\\n  defaultTracking: true,\\n});\\n\\nVisit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.\";\n    config.loggerProvider.warn(message);\n    notified = true;\n};\n/**\n * @private\n * This function is meant for testing purposes only\n */\nexport var resetNotify = function () {\n    notified = false;\n};\n//# sourceMappingURL=det-notification.js.map","import { __assign, __awaiter, __extends, __generator } from \"tslib\";\nimport { AmplitudeCore, Destination, Identify, returnWrapper, Revenue, UUID } from '@amplitude/analytics-core';\nimport { getAnalyticsConnector, getAttributionTrackingConfig, getPageViewTrackingConfig, IdentityEventSender, isAttributionTrackingEnabled, isSessionTrackingEnabled, isFileDownloadTrackingEnabled, isFormInteractionTrackingEnabled, setConnectorDeviceId, setConnectorUserId, isNewSession, } from '@amplitude/analytics-client-common';\nimport { convertProxyObjectToRealObject, isInstanceProxy } from './utils/snippet-helper';\nimport { Context } from './plugins/context';\nimport { useBrowserConfig, createTransport } from './config';\nimport { webAttributionPlugin } from '@amplitude/plugin-web-attribution-browser';\nimport { pageViewTrackingPlugin } from '@amplitude/plugin-page-view-tracking-browser';\nimport { formInteractionTracking } from './plugins/form-interaction-tracking';\nimport { fileDownloadTracking } from './plugins/file-download-tracking';\nimport { DEFAULT_SESSION_END_EVENT, DEFAULT_SESSION_START_EVENT } from './constants';\nimport { detNotify } from './det-notification';\nvar AmplitudeBrowser = /** @class */ (function (_super) {\n    __extends(AmplitudeBrowser, _super);\n    function AmplitudeBrowser() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AmplitudeBrowser.prototype.init = function (apiKey, userIdOrOptions, maybeOptions) {\n        if (apiKey === void 0) { apiKey = ''; }\n        var userId;\n        var options;\n        if (arguments.length > 2) {\n            userId = userIdOrOptions;\n            options = maybeOptions;\n        }\n        else {\n            if (typeof userIdOrOptions === 'string') {\n                userId = userIdOrOptions;\n                options = undefined;\n            }\n            else {\n                userId = userIdOrOptions === null || userIdOrOptions === void 0 ? void 0 : userIdOrOptions.userId;\n                options = userIdOrOptions;\n            }\n        }\n        return returnWrapper(this._init(__assign(__assign({}, options), { userId: userId, apiKey: apiKey })));\n    };\n    AmplitudeBrowser.prototype._init = function (options) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var browserOptions, connector, attributionTrackingOptions, webAttribution;\n            var _this = this;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        // Step 1: Block concurrent initialization\n                        if (this.initializing) {\n                            return [2 /*return*/];\n                        }\n                        this.initializing = true;\n                        return [4 /*yield*/, useBrowserConfig(options.apiKey, options, this)];\n                    case 1:\n                        browserOptions = _c.sent();\n                        return [4 /*yield*/, _super.prototype._init.call(this, browserOptions)];\n                    case 2:\n                        _c.sent();\n                        // Step 3: Set session ID\n                        // Priority 1: `options.sessionId`\n                        // Priority 2: last known sessionId from user identity storage\n                        // Default: `Date.now()`\n                        // Session ID is handled differently than device ID and user ID due to session events\n                        this.setSessionId((_b = (_a = options.sessionId) !== null && _a !== void 0 ? _a : this.config.sessionId) !== null && _b !== void 0 ? _b : Date.now());\n                        connector = getAnalyticsConnector(options.instanceName);\n                        connector.identityStore.setIdentity({\n                            userId: this.config.userId,\n                            deviceId: this.config.deviceId,\n                        });\n                        // Step 4: Install plugins\n                        // Do not track any events before this\n                        return [4 /*yield*/, this.add(new Destination()).promise];\n                    case 3:\n                        // Step 4: Install plugins\n                        // Do not track any events before this\n                        _c.sent();\n                        return [4 /*yield*/, this.add(new Context()).promise];\n                    case 4:\n                        _c.sent();\n                        return [4 /*yield*/, this.add(new IdentityEventSender()).promise];\n                    case 5:\n                        _c.sent();\n                        // Notify if DET is enabled\n                        detNotify(this.config);\n                        if (!isFileDownloadTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, this.add(fileDownloadTracking()).promise];\n                    case 6:\n                        _c.sent();\n                        _c.label = 7;\n                    case 7:\n                        if (!isFormInteractionTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, this.add(formInteractionTracking()).promise];\n                    case 8:\n                        _c.sent();\n                        _c.label = 9;\n                    case 9:\n                        if (!isAttributionTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 11];\n                        attributionTrackingOptions = getAttributionTrackingConfig(this.config);\n                        webAttribution = webAttributionPlugin(attributionTrackingOptions);\n                        return [4 /*yield*/, this.add(webAttribution).promise];\n                    case 10:\n                        _c.sent();\n                        _c.label = 11;\n                    case 11: \n                    // Add page view plugin\n                    return [4 /*yield*/, this.add(pageViewTrackingPlugin(getPageViewTrackingConfig(this.config))).promise];\n                    case 12:\n                        // Add page view plugin\n                        _c.sent();\n                        this.initializing = false;\n                        // Step 6: Run queued dispatch functions\n                        return [4 /*yield*/, this.runQueuedFunctions('dispatchQ')];\n                    case 13:\n                        // Step 6: Run queued dispatch functions\n                        _c.sent();\n                        // Step 7: Add the event receiver after running remaining queued functions.\n                        connector.eventBridge.setEventReceiver(function (event) {\n                            void _this.track(event.eventType, event.eventProperties);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeBrowser.prototype.getUserId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.userId;\n    };\n    AmplitudeBrowser.prototype.setUserId = function (userId) {\n        if (!this.config) {\n            this.q.push(this.setUserId.bind(this, userId));\n            return;\n        }\n        if (userId !== this.config.userId || userId === undefined) {\n            this.config.userId = userId;\n            setConnectorUserId(userId, this.config.instanceName);\n        }\n    };\n    AmplitudeBrowser.prototype.getDeviceId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.deviceId;\n    };\n    AmplitudeBrowser.prototype.setDeviceId = function (deviceId) {\n        if (!this.config) {\n            this.q.push(this.setDeviceId.bind(this, deviceId));\n            return;\n        }\n        this.config.deviceId = deviceId;\n        setConnectorDeviceId(deviceId, this.config.instanceName);\n    };\n    AmplitudeBrowser.prototype.reset = function () {\n        this.setDeviceId(UUID());\n        this.setUserId(undefined);\n    };\n    AmplitudeBrowser.prototype.getSessionId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.sessionId;\n    };\n    AmplitudeBrowser.prototype.setSessionId = function (sessionId) {\n        var _a;\n        if (!this.config) {\n            this.q.push(this.setSessionId.bind(this, sessionId));\n            return;\n        }\n        // Prevents starting a new session with the same session ID\n        if (sessionId === this.config.sessionId) {\n            return;\n        }\n        var previousSessionId = this.getSessionId();\n        var lastEventTime = this.config.lastEventTime;\n        var lastEventId = (_a = this.config.lastEventId) !== null && _a !== void 0 ? _a : -1;\n        this.config.sessionId = sessionId;\n        this.config.lastEventTime = undefined;\n        if (isSessionTrackingEnabled(this.config.defaultTracking)) {\n            if (previousSessionId && lastEventTime) {\n                this.track(DEFAULT_SESSION_END_EVENT, undefined, {\n                    device_id: this.previousSessionDeviceId,\n                    event_id: ++lastEventId,\n                    session_id: previousSessionId,\n                    time: lastEventTime + 1,\n                    user_id: this.previousSessionUserId,\n                });\n            }\n            this.config.lastEventTime = this.config.sessionId;\n            this.track(DEFAULT_SESSION_START_EVENT, undefined, {\n                event_id: ++lastEventId,\n                session_id: this.config.sessionId,\n                time: this.config.lastEventTime,\n            });\n        }\n        this.previousSessionDeviceId = this.config.deviceId;\n        this.previousSessionUserId = this.config.userId;\n    };\n    AmplitudeBrowser.prototype.extendSession = function () {\n        if (!this.config) {\n            this.q.push(this.extendSession.bind(this));\n            return;\n        }\n        this.config.lastEventTime = Date.now();\n    };\n    AmplitudeBrowser.prototype.setTransport = function (transport) {\n        if (!this.config) {\n            this.q.push(this.setTransport.bind(this, transport));\n            return;\n        }\n        this.config.transportProvider = createTransport(transport);\n    };\n    AmplitudeBrowser.prototype.identify = function (identify, eventOptions) {\n        if (isInstanceProxy(identify)) {\n            var queue = identify._q;\n            identify._q = [];\n            identify = convertProxyObjectToRealObject(new Identify(), queue);\n        }\n        if (eventOptions === null || eventOptions === void 0 ? void 0 : eventOptions.user_id) {\n            this.setUserId(eventOptions.user_id);\n        }\n        if (eventOptions === null || eventOptions === void 0 ? void 0 : eventOptions.device_id) {\n            this.setDeviceId(eventOptions.device_id);\n        }\n        return _super.prototype.identify.call(this, identify, eventOptions);\n    };\n    AmplitudeBrowser.prototype.groupIdentify = function (groupType, groupName, identify, eventOptions) {\n        if (isInstanceProxy(identify)) {\n            var queue = identify._q;\n            identify._q = [];\n            identify = convertProxyObjectToRealObject(new Identify(), queue);\n        }\n        return _super.prototype.groupIdentify.call(this, groupType, groupName, identify, eventOptions);\n    };\n    AmplitudeBrowser.prototype.revenue = function (revenue, eventOptions) {\n        if (isInstanceProxy(revenue)) {\n            var queue = revenue._q;\n            revenue._q = [];\n            revenue = convertProxyObjectToRealObject(new Revenue(), queue);\n        }\n        return _super.prototype.revenue.call(this, revenue, eventOptions);\n    };\n    AmplitudeBrowser.prototype.process = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var currentTime, isEventInNewSession;\n            return __generator(this, function (_a) {\n                currentTime = Date.now();\n                isEventInNewSession = isNewSession(this.config.sessionTimeout, this.config.lastEventTime);\n                if (event.event_type !== DEFAULT_SESSION_START_EVENT &&\n                    event.event_type !== DEFAULT_SESSION_END_EVENT &&\n                    (!event.session_id || event.session_id === this.getSessionId()) &&\n                    isEventInNewSession) {\n                    this.setSessionId(currentTime);\n                }\n                return [2 /*return*/, _super.prototype.process.call(this, event)];\n            });\n        });\n    };\n    return AmplitudeBrowser;\n}(AmplitudeCore));\nexport { AmplitudeBrowser };\n//# sourceMappingURL=browser-client.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { DEFAULT_FILE_DOWNLOAD_EVENT, FILE_EXTENSION, FILE_NAME, LINK_ID, LINK_TEXT, LINK_URL } from '../constants';\nexport var fileDownloadTracking = function () {\n    var observer;\n    var eventListeners = [];\n    var addEventListener = function (element, type, handler) {\n        element.addEventListener(type, handler);\n        eventListeners.push({\n            element: element,\n            type: type,\n            handler: handler,\n        });\n    };\n    var removeClickListeners = function () {\n        eventListeners.forEach(function (_a) {\n            var element = _a.element, type = _a.type, handler = _a.handler;\n            /* istanbul ignore next */\n            element === null || element === void 0 ? void 0 : element.removeEventListener(type, handler);\n        });\n        eventListeners = [];\n    };\n    var name = '@amplitude/plugin-file-download-tracking-browser';\n    var type = 'enrichment';\n    var setup = function (config, amplitude) { return __awaiter(void 0, void 0, void 0, function () {\n        var addFileDownloadListener, ext, links;\n        return __generator(this, function (_a) {\n            /* istanbul ignore if */\n            if (!amplitude) {\n                // TODO: Add required minimum version of @amplitude/analytics-browser\n                config.loggerProvider.warn('File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.');\n                return [2 /*return*/];\n            }\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') {\n                return [2 /*return*/];\n            }\n            addFileDownloadListener = function (a) {\n                var url;\n                try {\n                    // eslint-disable-next-line no-restricted-globals\n                    url = new URL(a.href, window.location.href);\n                }\n                catch (_a) {\n                    /* istanbul ignore next */\n                    return;\n                }\n                var result = ext.exec(url.href);\n                var fileExtension = result === null || result === void 0 ? void 0 : result[1];\n                if (fileExtension) {\n                    addEventListener(a, 'click', function () {\n                        var _a;\n                        if (fileExtension) {\n                            amplitude.track(DEFAULT_FILE_DOWNLOAD_EVENT, (_a = {},\n                                _a[FILE_EXTENSION] = fileExtension,\n                                _a[FILE_NAME] = url.pathname,\n                                _a[LINK_ID] = a.id,\n                                _a[LINK_TEXT] = a.text,\n                                _a[LINK_URL] = a.href,\n                                _a));\n                        }\n                    });\n                }\n            };\n            ext = /\\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/;\n            links = Array.from(document.getElementsByTagName('a'));\n            links.forEach(addFileDownloadListener);\n            // Adds listener to anchor tags added after initial load\n            /* istanbul ignore else */\n            if (typeof MutationObserver !== 'undefined') {\n                observer = new MutationObserver(function (mutations) {\n                    mutations.forEach(function (mutation) {\n                        mutation.addedNodes.forEach(function (node) {\n                            if (node.nodeName === 'A') {\n                                addFileDownloadListener(node);\n                            }\n                            if ('querySelectorAll' in node && typeof node.querySelectorAll === 'function') {\n                                Array.from(node.querySelectorAll('a')).map(addFileDownloadListener);\n                            }\n                        });\n                    });\n                });\n                observer.observe(document.body, {\n                    subtree: true,\n                    childList: true,\n                });\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var execute = function (event) { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        return [2 /*return*/, event];\n    }); }); };\n    var teardown = function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n            removeClickListeners();\n            return [2 /*return*/];\n        });\n    }); };\n    return {\n        name: name,\n        type: type,\n        setup: setup,\n        execute: execute,\n        teardown: teardown,\n    };\n};\n//# sourceMappingURL=file-download-tracking.js.map","/* eslint-disable @typescript-eslint/unbound-method */\nimport client from './browser-client-factory';\nexport { createInstance } from './browser-client-factory';\nexport var add = client.add, extendSession = client.extendSession, flush = client.flush, getDeviceId = client.getDeviceId, getSessionId = client.getSessionId, getUserId = client.getUserId, groupIdentify = client.groupIdentify, identify = client.identify, init = client.init, logEvent = client.logEvent, remove = client.remove, reset = client.reset, revenue = client.revenue, setDeviceId = client.setDeviceId, setGroup = client.setGroup, setOptOut = client.setOptOut, setSessionId = client.setSessionId, setTransport = client.setTransport, setUserId = client.setUserId, track = client.track;\nexport { runQueuedFunctions } from './utils/snippet-helper';\nexport { Revenue, Identify } from '@amplitude/analytics-core';\nimport * as Types_1 from '@amplitude/analytics-types';\nexport { Types_1 as Types };\n//# sourceMappingURL=index.js.map","import * as amplitude from \"@amplitude/analytics-browser\"\n\nexport function track(eventName, eventParams) {\n\tif (eventParams) {\n\t\tamplitude.track(eventName, eventParams)\n\t} else {\n\t\tamplitude.track(eventName)\n\t}\n}\n\nexport const ampliEvents = {\n\ttest: \"TEST\",\n\tethConnect: \"eth_connect\",\n\tethConnected: \"eth_connected\",\n\tethConnectError: \"eth_connect_error\",\n\tcryptoSelect: \"crypto_select\",\n\tcryptoSelectButton: \"crypto_select_button\",\n\tscrollPlace: \"scroll_place\",\n\tpurchase: \"purchase\",\n\tpurchaseSuccess: \"purchase_success\",\n\tpurchaseFailure: \"purchase_failure\",\n\tpurchaseTx: \"purchase_transaction\",\n\n\tconnectWalletButton: \"connect_wallet_button_click\",\n\tconnectWalletError: \"connect_wallet_error\",\n\tconnectWalletSuccess: \"connect_wallet_success\",\n\tpurchaseSubmit: \"mint_submit\",\n\tpurchaseError: \"purchase_error\",\n\tpurchaseInput: \"mint_input_active\",\n\tetherscanClick: \"etherscan_click\",\n}\n\nexport const ampli = {\n\tnavClick: \"NavigationClick\",\n\twalletHeader: \"HeaderConnectWalletClick\",\n\tecoClick: \"EcosystemClick\",\n\tvaluesClick: \"ValuesClick\",\n\ttokenClick: \"TokenomicClick\",\n\tutilClick: \"UtilitiesClick\",\n\n\twalletMint: \"MintConnectWalletClick\",\n\tmintNFT: \"MintMintToonClick\",\n\tfooterClick: \"FooterClick\",\n\n\twalletSuccess: \"Successful Wallet Connect\",\n\twalletSuccessBalance: \"Successful Wallet Connect Balance\",\n\n\twalletError: \"Error Wallet Connect\",\n\tmintError: \"Mint NFT error\",\n\tmintSuccess: \"Mint NFT success\",\n\tchain: \"Chain Switch\",\n\tdiscordCom: \"Discord Community Click\",\n\tdiscordComLink: \"Discord Community Click (text link)\",\n\n\tpageLoad: \"Page Load\",\n\tpageScroll: \"Page Scrolled\",\n\n\tconnectModal: \"Mobile Connect Modal\",\n\tjoin: \"Join Us Click\",\n\tdisconnect: \"Wallet Disconnected\",\n\tdiscordHolder: \"MintDiscordClick\",\n}\n","import { useWeb3Modal } from \"@web3modal/wagmi/react\"\nimport Button from \"../ui/Button/Button\"\nimport React from \"react\"\n\nconst UnsupportedBlock = () => {\n\tconst { open } = useWeb3Modal()\n\n\treturn (\n\t\t<>\n\t\t\t<h6>\n\t\t\t\tOur NFTs are <b>not yet available on this blockchain</b>. Please switch your wallet to one of the <b>supported chains</b>.\n\t\t\t</h6>\n\t\t\t<Button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tdismissAll()\n\t\t\t\t\topen({ view: \"Networks\" })\n\t\t\t\t}}\n\t\t\t\tmint\n\t\t\t>\n\t\t\t\t<div className=\"sh\"></div>\n\t\t\t\tSwitch Chain\n\t\t\t</Button>\n\t\t</>\n\t)\n}\n\nexport default React.memo(UnsupportedBlock)\n","import React from \"react\"\nimport { ampli, track } from \"~/helpers/amplitude\"\n\nimport { supportedChains } from \"~/config\"\nimport Button from \"../ui/Button/Button\"\nimport UnsupportedBlock from \"./UnsupportedBlock\"\n\nconst MintButton = (props) => {\n\tconst { isLoading, onCloseModal, write, chain } = props\n\treturn (\n\t\t<>\n\t\t\t{!supportedChains.includes(chain.id) /* && !isMetaMask  */ ? (\n\t\t\t\t<UnsupportedBlock chain={chain} />\n\t\t\t) : (\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrack(ampli.mintNFT)\n\n\t\t\t\t\t\tonCloseModal()\n\t\t\t\t\t\twrite?.()\n\t\t\t\t\t}}\n\t\t\t\t\tmint\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sh\"></div>\n\t\t\t\t\t{isLoading ? \"Minting...\" : \"Mint ToON Pass\"}\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default React.memo(MintButton)\n","/* eslint-disable react/no-unescaped-entities */\nimport React, { Suspense, useCallback, useEffect, useState } from \"react\"\n\nimport { useAccount, useConnect, useNetwork, useBalance, usePrepareContractWrite, useContractWrite, useWaitForTransaction } from \"wagmi\"\nimport cls from \"./MintNFT.module.scss\"\nimport \"./toast.scss\"\n\nimport \"react-toastify/dist/ReactToastify.css\"\n\nimport ConnectButton from \"./ConnectButton\"\nimport MintSuccess from \"./MintSuccess/MintSuccess\"\nimport { useToast } from \"../helpers/hooks/useToast\"\nimport { ampli, track } from \"~/helpers/amplitude\"\n\nimport mainconfig, { supportedChains } from \"../config\"\n\nimport MintButton from \"./MintButton\"\nimport { InjectedConnector } from \"wagmi/connectors/injected\"\n\nconst NFTcontracts = {\n\tSepolia: \"0x42Fbf87Cd983c0F0BCdfF2d8A5904CD4968cD76F\",\n\tEthereum: \"0x49cC7de889C1e4bDc1b4156B882cA5c76C668987\",\n\t\"Arbitrum One\": \"0x6f2C97dB74D4d3E8A31e628325A39bbef928dd59\",\n\tPolygon: \"0xA42ccA468fd07491824Ab121CB559f1B3791e92C\",\n\t\"BNB Smart Chain\": \"0xFA17c9e4f5Ec1A62d032731fE0a9529D7B851BE6\",\n}\n\nconst MintNFT = () => {\n\tconst isMetaMask = mainconfig.isMetaMask\n\tconst isMobile = mainconfig.isMobile\n\n\tconst [isSuccessModal, setIsSuccessModal] = useState(false)\n\tconst { dismissAll, mintError, chainSwitch, connectSuccess } = useToast()\n\tconst trackWalletMint = useCallback(() => {\n\t\ttrack(ampli.walletMint)\n\t}, [])\n\tconst { chain } = useNetwork()\n\tconst { isConnected, address } = useAccount({\n\t\tonConnect({ address, connector, isReconnected }) {\n\t\t\ttrack(ampli.walletSuccess, { account: address, connector: connector.name, isReconnected: isReconnected, chain: chain.name })\n\t\t\trefetch()\n\t\t\tconnectSuccess()\n\t\t},\n\n\t\tonDisconnect() {\n\t\t\tdismissAll()\n\t\t},\n\t})\n\tuseEffect(() => {\n\t\tif (!isConnected) {\n\t\t\tdismissAll()\n\t\t}\n\t\treturn\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isConnected])\n\n\tuseBalance({\n\t\taddress: address,\n\t\tonSuccess(data) {\n\t\t\ttrack(ampli.walletSuccessBalance, { balance: `${data.formatted} ${data.symbol}`, currency: data.symbol })\n\t\t},\n\t})\n\n\tconst { connect } = useConnect({\n\t\tconnector: new InjectedConnector(),\n\t\tonError(error) {\n\t\t\tconsole.log(\"Error\", error)\n\t\t\ttrack(ampli.walletError, { error: error.message })\n\t\t},\n\t})\n\n\tconst handleConnect = useCallback(() => {\n\t\tif (isMobile && isMetaMask) {\n\t\t\tconnect()\n\t\t}\n\t}, [connect, isMetaMask, isMobile])\n\n\tuseEffect(() => {\n\t\tif (isConnected) {\n\t\t\treturn\n\t\t} else handleConnect()\n\t\treturn\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\tconst { refetch, config } = usePrepareContractWrite({\n\t\taddress: isConnected ? NFTcontracts[chain.name] : \"0x0\",\n\t\tabi: [\n\t\t\t{\n\t\t\t\tname: \"mint\",\n\t\t\t\ttype: \"function\",\n\t\t\t\tstateMutability: \"payable\",\n\t\t\t\tinputs: [{ internalType: \"uint256\", name: \"_mintAmount\", type: \"uint256\" }],\n\t\t\t\toutputs: [],\n\t\t\t},\n\t\t],\n\t\targs: [\"1\"],\n\t\tfunctionName: \"mint\",\n\t})\n\n\tconst { error, isError, write, data } = useContractWrite(config)\n\n\tconst {\n\t\tisLoading,\n\t\terror: transError,\n\t\tisError: isTransError,\n\t} = useWaitForTransaction({\n\t\thash: data?.hash,\n\t\tonSuccess(data) {\n\t\t\ttrack(ampli.mintSuccess, { transHash: data.transactionHash, NFTcontract: data.to })\n\t\t\tonOpenModal()\n\t\t},\n\t\tonError(error) {\n\t\t\ttrack(ampli.mintError, { error: error.message })\n\t\t},\n\t})\n\tuseEffect(() => {\n\t\tif (isConnected && chain) {\n\t\t\tif (supportedChains.includes(chain.id)) {\n\t\t\t\ttrack(ampli.chain, { chain: chain })\n\t\t\t\tchainSwitch(chain)\n\t\t\t\trefetch()\n\t\t\t} else {\n\t\t\t\tconsole.log(\"unsupported chain\")\n\t\t\t}\n\t\t}\n\t\treturn\n\t}, [chain, chainSwitch, isConnected, refetch])\n\n\tuseEffect(() => {\n\t\tif (isError || isTransError) {\n\t\t\tif (\n\t\t\t\t(error || transError)?.message.includes(\"cancelled\") ||\n\t\t\t\t(error || transError)?.message.includes(\"canceled\") ||\n\t\t\t\t(error || transError)?.message.includes(\"rejected\") ||\n\t\t\t\terror?.code === 4001\n\t\t\t) {\n\t\t\t\tmintError(PURCHASE_ERRORS[4001])\n\t\t\t\ttrack(ampli.mintError, { error: (error || transError)?.message, type: \"cancelled\" })\n\t\t\t} else if ((error || transError)?.message.includes(\"funds\") || error?.code === -3200) {\n\t\t\t\tmintError(PURCHASE_ERRORS[3200])\n\t\t\t\ttrack(ampli.mintError, { error: (error || transError)?.message, type: \"insufficient funds\" })\n\t\t\t} else if ((error || transError)?.message) {\n\t\t\t\tmintError(PURCHASE_ERRORS.general)\n\t\t\t\ttrack(ampli.mintError, { error: (error || transError)?.message, type: \"other\" })\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [error, isError, isTransError, transError])\n\n\tconst onCloseModal = useCallback(() => {\n\t\tsetIsSuccessModal(false)\n\t}, [])\n\n\tconst onOpenModal = useCallback(() => {\n\t\tdismissAll()\n\t\tsetIsSuccessModal(true)\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\treturn (\n\t\t<div className={cls.MintNFT}>\n\t\t\t<div className={`${cls.buttonsBlock} ${isLoading ? \"disabled\" : \"\"}`}>\n\t\t\t\t<div className={isConnected ? cls.connected : cls.disconnected} id=\"mintID\">\n\t\t\t\t\t<ConnectButton chain={chain} connect header={false} action={trackWalletMint} />\n\t\t\t\t</div>\n\t\t\t\t{isConnected && (\n\t\t\t\t\t<Suspense fallback={<span className=\"loader\"></span>}>\n\t\t\t\t\t\t<MintButton isLoading={isLoading} onCloseModal={onCloseModal} write={write} chain={chain} />\n\t\t\t\t\t</Suspense>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{isConnected && <>{isSuccessModal && <MintSuccess isOpen={isSuccessModal} onClose={onCloseModal} />}</>}\n\t\t</div>\n\t)\n}\n\nexport default React.memo(MintNFT)\n","import React, { useCallback } from \"react\"\nimport { toast } from \"react-toastify\"\nimport Success from \"@/VALUES/vote.webp\"\nimport Error from \"@/UI/icons/error.svg\"\n\nimport { WALLET_SUCCESS } from \"../texts\"\n\nfunction getImage(chain) {\n\tswitch (chain.id) {\n\t\tcase 1:\n\t\t\treturn \"./assets/UI/icons/1.webp\"\n\t\tcase 56:\n\t\t\treturn \"./assets/UI/icons/56.webp\"\n\t\tcase 137:\n\t\t\treturn \"./assets/UI/icons/137.webp\"\n\t\tcase 42161:\n\t\t\treturn \"./assets/UI/icons/42161.webp\"\n\t\tdefault:\n\t\t\treturn \"./assets/UI/icons/default.webp\"\n\t}\n}\n\nexport function useToast() {\n\tconst connectSuccess = useCallback(() => {\n\t\ttoast.success(WALLET_SUCCESS, {\n\t\t\ticon: () => <img src={Success} className=\"toastIcon\" />,\n\t\t})\n\t}, [])\n\n\tconst mintError = useCallback((error) => {\n\t\ttoast.error(error, {\n\t\t\ticon: () => <img src={Error} className=\"toastIcon\" />,\n\t\t\ttoastId: \"error\",\n\t\t})\n\t}, [])\n\n\tconst chainSwitch = useCallback((chain) => {\n\t\tconst imageSrc = getImage(chain)\n\t\ttoast.success(\n\t\t\t() => (\n\t\t\t\t<>\n\t\t\t\t\tYou are successfully connected to <b>{chain.name}</b>\n\t\t\t\t</>\n\t\t\t),\n\t\t\t{\n\t\t\t\ticon: () => <img src={imageSrc} className=\"toastIcon\" />,\n\t\t\t\ttoastId: chain.name,\n\t\t\t}\n\t\t)\n\t}, [])\n\n\tconst dismissAll = () => toast.dismiss()\n\n\treturn {\n\t\tconnectSuccess,\n\t\tmintError,\n\t\tchainSwitch,\n\t\tdismissAll,\n\t}\n}\n","export const CONNECT_ERROR = \"Oops! Something went wrong. Please try again.\"\n\nexport const PURCHASE_ERRORS = {\n\t32000: \"Insufficient funds for this transaction. Kindly add more to your account and try again.\",\n\t4001: \"Transaction signature declined by user.\",\n\tgeneral: \"Apologies, something didn't go as planned. Please retry.\",\n}\n\nexport const WALLET_SUCCESS = \"Your wallet successfully connected!\"\n\nexport const Links = {\n\tgitbook: {\n\t\tmain: \"https://toon-org.gitbook.io/toon-gitbook-draft/\",\n\t\temission: \"https://toon-org.gitbook.io/toon-gitbook-draft/tokenomics#token-emission-and-total-supply\",\n\t\tdistribution: \"https://toon-org.gitbook.io/toon-gitbook-draft/tokenomics#token-distribution\",\n\t\tgrowth: \"https://toon-org.gitbook.io/toon-gitbook-draft/tokenomics#continuous-fuel-for-project-growth\",\n\t\tgovernance: \"https://toon-org.gitbook.io/toon-gitbook-draft/governance\",\n\t\tmethods: \"https://toon-org.gitbook.io/toon-gitbook-draft/toon-team-and-viral-methods#unleashing-web3-vitality-through-user-friendly-steps\",\n\t\tcharity: \"https://toon-org.gitbook.io/toon-gitbook-draft/charity\",\n\t},\n\tapple: \"https://apps.apple.com/app/id1635754347\",\n\tgoogle: \"https://play.google.com/store/apps/details?id=com.toonlabs.tooncoin\",\n\tbitcoin: \"https://t.me/BitcoinArtBot\",\n\ttwitter: \"https://twitter.com/tooncoin\",\n\tdiscord: \"https://discord.gg/toonorg\",\n\tprivacy: \"https://earlyaccess.toon.org/privacy\",\n\tmetamask: \"https://metamask.app.link/dapp/earlyaccess.toon.org/\",\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"MintNFT\":\"MintNFT_VBpiD\",\"buttonsBlock\":\"buttonsBlock_leyc3\",\"disconnected\":\"disconnected_jKOEC\",\"connected\":\"connected_P2wML\"};"],"names":["classNames","cls","mods","additional","concat","_toConsumableArray","filter","Boolean","Object","entries","_ref","_ref2","_slicedToArray","value","map","_ref3","join","Button","props","_mods","link","href","size","app","headerBtn","primary","className","yellow","icon","blue","pink","connect","children","glass","onClick","mint","discord","modal","type","otherProps","_objectWithoutProperties","_excluded","_defineProperty","React","_extends","target","rel","Link","arrow","src","Arrow","alt","width","height","Portal","_props$element","element","document","body","createPortal","Modal","isOpen","onClose","_useState2","useState","isClosing","setIsClosing","timerRef","useRef","closeHandler","useCallback","current","setTimeout","onKeyDown","e","key","useEffect","window","addEventListener","clearTimeout","removeEventListener","Cross","stopPropagation","WCConnector","open","useWeb3Modal","WC","MMConnector","MM","ConnectModal","cardsBlock","Account","header","balance","Chain","LogLevel","ConnectButton","action","chain","isConnected","useAccount","isMetaMask","mainconfig","isMobile","connectModal","setConnectModal","onCloseModal","supportedChains","includes","id","Blue","Purple","Desk","Card","Small","Links","DiscordIcon","__assign","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__values","o","m","__read","r","ar","error","__spreadArray","to","from","pack","l","Array","slice","create","SuppressedError","getClientLogConfig","client","_a","config","logger","loggerProvider","logLevel","getValueByStringPath","obj","path","e_1","replace","_b","split","_c","attr","e_1_1","return","getClientStates","paths","e_2","res","paths_1","paths_1_1","e_2_1","debugWrapper","fn","fnName","getLogConfig","getStates","fnContext","args","_i","Debug","ignoreDepth","debugContext","name","stacktrace","Error","stack","text","trim","time","start","Date","toISOString","states","before","promise","after","end","debug","JSON","stringify","d","b","setPrototypeOf","__proto__","String","__","constructor","Status","returnWrapper","awaitable","AMPLITUDE_PREFIX","STORAGE_PREFIX","AMPLITUDE_SERVER_URL","buildResult","event","code","message","Unknown","PREFIX","Logger","None","disable","enable","Warn","log","Verbose","console","warn","getDefaultConfig","flushMaxRetries","flushQueueSize","flushIntervalMillis","instanceName","optOut","serverUrl","serverZone","useBatch","Config","options","_d","_optOut","defaultConfig","apiKey","minIdLength","plan","ingestionMetadata","storageProvider","transportProvider","serverConfig","createServerConfig","defineProperty","get","set","enumerable","configurable","getServerUrl","undefined","_serverZone","getResponseBodyString","responseBodyString","IdentifyOperation","RevenueProperty","SpecialEventType","Destination","retryTimeout","throttleTimeout","storageKey","scheduled","queue","setup","unsent","_this","substring","saveEvents","all","execute","catch","context","attempts","callback","timeout","addToQueue","list","fulfillRequest","forEach","schedule","flush","useRetry","later","batches","arr","chunkSize","Math","max","reduce","chunks","index","chunkIndex","floor","batch","send","payload","errorMessage","api_key","events","extra","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","min_id_length","client_upload_time","handleResponse","statusCode","status","Success","handleSuccessResponse","Invalid","handleInvalidResponse","PayloadTooLarge","handlePayloadTooLargeResponse","RateLimit","handleRateLimitResponse","handleOtherResponse","missingField","startsWith","dropIndex","values","eventsWithInvalidFields","eventsWithMissingFields","eventsWithInvalidIdLengths","silencedEvents","flat","dropIndexSet","Set","retry","has","dropUserIds","keys","exceededDailyQuotaUsers","dropDeviceIds","exceededDailyQuotaDevices","throttledIndex","throttledEvents","dropUserIdsSet","dropDeviceIdsSet","throttledIndexSet","user_id","device_id","UUID","a","random","toString","isValidObject","properties","isValidProperties","property","isArray","isValid","value_1","value_1_1","valueElement","Identify","_propertySet","_properties","getUserProperties","_safeSet","SET","setOnce","SET_ONCE","append","APPEND","prepend","PREPEND","postInsert","POSTINSERT","preInsert","PREINSERT","remove","REMOVE","add","ADD","unset","UNSET","clearAll","CLEAR_ALL","operation","_validate","userPropertyMap","Revenue","productId","quantity","price","setProductId","setQuantity","setPrice","setRevenueType","revenueType","setRevenue","revenue","setEventProperties","getEventProperties","eventProperties","REVENUE_PRODUCT_ID","REVENUE_QUANTITY","REVENUE_PRICE","REVENUE_TYPE","REVENUE","Timeline","applying","plugins","register","plugin","deregister","pluginName","findIndex","splice","teardown","reset","scheduleApply","shift","item","before_1","before_1_1","enrichment","enrichment_1","enrichment_1_1","destination","executeDestinations","_e","eventClone","resolveResult","createIdentifyEvent","identify","eventOptions","event_type","IDENTIFY","user_properties","AmplitudeCore","initializing","q","dispatchQ","logEvent","track","bind","timeline","_init","runQueuedFunctions","queueName","queuedFunctions","queuedFunctions_1","queuedFunctions_1_1","queuedFunction","eventInput","event_properties","createTrackEvent","dispatch","groupIdentify","groupType","groupName","GROUP_IDENTIFY","group_properties","groups","createGroupIdentifyEvent","setGroup","createGroupEvent","createRevenueEvent","dispatchWithCallback","process","setOptOut","ApplicationContextProviderImpl","getApplicationContext","versionName","language","getLanguage","platform","os","deviceModel","navigator","languages","EventBridgeImpl","receiver","setEventReceiver","isEqual","obj1","obj2","typeA","primitive_1","isArrayA","isArrayB","sorted1","sort","sorted2","result_1","ownProps","resArray","IdentityStoreImpl","identity","userProperties","listeners","editIdentity","self","actingUserProperties","actingIdentity","setUserId","userId","setDeviceId","deviceId","setUserProperties","updateUserProperties","actions","actingProperties","_f","_g","commit","setIdentity","getIdentity","originalIdentity","listener","addIdentityListener","removeIdentityListener","delete","safeGlobal","globalThis","AnalyticsConnector","identityStore","eventBridge","applicationContextProvider","getInstance","getAnalyticsConnector","IdentityEventSender","isTrackingEnabled","defaultTracking","isAttributionTrackingEnabled","getPageViewTrackingConfig","eventType","trackOn","trackHistoryChanges","pageViews","isNewSession","sessionTimeout","lastEventTime","now","convertProxyObjectToRealObject","instance","name_1","isInstanceProxy","_q","userLanguage","Context","library","userAgent","lastEventId","nextEventId","getTime","event_id","session_id","sessionId","appVersion","app_version","trackingOptions","ipAddress","ip","insert_id","partner_id","partnerId","ingestion_metadata","source_name","sourceName","source_version","sourceVersion","user_agent","MemoryStorage","memoryStorage","Map","isEnabled","getRaw","clear","getCookieName","postKey","limit","getGlobalScope","getQueryParams","globalScope","location","search","acc","curr","query","tryDecodeURIComponent","decodeURIComponent","CookieStorage","testStrorage","testKey","testValue","atob","parse","cookie","match","find","c","expirationDays","expires","expireDate","date","str","setTime","btoa","encodeURIComponent","toUTCString","domain","secure","sameSite","BaseTransport","_serverUrl","_payload","buildResponse","responseJSON","_h","_j","_k","_l","_m","_o","_p","_r","_s","_t","_u","_v","_w","_x","buildStatus","eventsIngested","events_ingested","payloadSizeBytes","payload_size_bytes","serverUploadTime","server_upload_time","missing_field","events_with_invalid_fields","events_with_missing_fields","events_with_invalid_id_lengths","epsThreshold","eps_threshold","exceeded_daily_quota_devices","silencedDevices","silenced_devices","silenced_events","throttledDevices","throttled_devices","throttled_events","throttledUsers","throttled_users","exceeded_daily_quota_users","Timeout","Failed","FetchTransport","_super","responsePayload","fetch","headers","Accept","method","json","BrowserStorage","storage","testStorage","getItem","setItem","removeItem","MAX_ARRAY_LENGTH","LocalStorage","localStorage","droppedEventsCount","SessionStorage","sessionStorage","XHRTransport","state","XMLHttpRequest","xhr","onreadystatechange","readyState","responseText","parsedResponsePayload","setRequestHeader","SendBeaconTransport","sendBeacon","data","parseLegacyCookies","cookieStorage","deleteLegacyCookies","cookieName","cookies","toLowerCase","getOldCookieName","decode","parseTime","num","integer","parseInt","isNaN","escape","DEFAULT_EVENT_PREFIX","DEFAULT_FORM_START_EVENT","DEFAULT_FORM_SUBMIT_EVENT","DEFAULT_FILE_DOWNLOAD_EVENT","DEFAULT_SESSION_START_EVENT","DEFAULT_SESSION_END_EVENT","FILE_EXTENSION","FILE_NAME","LINK_ID","LINK_TEXT","LINK_URL","FORM_ID","FORM_NAME","FORM_DESTINATION","DEFAULT_IDENTITY_STORAGE","BrowserConfig","cookieOptions","identityStorage","transport","expiration","upgrade","createTransport","_cookieStorage","updateStorage","_deviceId","_userId","_sessionId","_lastEventTime","_lastEventId","cache","useBrowserConfig","amplitudeInstance","legacyCookies","previousCookies","queryParams","_y","_z","_0","_1","_2","getTopLevelDomain","createCookieStorage","previousSessionDeviceId","previousSessionUserId","url","host","parts","levels","hostname","DCLID","FBCLID","GBRAID","GCLID","KO_CLICK_ID","LI_FAT_ID","MSCLKID","RDT_CID","TTCLID","TWCLID","WBRAID","BASE_CAMPAIGN","utm_campaign","utm_content","utm_id","utm_medium","utm_source","utm_term","referrer","referring_domain","dclid","gbraid","gclid","fbclid","ko_click_id","li_fat_id","msclkid","rtd_cid","ttclid","twclid","wbraid","CampaignParser","getUtmParam","getReferrer","getClickIds","params","domainWithoutSubdomain","isExcludedReferrer","excludeReferrers","referringDomain","some","RegExp","test","webAttributionPlugin","amplitude","pluginConfig","currentCampaign","previousCampaign","isEventInNewSession","campaignEvent","initialEmptyValue","resetSessionOnNewCampaign","cookieDomain","previous","prevReferringDomain","every","isDirectTraffic","hasNewCampaign","hasNewDomain","isNewCampaign","setSessionId","campaign","campaignParameters","identifyEvent","createCampaignEvent","omitUndefined","input","val","pageViewTrackingPlugin","pushState","createPageViewEvent","getCampaignParams","pathname","title","shouldTrackOnPageLoad","previousURL","trackHistoryPageView","newURL","shouldTrackPageView","shouldTrackHistoryPageView","trackHistoryPageViewWrapper","history","Proxy","unused","pageViewEvent","isCampaignEvent","$set","$unset","userProperties_1","trackingOption","oldURL","formInteractionTracking","observer","eventListeners","handler","addFormInteractionListener","form","hasFormChanged","stringOrUndefined","getElementsByTagName","MutationObserver","mutations","mutation","addedNodes","node","nodeName","querySelectorAll","observe","subtree","childList","disconnect","notified","AmplitudeBrowser","init","userIdOrOptions","maybeOptions","browserOptions","connector","attributionTrackingOptions","webAttribution","addFileDownloadListener","ext","URL","exec","fileExtension","isFormInteractionTrackingEnabled","attribution","getAttributionTrackingConfig","getUserId","setConnectorUserId","getDeviceId","setConnectorDeviceId","getSessionId","previousSessionId","extendSession","setTransport","currentTime","eventName","eventParams","ampli","UnsupportedBlock","dismissAll","view","MintButton","isLoading","write","disabled","NFTcontracts","Sepolia","Ethereum","Polygon","MintNFT","isSuccessModal","setIsSuccessModal","_useToast","connectSuccess","toast","success","mintError","toastId","chainSwitch","imageSrc","getImage","dismiss","trackWalletMint","useNetwork","_useAccount","onConnect","address","isReconnected","account","refetch","onDisconnect","useBalance","onSuccess","formatted","symbol","currency","_useConnect","useConnect","InjectedConnector","onError","handleConnect","_usePrepareContractWr","usePrepareContractWrite","abi","stateMutability","inputs","internalType","outputs","functionName","_useContractWrite","useContractWrite","isError","_useWaitForTransactio","useWaitForTransaction","hash","transHash","transactionHash","NFTcontract","onOpenModal","transError","isTransError","_ref4","_ref6","_ref8","_ref5","PURCHASE_ERRORS","_ref7","_ref9","general","Suspense","fallback","MintSuccess"],"sourceRoot":""}