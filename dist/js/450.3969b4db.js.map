{"version":3,"file":"js/450.3969b4db.js","mappings":"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","sources":["webpack://tooncoinweb/./src/tools/classNames.js","webpack://tooncoinweb/./src/ui/Button/Button.jsx","webpack://tooncoinweb/./src/ui/Link/Link.module.scss?fe5c","webpack://tooncoinweb/./public/assets/UI/icons/arrow_right.svg","webpack://tooncoinweb/./src/ui/Link/Link.jsx","webpack://tooncoinweb/./src/MintNFT/ConnectModal/ConnectModal.module.scss?faeb","webpack://tooncoinweb/./public/assets/mm.svg","webpack://tooncoinweb/./public/assets/wc.svg","webpack://tooncoinweb/./src/ui/Portal/Portal.jsx","webpack://tooncoinweb/./src/ui/Modal/Modal.jsx","webpack://tooncoinweb/./src/ui/Modal/Modal.module.scss?d9c3","webpack://tooncoinweb/./src/MintNFT/ConnectModal/ConnectModal.jsx","webpack://tooncoinweb/./src/MintNFT/ConnectButton.jsx","webpack://tooncoinweb/./public/assets/NFT/CARDS.webp","webpack://tooncoinweb/./public/assets/NFT/diamond-blue-success.webp","webpack://tooncoinweb/./public/assets/NFT/diamond-blue-small.webp","webpack://tooncoinweb/./public/assets/NFT/diamond-purple-success.webp","webpack://tooncoinweb/./public/assets/UI/icons/discord.svg","webpack://tooncoinweb/./public/assets/TOKENOMIC/diamond.webp","webpack://tooncoinweb/./src/MintNFT/MintSuccess/MintSuccess.jsx","webpack://tooncoinweb/./src/MintNFT/MintSuccess/MintSuccess.module.scss?cbe6","webpack://tooncoinweb/./public/assets/VALUES/vote.webp","webpack://tooncoinweb/./public/assets/UI/icons/error.svg","webpack://tooncoinweb/./src/helpers/texts.jsx","webpack://tooncoinweb/./node_modules/tslib/tslib.es6.mjs","webpack://tooncoinweb/./node_modules/@amplitude/analytics-types/lib/esm/logger.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/debug.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-types/lib/esm/status.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/return-wrapper.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/messages.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/constants.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/result-builder.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/logger.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/config.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/plugins/destination.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-types/lib/esm/event.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/chunk.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/uuid.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/valid-properties.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/identify.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/revenue.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/timeline.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/utils/event-builder.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/core-client.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-connector/dist/analytics-connector.esm.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/analytics-connector.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/plugins/identity.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/default-tracking.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/session.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/utils/snippet-helper.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/language.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/plugins/context.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/version.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/storage/memory.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/cookie-name.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/global-scope.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/query-params.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/storage/cookie.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-core/lib/esm/transports/base.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/transports/fetch.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/storage/browser-storage.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/storage/local-storage.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/storage/session-storage.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/transports/xhr.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/transports/send-beacon.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/cookie-migration/index.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/constants.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/config.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/attribution/constants.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-client-common/lib/esm/attribution/campaign-parser.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-web-attribution-browser/lib/esm/helpers.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-web-attribution-browser/lib/esm/web-attribution.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/utils.js","webpack://tooncoinweb/./node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/page-view-tracking.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/plugins/form-interaction-tracking.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/det-notification.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/browser-client-factory.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/index.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/browser-client.js","webpack://tooncoinweb/./node_modules/@amplitude/analytics-browser/lib/esm/plugins/file-download-tracking.js","webpack://tooncoinweb/./src/helpers/amplitude.js","webpack://tooncoinweb/./src/MintNFT/UnsupportedBlock.jsx","webpack://tooncoinweb/./src/MintNFT/MintButton.jsx","webpack://tooncoinweb/./src/MintNFT/MintNFT.jsx","webpack://tooncoinweb/./src/helpers/hooks/useToast.jsx","webpack://tooncoinweb/./src/MintNFT/MintNFT.module.scss?ed67"],"sourcesContent":["// similar to popular library jedwatson/classnames\n\n// record - special type of typescript where KEY is string and VALUE is string OR Boolean\nexport function classNames(cls, mods, additional) {\n\treturn [\n\t\tcls,\n\t\t...additional.filter(Boolean),\n\t\t...Object.entries(mods)\n\t\t\t.filter(([_, value]) => Boolean(value)) // the first value in each array (represented by the underscore) is ignored and the filter only uses the second value (value).\n\t\t\t.map(([cls]) => cls),\n\t].join(\" \")\n}\n","import { classNames } from \"~/tools/classNames.js\"\nimport React from \"react\"\n\nexport default function Button(props) {\n\tconst { link, href, size, app, headerBtn, primary, className, yellow, icon, blue, pink, connect, children, glass, onClick, mint, discord, modal, type, ...otherProps } = props\n\tconst mods = {\n\t\tapp: app,\n\t\tprimary: primary,\n\t\tglass: glass,\n\t\theaderBtn: headerBtn,\n\t\t[size]: size,\n\t\tblue: blue,\n\t\tpink: pink,\n\t\ticon: icon,\n\t\tconnect: connect,\n\t\tmint: mint,\n\t\tdiscord: discord,\n\t\tmodal: modal,\n\t\tyellow: yellow,\n\t}\n\treturn (\n\t\t<>\n\t\t\t{link ? (\n\t\t\t\t<div className={`flex ${className ? className : \"\"}`}>\n\t\t\t\t\t<a href={href} target=\"_blank\" rel=\"noreferrer\" className={classNames(\"button\", mods, [className])} onClick={onClick} {...otherProps}>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<button className={classNames(\"button\", mods, [className])} onClick={onClick} {...otherProps} type={type ? type : \"button\"}>\n\t\t\t\t\t{children}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"link\":\"link_nbrUS\",\"arrow\":\"arrow_jZQrA\",\"wrapper\":\"wrapper_Wz1jT\"};","export default __webpack_public_path__ + \"09e3a154aa0b7592c6e244ce4197576f.svg\";","import { classNames } from \"~/tools/classNames\"\nimport React from \"react\"\n\nimport cls from \"./Link.module.scss\"\nimport Arrow from \"@/UI/icons/arrow_right.svg\"\n//<div className={`flex ${className} ${cls.wrapper}`}></div>\n\nexport default function Link(props) {\n\tconst { href, className, children, arrow, target, onClick, ...otherProps } = props\n\tconst mods = {\n\t\t[cls.arrow]: arrow,\n\t}\n\treturn (\n\t\t<>\n\t\t\t{href ? (\n\t\t\t\t<a href={href} target={target ? target : \"_blank\"} rel=\"noreferrer\" className={classNames(cls.link, mods, [className])} onClick={onClick} {...otherProps}>\n\t\t\t\t\t{children}\n\t\t\t\t\t{arrow && <img src={Arrow} className={cls.arrow} alt=\"arrow link\" width=\"24\" height=\"24\" />}\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\t<div className={classNames(cls.link, mods, [className])} onClick={onClick} {...otherProps}>\n\t\t\t\t\t{children}\n\t\t\t\t\t{arrow && <img src={Arrow} className={cls.arrow} alt=\"arrow link\" width=\"24\" height=\"24\" />}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"ConnectModal\":\"ConnectModal_QAeia\",\"cardsBlock\":\"cardsBlock_E2mf0\"};","export default __webpack_public_path__ + \"b4e71f6375ce977be59ea6375a1b58a1.svg\";","export default __webpack_public_path__ + \"11807d8a0741d067a70df57ef02c0dd6.svg\";","import { createPortal } from \"react-dom\"\n\nexport const Portal = (props) => {\n\tconst { children, element = document.body } = props\n\treturn createPortal(children, element)\n}\n","import React, { useCallback, useEffect, useRef, useState } from \"react\"\nimport { classNames } from \"~/tools/classNames.js\"\nimport Cross from \"@/UI/icons/cross.svg\"\nimport { Portal } from \"../Portal/Portal\"\nimport cls from \"./Modal.module.scss\"\n\nconst ANIMATION_DELAY = 500\n\nexport const Modal = (props) => {\n\tconst { className, children, isOpen, onClose } = props\n\tconst [isClosing, setIsClosing] = useState(false)\n\tconst timerRef = useRef()\n\tconst closeHandler = useCallback(() => {\n\t\tif (onClose) {\n\t\t\tsetIsClosing(true)\n\t\t\ttimerRef.current = setTimeout(() => {\n\t\t\t\tonClose()\n\t\t\t\tsetIsClosing(false)\n\t\t\t}, ANIMATION_DELAY)\n\t\t}\n\t}, [onClose])\n\tconst onKeyDown = useCallback(\n\t\t(e) => {\n\t\t\tif (e.key === \"Escape\") {\n\t\t\t\tcloseHandler()\n\t\t\t}\n\t\t},\n\t\t[closeHandler]\n\t)\n\n\tuseEffect(() => {\n\t\tif (isOpen) {\n\t\t\twindow.addEventListener(\"keydown\", onKeyDown)\n\t\t}\n\n\t\treturn () => {\n\t\t\tclearTimeout(timerRef.current)\n\t\t\twindow.removeEventListener(\"keydown\", onKeyDown)\n\t\t}\n\t}, [isOpen, onKeyDown])\n\n\tconst onContentClick = (e) => {\n\t\te.stopPropagation()\n\t}\n\n\tconst mods = {\n\t\t[cls.opened]: isOpen,\n\t\t[cls.isClosing]: isClosing,\n\t}\n\n\treturn (\n\t\t<Portal>\n\t\t\t<div className={classNames(cls.Modal, mods, [className])}>\n\t\t\t\t<div className={cls.overlay} onClick={closeHandler}>\n\t\t\t\t\t<div className={cls.wrapper}>\n\t\t\t\t\t\t<img src={Cross} className={cls.cross} onClick={closeHandler} />\n\t\t\t\t\t\t<div className={cls.content} onClick={onContentClick}>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Portal>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Modal\":\"Modal_Vvnoa\",\"overlay\":\"overlay_Nz0fE\",\"wrapper\":\"wrapper_QBL7W\",\"append-animate\":\"append-animate_khZAm\",\"content\":\"content_QghS8\",\"opened\":\"opened_mZ_1y\",\"isClosing\":\"isClosing_cGJ35\",\"cross\":\"cross_X9nFF\"};","/* eslint-disable react/no-unescaped-entities */\nimport React, { useContext } from \"react\"\nimport { useWeb3Modal } from \"@web3modal/wagmi/react\"\nimport Button from \"../../ui/Button/Button\"\nimport Link from \"../../ui/Link/Link\"\n\nimport cls from \"./ConnectModal.module.scss\"\nimport MM from \"@/mm.svg\"\nimport WC from \"@/wc.svg\"\nimport { Modal } from \"../../ui/Modal/Modal\"\n\nfunction WCConnector(props) {\n\tconst { open } = useWeb3Modal()\n\tconst { onClose } = props\n\treturn (\n\t\t<Button\n\t\t\tmodal\n\t\t\tonClick={() => {\n\t\t\t\tonClose()\n\t\t\t\topen()\n\t\t\t}}\n\t\t>\n\t\t\t<img src={WC} width=\"80\" height=\"80\" data-img />\n\t\t\t<h4>WalletConnect</h4>\n\t\t\t<p>Use WalletConnect to connect</p>\n\t\t\t<Link arrow className={cls.link}>\n\t\t\t\tConnect\n\t\t\t</Link>\n\t\t</Button>\n\t)\n}\n\nfunction MMConnector() {\n\treturn (\n\t\t<Button link href={\"\"} modal>\n\t\t\t<img src={MM} width=\"80\" height=\"80\" data-img />\n\t\t\t<h4>MetaMask</h4>\n\t\t\t<p>Connect to your MetaMask Wallet</p>\n\t\t\t<Link arrow>Connect</Link>\n\t\t</Button>\n\t)\n}\n\nconst ConnectModal = (props) => {\n\tconst { isOpen, onClose } = props\n\treturn (\n\t\t<Modal className={cls.ConnectModal} isOpen={isOpen} onClose={onClose}>\n\t\t\t<h3>Choose one</h3>\n\t\t\t<div className={cls.cardsBlock}>\n\t\t\t\t<MMConnector />\n\t\t\t\t<WCConnector onClose={onClose} />\n\t\t\t</div>\n\t\t</Modal>\n\t)\n}\nexport default ConnectModal\n","import { useWeb3Modal } from \"@web3modal/wagmi/react\"\nimport React, { useState, useCallback } from \"react\"\nimport Button from \"../ui/Button/Button\"\n\nimport mainconfig, { supportedChains } from \"../config\"\nimport ConnectModal from \"./ConnectModal/ConnectModal\"\nimport { useAccount } from \"wagmi\"\n\nfunction Account({ header }) {\n\treturn (\n\t\t<div className={header ? \"disabledChild\" : \"\"}>\n\t\t\t<w3m-account-button balance={false} />\n\t\t</div>\n\t)\n}\n\nfunction Chain() {\n\treturn <w3m-network-button />\n}\n\nconst ConnectButton = (props) => {\n\tconst { action, connect, header, chain } = props\n\tconst { open } = useWeb3Modal()\n\tconst { isConnected } = useAccount()\n\n\tconst isMetaMask = mainconfig.isMetaMask\n\tconst isMobile = mainconfig.isMobile\n\n\tconst [connectModal, setConnectModal] = useState(false)\n\tconst onCloseModal = useCallback(() => {\n\t\tsetConnectModal(false)\n\t}, [])\n\treturn (\n\t\t<>\n\t\t\t{isConnected ? (\n\t\t\t\t<>\n\t\t\t\t\t{isMetaMask && header === false && supportedChains.includes(chain.id) && <Chain />}\n\t\t\t\t\t{!isMetaMask && header === false && supportedChains.includes(chain.id) && <Chain />}\n\t\t\t\t\t<Account header={header} />\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<Button\n\t\t\t\t\t\theaderBtn={header}\n\t\t\t\t\t\tpink\n\t\t\t\t\t\tconnect={connect}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (action) {\n\t\t\t\t\t\t\t\taction()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isMobile && !isMetaMask) {\n\t\t\t\t\t\t\t\tsetConnectModal(true)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\topen()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tConnect Wallet\n\t\t\t\t\t\t<div className=\"sh\"></div>\n\t\t\t\t\t</Button>\n\t\t\t\t\t{connectModal && <ConnectModal isOpen={connectModal} onClose={onCloseModal} />}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t)\n}\nexport default React.memo(ConnectButton)\n","export default __webpack_public_path__ + \"7cc8666e0f5e0b64c953b42c3a1b284d.webp\";","export default __webpack_public_path__ + \"fc1ea6cc1bd27e7e3b1babdd24b66f19.webp\";","export default __webpack_public_path__ + \"a65305de9ebb7e931838c461d30c8572.webp\";","export default __webpack_public_path__ + \"8ff9fa8ace06a3e39f946643dbb00eaa.webp\";","export default __webpack_public_path__ + \"34abbd9fbd602a087cacaf79b317a931.svg\";","export default __webpack_public_path__ + \"5bd2b4ffa02a554acd9e88bf8ed7c4d3.webp\";","/* eslint-disable react/no-unescaped-entities */\nimport React from \"react\"\nimport Button from \"../../ui/Button/Button\"\nimport { Modal } from \"../../ui/Modal/Modal.jsx\"\nimport cls from \"./MintSuccess.module.scss\"\nimport Card from \"@/NFT/CARDS.webp\"\nimport Blue from \"@/NFT/diamond-blue-success.webp\"\nimport Small from \"@/NFT/diamond-blue-small.webp\"\nimport Desk from \"@/NFT/diamond-purple-success.webp\"\nimport DiscordIcon from \"@/UI/icons/discord.svg\"\n\nimport Purple from \"@/TOKENOMIC/diamond.webp\"\n\nconst MintSuccess = (props) => {\n\tconst { isOpen, onClose } = props\n\treturn (\n\t\t<Modal className={cls.MintSuccess} isOpen={isOpen} onClose={onClose}>\n\t\t\t<h3>\n\t\t\t\tCongratulations!\n\t\t\t\t<br /> You're In!\n\t\t\t</h3>\n\t\t\t<div className={cls.imagesBlock}>\n\t\t\t\t<img alt=\"icon\" src={Blue} width=\"35\" height=\"auto\" className={cls.blue} data-absolute />\n\t\t\t\t<img alt=\"icon\" src={Purple} width=\"39\" height=\"auto\" className={cls.purple} data-absolute />\n\t\t\t\t<img alt=\"icon\" src={Desk} width=\"40\" height=\"auto\" className={cls.desk} data-absolute />\n\n\t\t\t\t<img alt=\"icon\" src={Card} className={cls.card} width=\"320\" height=\"auto\" />\n\t\t\t\t<img alt=\"icon\" src={Small} width=\"21\" height=\"auto\" className={cls.small} data-absolute />\n\t\t\t</div>\n\t\t\t<h5>\n\t\t\t\tJoin our <b>exclusive Discord community</b> for early adopters now - click the{\" \"}\n\t\t\t\t<a href={Links.discord} className=\"bold primary-200\" target=\"_blank\" rel=\"noreferrer\">\n\t\t\t\t\tsecret link\n\t\t\t\t</a>{\" \"}\n\t\t\t\tand <b>grab your perks</b>!\n\t\t\t</h5>\n\t\t\t<Button link discord yellow className={cls.button}>\n\t\t\t\t<img src={DiscordIcon} alt=\"x\" width=\"16\" height=\"16\" />\n\t\t\t\t<span>Join now </span>\n\t\t\t\t<div className=\"sh\"></div>\n\t\t\t</Button>\n\t\t</Modal>\n\t)\n}\nexport default MintSuccess\n","// extracted by mini-css-extract-plugin\nexport default {\"MintSuccess\":\"MintSuccess_HPEu8\",\"button\":\"button_P5lGr\",\"imagesBlock\":\"imagesBlock_uUCDs\",\"card\":\"card_ep5Mz\",\"desk\":\"desk_XsxNU\",\"purple\":\"purple_KNtLs\",\"blue\":\"blue_u7PhU\",\"small\":\"small_ejBtD\"};","export default __webpack_public_path__ + \"c28fccd806f03a30bf4e27e9caca8e23.webp\";","export default __webpack_public_path__ + \"bc30d57d61d58ad0bba4440c21791ddc.svg\";","export const CONNECT_ERROR = \"Oops! Something went wrong. Please try again.\"\n\nexport const PURCHASE_ERRORS = {\n\t32000: \"Insufficient funds for this transaction. Kindly add more to your account and try again.\",\n\t4001: \"Transaction signature declined by user.\",\n\tgeneral: \"Apologies, something didn't go as planned. Please retry.\",\n}\n\nexport const WALLET_SUCCESS = \"Your wallet successfully connected!\"\n\nexport const Links = {\n\tgitbook: {\n\t\tmain: \"https://toon-org.gitbook.io/toon-gitbook-draft/\",\n\t\temission: \"https://toon-org.gitbook.io/toon-gitbook-draft/tokenomics#token-emission-and-total-supply\",\n\t\tdistribution: \"https://toon-org.gitbook.io/toon-gitbook-draft/tokenomics#token-distribution\",\n\t\tgrowth: \"https://toon-org.gitbook.io/toon-gitbook-draft/tokenomics#continuous-fuel-for-project-growth\",\n\t\tgovernance: \"https://toon-org.gitbook.io/toon-gitbook-draft/governance\",\n\t\tmethods: \"https://toon-org.gitbook.io/toon-gitbook-draft/toon-team-and-viral-methods#unleashing-web3-vitality-through-user-friendly-steps\",\n\t\tcharity: \"https://toon-org.gitbook.io/toon-gitbook-draft/charity\",\n\t},\n\tapple: \"https://apps.apple.com/app/id1635754347\",\n\tgoogle: \"https://play.google.com/store/apps/details?id=com.toonlabs.tooncoin\",\n\tbitcoin: \"https://t.me/BitcoinArtBot\",\n\ttwitter: \"https://twitter.com/tooncoin\",\n\tdiscord: \"https://discord.gg/toonorg\",\n\tprivacy: \"https://earlyaccess.toon.org/privacy\",\n\tmetamask: \"https://metamask.app.link/dapp/earlyaccess.toon.org/\",\n}\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"None\"] = 0] = \"None\";\n    LogLevel[LogLevel[\"Error\"] = 1] = \"Error\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Verbose\"] = 3] = \"Verbose\";\n    LogLevel[LogLevel[\"Debug\"] = 4] = \"Debug\";\n})(LogLevel || (LogLevel = {}));\n//# sourceMappingURL=logger.js.map","import { __assign, __values } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { LogLevel } from '@amplitude/analytics-types';\nexport var getStacktrace = function (ignoreDepth) {\n    if (ignoreDepth === void 0) { ignoreDepth = 0; }\n    var trace = new Error().stack || '';\n    return trace\n        .split('\\n')\n        .slice(2 + ignoreDepth)\n        .map(function (text) { return text.trim(); });\n};\n// This hook makes sure we always get the latest logger and logLevel.\nexport var getClientLogConfig = function (client) { return function () {\n    var _a = __assign({}, client.config), logger = _a.loggerProvider, logLevel = _a.logLevel;\n    return {\n        logger: logger,\n        logLevel: logLevel,\n    };\n}; };\n// This is a convenient function to get the attribute from object with string path, similar to lodash '#get'.\nexport var getValueByStringPath = function (obj, path) {\n    var e_1, _a;\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\n    path = path.replace(/^\\./, ''); // strip a leading dot\n    try {\n        for (var _b = __values(path.split('.')), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var attr = _c.value;\n            if (attr in obj) {\n                obj = obj[attr];\n            }\n            else {\n                return;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return obj;\n};\nexport var getClientStates = function (client, paths) { return function () {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n            var path = paths_1_1.value;\n            res[path] = getValueByStringPath(client, path);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return res;\n}; };\nexport var debugWrapper = function (fn, fnName, getLogConfig, getStates, fnContext) {\n    if (fnContext === void 0) { fnContext = null; }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _a = getLogConfig(), logger = _a.logger, logLevel = _a.logLevel;\n        // return early if possible to reduce overhead\n        if ((logLevel && logLevel < LogLevel.Debug) || !logLevel || !logger) {\n            return fn.apply(fnContext, args);\n        }\n        var debugContext = {\n            type: 'invoke public method',\n            name: fnName,\n            args: args,\n            stacktrace: getStacktrace(1),\n            time: {\n                start: new Date().toISOString(),\n            },\n            states: {},\n        };\n        if (getStates && debugContext.states) {\n            debugContext.states.before = getStates();\n        }\n        var result = fn.apply(fnContext, args);\n        if (result && result.promise) {\n            // if result is a promise, add the callback\n            result.promise.then(function () {\n                if (getStates && debugContext.states) {\n                    debugContext.states.after = getStates();\n                }\n                if (debugContext.time) {\n                    debugContext.time.end = new Date().toISOString();\n                }\n                logger.debug(JSON.stringify(debugContext, null, 2));\n            });\n        }\n        else {\n            if (getStates && debugContext.states) {\n                debugContext.states.after = getStates();\n            }\n            if (debugContext.time) {\n                debugContext.time.end = new Date().toISOString();\n            }\n            logger.debug(JSON.stringify(debugContext, null, 2));\n        }\n        return result;\n    };\n};\n//# sourceMappingURL=debug.js.map","/** The status of an event. */\nexport var Status;\n(function (Status) {\n    /** The status could not be determined. */\n    Status[\"Unknown\"] = \"unknown\";\n    /** The event was skipped due to configuration or callbacks. */\n    Status[\"Skipped\"] = \"skipped\";\n    /** The event was sent successfully. */\n    Status[\"Success\"] = \"success\";\n    /** A user or device in the payload is currently rate limited and should try again later. */\n    Status[\"RateLimit\"] = \"rate_limit\";\n    /** The sent payload was too large to be processed. */\n    Status[\"PayloadTooLarge\"] = \"payload_too_large\";\n    /** The event could not be processed. */\n    Status[\"Invalid\"] = \"invalid\";\n    /** A server-side error ocurred during submission. */\n    Status[\"Failed\"] = \"failed\";\n    /** a server or client side error occuring when a request takes too long and is cancelled */\n    Status[\"Timeout\"] = \"Timeout\";\n    /** NodeJS runtime environment error.. E.g. disconnected from network */\n    Status[\"SystemError\"] = \"SystemError\";\n})(Status || (Status = {}));\n//# sourceMappingURL=status.js.map","export var returnWrapper = function (awaitable) { return ({\n    promise: awaitable || Promise.resolve(),\n}); };\n//# sourceMappingURL=return-wrapper.js.map","export var SUCCESS_MESSAGE = 'Event tracked successfully';\nexport var UNEXPECTED_ERROR_MESSAGE = 'Unexpected error occurred';\nexport var MAX_RETRIES_EXCEEDED_MESSAGE = 'Event rejected due to exceeded retry count';\nexport var OPT_OUT_MESSAGE = 'Event skipped due to optOut config';\nexport var MISSING_API_KEY_MESSAGE = 'Event rejected due to missing API key';\nexport var INVALID_API_KEY = 'Invalid API key';\nexport var CLIENT_NOT_INITIALIZED = 'Client not initialized';\n//# sourceMappingURL=messages.js.map","export var UNSET_VALUE = '-';\nexport var AMPLITUDE_PREFIX = 'AMP';\nexport var STORAGE_PREFIX = \"\".concat(AMPLITUDE_PREFIX, \"_unsent\");\nexport var AMPLITUDE_SERVER_URL = 'https://api2.amplitude.com/2/httpapi';\nexport var EU_AMPLITUDE_SERVER_URL = 'https://api.eu.amplitude.com/2/httpapi';\nexport var AMPLITUDE_BATCH_SERVER_URL = 'https://api2.amplitude.com/batch';\nexport var EU_AMPLITUDE_BATCH_SERVER_URL = 'https://api.eu.amplitude.com/batch';\n//# sourceMappingURL=constants.js.map","import { Status } from '@amplitude/analytics-types';\nexport var buildResult = function (event, code, message) {\n    if (code === void 0) { code = 0; }\n    if (message === void 0) { message = Status.Unknown; }\n    return { event: event, code: code, message: message };\n};\n//# sourceMappingURL=result-builder.js.map","import { LogLevel } from '@amplitude/analytics-types';\nvar PREFIX = 'Amplitude Logger ';\nvar Logger = /** @class */ (function () {\n    function Logger() {\n        this.logLevel = LogLevel.None;\n    }\n    Logger.prototype.disable = function () {\n        this.logLevel = LogLevel.None;\n    };\n    Logger.prototype.enable = function (logLevel) {\n        if (logLevel === void 0) { logLevel = LogLevel.Warn; }\n        this.logLevel = logLevel;\n    };\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Verbose) {\n            return;\n        }\n        console.log(\"\".concat(PREFIX, \"[Log]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Warn) {\n            return;\n        }\n        console.warn(\"\".concat(PREFIX, \"[Warn]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Error) {\n            return;\n        }\n        console.error(\"\".concat(PREFIX, \"[Error]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Debug) {\n            return;\n        }\n        // console.debug output is hidden by default in chrome\n        console.log(\"\".concat(PREFIX, \"[Debug]: \").concat(args.join(' ')));\n    };\n    return Logger;\n}());\nexport { Logger };\n//# sourceMappingURL=logger.js.map","import { LogLevel, } from '@amplitude/analytics-types';\nimport { AMPLITUDE_SERVER_URL, AMPLITUDE_BATCH_SERVER_URL, EU_AMPLITUDE_SERVER_URL, EU_AMPLITUDE_BATCH_SERVER_URL, } from './constants';\nimport { Logger } from './logger';\nexport var getDefaultConfig = function () { return ({\n    flushMaxRetries: 12,\n    flushQueueSize: 200,\n    flushIntervalMillis: 10000,\n    instanceName: '$default_instance',\n    logLevel: LogLevel.Warn,\n    loggerProvider: new Logger(),\n    optOut: false,\n    serverUrl: AMPLITUDE_SERVER_URL,\n    serverZone: 'US',\n    useBatch: false,\n}); };\nvar Config = /** @class */ (function () {\n    function Config(options) {\n        var _a, _b, _c, _d;\n        this._optOut = false;\n        var defaultConfig = getDefaultConfig();\n        this.apiKey = options.apiKey;\n        this.flushIntervalMillis = (_a = options.flushIntervalMillis) !== null && _a !== void 0 ? _a : defaultConfig.flushIntervalMillis;\n        this.flushMaxRetries = options.flushMaxRetries || defaultConfig.flushMaxRetries;\n        this.flushQueueSize = options.flushQueueSize || defaultConfig.flushQueueSize;\n        this.instanceName = options.instanceName || defaultConfig.instanceName;\n        this.loggerProvider = options.loggerProvider || defaultConfig.loggerProvider;\n        this.logLevel = (_b = options.logLevel) !== null && _b !== void 0 ? _b : defaultConfig.logLevel;\n        this.minIdLength = options.minIdLength;\n        this.plan = options.plan;\n        this.ingestionMetadata = options.ingestionMetadata;\n        this.optOut = (_c = options.optOut) !== null && _c !== void 0 ? _c : defaultConfig.optOut;\n        this.serverUrl = options.serverUrl;\n        this.serverZone = options.serverZone || defaultConfig.serverZone;\n        this.storageProvider = options.storageProvider;\n        this.transportProvider = options.transportProvider;\n        this.useBatch = (_d = options.useBatch) !== null && _d !== void 0 ? _d : defaultConfig.useBatch;\n        this.loggerProvider.enable(this.logLevel);\n        var serverConfig = createServerConfig(options.serverUrl, options.serverZone, options.useBatch);\n        this.serverZone = serverConfig.serverZone;\n        this.serverUrl = serverConfig.serverUrl;\n    }\n    Object.defineProperty(Config.prototype, \"optOut\", {\n        get: function () {\n            return this._optOut;\n        },\n        set: function (optOut) {\n            this._optOut = optOut;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Config;\n}());\nexport { Config };\nexport var getServerUrl = function (serverZone, useBatch) {\n    if (serverZone === 'EU') {\n        return useBatch ? EU_AMPLITUDE_BATCH_SERVER_URL : EU_AMPLITUDE_SERVER_URL;\n    }\n    return useBatch ? AMPLITUDE_BATCH_SERVER_URL : AMPLITUDE_SERVER_URL;\n};\nexport var createServerConfig = function (serverUrl, serverZone, useBatch) {\n    if (serverUrl === void 0) { serverUrl = ''; }\n    if (serverZone === void 0) { serverZone = getDefaultConfig().serverZone; }\n    if (useBatch === void 0) { useBatch = getDefaultConfig().useBatch; }\n    if (serverUrl) {\n        return { serverUrl: serverUrl, serverZone: undefined };\n    }\n    var _serverZone = ['US', 'EU'].includes(serverZone) ? serverZone : getDefaultConfig().serverZone;\n    return {\n        serverZone: _serverZone,\n        serverUrl: getServerUrl(_serverZone, useBatch),\n    };\n};\n//# sourceMappingURL=config.js.map","import { __awaiter, __generator, __read, __rest, __spreadArray } from \"tslib\";\nimport { Status, } from '@amplitude/analytics-types';\nimport { INVALID_API_KEY, MAX_RETRIES_EXCEEDED_MESSAGE, MISSING_API_KEY_MESSAGE, SUCCESS_MESSAGE, UNEXPECTED_ERROR_MESSAGE, } from '../messages';\nimport { STORAGE_PREFIX } from '../constants';\nimport { chunk } from '../utils/chunk';\nimport { buildResult } from '../utils/result-builder';\nimport { createServerConfig } from '../config';\nfunction getErrorMessage(error) {\n    if (error instanceof Error)\n        return error.message;\n    return String(error);\n}\nexport function getResponseBodyString(res) {\n    var responseBodyString = '';\n    try {\n        if ('body' in res) {\n            responseBodyString = JSON.stringify(res.body, null, 2);\n        }\n    }\n    catch (_a) {\n        // to avoid crash, but don't care about the error, add comment to avoid empty block lint error\n    }\n    return responseBodyString;\n}\nvar Destination = /** @class */ (function () {\n    function Destination() {\n        this.name = 'amplitude';\n        this.type = 'destination';\n        this.retryTimeout = 1000;\n        this.throttleTimeout = 30000;\n        this.storageKey = '';\n        this.scheduled = null;\n        this.queue = [];\n    }\n    Destination.prototype.setup = function (config) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var unsent;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.config = config;\n                        this.storageKey = \"\".concat(STORAGE_PREFIX, \"_\").concat(this.config.apiKey.substring(0, 10));\n                        return [4 /*yield*/, ((_a = this.config.storageProvider) === null || _a === void 0 ? void 0 : _a.get(this.storageKey))];\n                    case 1:\n                        unsent = _b.sent();\n                        this.saveEvents(); // sets storage to '[]'\n                        if (unsent && unsent.length > 0) {\n                            void Promise.all(unsent.map(function (event) { return _this.execute(event); })).catch();\n                        }\n                        return [2 /*return*/, Promise.resolve(undefined)];\n                }\n            });\n        });\n    };\n    Destination.prototype.execute = function (event) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var context = {\n                event: event,\n                attempts: 0,\n                callback: function (result) { return resolve(result); },\n                timeout: 0,\n            };\n            void _this.addToQueue(context);\n        });\n    };\n    Destination.prototype.addToQueue = function () {\n        var _this = this;\n        var list = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            list[_i] = arguments[_i];\n        }\n        var tryable = list.filter(function (context) {\n            if (context.attempts < _this.config.flushMaxRetries) {\n                context.attempts += 1;\n                return true;\n            }\n            void _this.fulfillRequest([context], 500, MAX_RETRIES_EXCEEDED_MESSAGE);\n            return false;\n        });\n        tryable.forEach(function (context) {\n            _this.queue = _this.queue.concat(context);\n            if (context.timeout === 0) {\n                _this.schedule(_this.config.flushIntervalMillis);\n                return;\n            }\n            setTimeout(function () {\n                context.timeout = 0;\n                _this.schedule(0);\n            }, context.timeout);\n        });\n        this.saveEvents();\n    };\n    Destination.prototype.schedule = function (timeout) {\n        var _this = this;\n        if (this.scheduled)\n            return;\n        this.scheduled = setTimeout(function () {\n            void _this.flush(true).then(function () {\n                if (_this.queue.length > 0) {\n                    _this.schedule(timeout);\n                }\n            });\n        }, timeout);\n    };\n    Destination.prototype.flush = function (useRetry) {\n        if (useRetry === void 0) { useRetry = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var list, later, batches;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        list = [];\n                        later = [];\n                        this.queue.forEach(function (context) { return (context.timeout === 0 ? list.push(context) : later.push(context)); });\n                        this.queue = later;\n                        if (this.scheduled) {\n                            clearTimeout(this.scheduled);\n                            this.scheduled = null;\n                        }\n                        batches = chunk(list, this.config.flushQueueSize);\n                        return [4 /*yield*/, Promise.all(batches.map(function (batch) { return _this.send(batch, useRetry); }))];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Destination.prototype.send = function (list, useRetry) {\n        if (useRetry === void 0) { useRetry = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var payload, serverUrl, res, e_1, errorMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.config.apiKey) {\n                            return [2 /*return*/, this.fulfillRequest(list, 400, MISSING_API_KEY_MESSAGE)];\n                        }\n                        payload = {\n                            api_key: this.config.apiKey,\n                            events: list.map(function (context) {\n                                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                                var _a = context.event, extra = _a.extra, eventWithoutExtra = __rest(_a, [\"extra\"]);\n                                return eventWithoutExtra;\n                            }),\n                            options: {\n                                min_id_length: this.config.minIdLength,\n                            },\n                            client_upload_time: new Date().toISOString(),\n                        };\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        serverUrl = createServerConfig(this.config.serverUrl, this.config.serverZone, this.config.useBatch).serverUrl;\n                        return [4 /*yield*/, this.config.transportProvider.send(serverUrl, payload)];\n                    case 2:\n                        res = _a.sent();\n                        if (res === null) {\n                            this.fulfillRequest(list, 0, UNEXPECTED_ERROR_MESSAGE);\n                            return [2 /*return*/];\n                        }\n                        if (!useRetry) {\n                            if ('body' in res) {\n                                this.fulfillRequest(list, res.statusCode, \"\".concat(res.status, \": \").concat(getResponseBodyString(res)));\n                            }\n                            else {\n                                this.fulfillRequest(list, res.statusCode, res.status);\n                            }\n                            return [2 /*return*/];\n                        }\n                        this.handleResponse(res, list);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        errorMessage = getErrorMessage(e_1);\n                        this.config.loggerProvider.error(errorMessage);\n                        this.fulfillRequest(list, 0, errorMessage);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Destination.prototype.handleResponse = function (res, list) {\n        var status = res.status;\n        switch (status) {\n            case Status.Success: {\n                this.handleSuccessResponse(res, list);\n                break;\n            }\n            case Status.Invalid: {\n                this.handleInvalidResponse(res, list);\n                break;\n            }\n            case Status.PayloadTooLarge: {\n                this.handlePayloadTooLargeResponse(res, list);\n                break;\n            }\n            case Status.RateLimit: {\n                this.handleRateLimitResponse(res, list);\n                break;\n            }\n            default: {\n                // log intermediate event status before retry\n                this.config.loggerProvider.warn(\"{code: 0, error: \\\"Status '\".concat(status, \"' provided for \").concat(list.length, \" events\\\"}\"));\n                this.handleOtherResponse(list);\n                break;\n            }\n        }\n    };\n    Destination.prototype.handleSuccessResponse = function (res, list) {\n        this.fulfillRequest(list, res.statusCode, SUCCESS_MESSAGE);\n    };\n    Destination.prototype.handleInvalidResponse = function (res, list) {\n        var _this = this;\n        if (res.body.missingField || res.body.error.startsWith(INVALID_API_KEY)) {\n            this.fulfillRequest(list, res.statusCode, res.body.error);\n            return;\n        }\n        var dropIndex = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(Object.values(res.body.eventsWithInvalidFields)), false), __read(Object.values(res.body.eventsWithMissingFields)), false), __read(Object.values(res.body.eventsWithInvalidIdLengths)), false), __read(res.body.silencedEvents), false).flat();\n        var dropIndexSet = new Set(dropIndex);\n        var retry = list.filter(function (context, index) {\n            if (dropIndexSet.has(index)) {\n                _this.fulfillRequest([context], res.statusCode, res.body.error);\n                return;\n            }\n            return true;\n        });\n        if (retry.length > 0) {\n            // log intermediate event status before retry\n            this.config.loggerProvider.warn(getResponseBodyString(res));\n        }\n        this.addToQueue.apply(this, __spreadArray([], __read(retry), false));\n    };\n    Destination.prototype.handlePayloadTooLargeResponse = function (res, list) {\n        if (list.length === 1) {\n            this.fulfillRequest(list, res.statusCode, res.body.error);\n            return;\n        }\n        // log intermediate event status before retry\n        this.config.loggerProvider.warn(getResponseBodyString(res));\n        this.config.flushQueueSize /= 2;\n        this.addToQueue.apply(this, __spreadArray([], __read(list), false));\n    };\n    Destination.prototype.handleRateLimitResponse = function (res, list) {\n        var _this = this;\n        var dropUserIds = Object.keys(res.body.exceededDailyQuotaUsers);\n        var dropDeviceIds = Object.keys(res.body.exceededDailyQuotaDevices);\n        var throttledIndex = res.body.throttledEvents;\n        var dropUserIdsSet = new Set(dropUserIds);\n        var dropDeviceIdsSet = new Set(dropDeviceIds);\n        var throttledIndexSet = new Set(throttledIndex);\n        var retry = list.filter(function (context, index) {\n            if ((context.event.user_id && dropUserIdsSet.has(context.event.user_id)) ||\n                (context.event.device_id && dropDeviceIdsSet.has(context.event.device_id))) {\n                _this.fulfillRequest([context], res.statusCode, res.body.error);\n                return;\n            }\n            if (throttledIndexSet.has(index)) {\n                context.timeout = _this.throttleTimeout;\n            }\n            return true;\n        });\n        if (retry.length > 0) {\n            // log intermediate event status before retry\n            this.config.loggerProvider.warn(getResponseBodyString(res));\n        }\n        this.addToQueue.apply(this, __spreadArray([], __read(retry), false));\n    };\n    Destination.prototype.handleOtherResponse = function (list) {\n        var _this = this;\n        this.addToQueue.apply(this, __spreadArray([], __read(list.map(function (context) {\n            context.timeout = context.attempts * _this.retryTimeout;\n            return context;\n        })), false));\n    };\n    Destination.prototype.fulfillRequest = function (list, code, message) {\n        this.saveEvents();\n        list.forEach(function (context) { return context.callback(buildResult(context.event, code, message)); });\n    };\n    /**\n     * Saves events to storage\n     * This is called on\n     * 1) new events are added to queue; or\n     * 2) response comes back for a request\n     */\n    Destination.prototype.saveEvents = function () {\n        if (!this.config.storageProvider) {\n            return;\n        }\n        var events = Array.from(this.queue.map(function (context) { return context.event; }));\n        void this.config.storageProvider.set(this.storageKey, events);\n    };\n    return Destination;\n}());\nexport { Destination };\n//# sourceMappingURL=destination.js.map","export var IdentifyOperation;\n(function (IdentifyOperation) {\n    // Base Operations to set values\n    IdentifyOperation[\"SET\"] = \"$set\";\n    IdentifyOperation[\"SET_ONCE\"] = \"$setOnce\";\n    // Operations around modifying existing values\n    IdentifyOperation[\"ADD\"] = \"$add\";\n    IdentifyOperation[\"APPEND\"] = \"$append\";\n    IdentifyOperation[\"PREPEND\"] = \"$prepend\";\n    IdentifyOperation[\"REMOVE\"] = \"$remove\";\n    // Operations around appending values *if* they aren't present\n    IdentifyOperation[\"PREINSERT\"] = \"$preInsert\";\n    IdentifyOperation[\"POSTINSERT\"] = \"$postInsert\";\n    // Operations around removing properties/values\n    IdentifyOperation[\"UNSET\"] = \"$unset\";\n    IdentifyOperation[\"CLEAR_ALL\"] = \"$clearAll\";\n})(IdentifyOperation || (IdentifyOperation = {}));\nexport var RevenueProperty;\n(function (RevenueProperty) {\n    RevenueProperty[\"REVENUE_PRODUCT_ID\"] = \"$productId\";\n    RevenueProperty[\"REVENUE_QUANTITY\"] = \"$quantity\";\n    RevenueProperty[\"REVENUE_PRICE\"] = \"$price\";\n    RevenueProperty[\"REVENUE_TYPE\"] = \"$revenueType\";\n    RevenueProperty[\"REVENUE\"] = \"$revenue\";\n})(RevenueProperty || (RevenueProperty = {}));\n/**\n * Strings that have special meaning when used as an event's type\n * and have different specifications.\n */\nexport var SpecialEventType;\n(function (SpecialEventType) {\n    SpecialEventType[\"IDENTIFY\"] = \"$identify\";\n    SpecialEventType[\"GROUP_IDENTIFY\"] = \"$groupidentify\";\n    SpecialEventType[\"REVENUE\"] = \"revenue_amount\";\n})(SpecialEventType || (SpecialEventType = {}));\n//# sourceMappingURL=event.js.map","// Creates an array of elements split into groups the length of size.\n// If array can't be split evenly, the final chunk will be the remaining elements.\n// Works similary as https://lodash.com/docs/4.17.15#chunk\nexport var chunk = function (arr, size) {\n    var chunkSize = Math.max(size, 1);\n    return arr.reduce(function (chunks, element, index) {\n        var chunkIndex = Math.floor(index / chunkSize);\n        if (!chunks[chunkIndex]) {\n            chunks[chunkIndex] = [];\n        }\n        chunks[chunkIndex].push(element);\n        return chunks;\n    }, []);\n};\n//# sourceMappingURL=chunk.js.map","/**\n * Source: [jed's gist]{@link https://gist.github.com/982883}.\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f, and\n * y is replaced with a random hexadecimal digit from 8 to b.\n * Used to generate UUIDs for deviceIds.\n * @private\n */\nexport var UUID = function (a) {\n    return a // if the placeholder was passed, return\n        ? // a random number from 0 to 15\n            (a ^ // unless b is 8,\n                ((Math.random() * // in which case\n                    16) >> // a random number from\n                    (a / 4))) // 8 to 11\n                .toString(16) // in hexadecimal\n        : // or otherwise a concatenated string:\n            (String(1e7) + // 10000000 +\n                String(-1e3) + // -1000 +\n                String(-4e3) + // -4000 +\n                String(-8e3) + // -80000000 +\n                String(-1e11)) // -100000000000,\n                .replace(\n            // replacing\n            /[018]/g, // zeroes, ones, and eights with\n            UUID);\n};\n//# sourceMappingURL=uuid.js.map","import { __values } from \"tslib\";\nvar MAX_PROPERTY_KEYS = 1000;\nexport var isValidObject = function (properties) {\n    if (Object.keys(properties).length > MAX_PROPERTY_KEYS) {\n        return false;\n    }\n    for (var key in properties) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        var value = properties[key];\n        if (!isValidProperties(key, value))\n            return false;\n    }\n    return true;\n};\nexport var isValidProperties = function (property, value) {\n    var e_1, _a;\n    if (typeof property !== 'string')\n        return false;\n    if (Array.isArray(value)) {\n        var isValid = true;\n        try {\n            for (var value_1 = __values(value), value_1_1 = value_1.next(); !value_1_1.done; value_1_1 = value_1.next()) {\n                var valueElement = value_1_1.value;\n                if (Array.isArray(valueElement)) {\n                    return false;\n                }\n                else if (typeof valueElement === 'object') {\n                    isValid = isValid && isValidObject(valueElement);\n                }\n                else if (!['number', 'string'].includes(typeof valueElement)) {\n                    return false;\n                }\n                if (!isValid) {\n                    return false;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (value_1_1 && !value_1_1.done && (_a = value_1.return)) _a.call(value_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    else if (value === null || value === undefined) {\n        return false;\n    }\n    else if (typeof value === 'object') {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        return isValidObject(value);\n    }\n    else if (!['number', 'string', 'boolean'].includes(typeof value)) {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=valid-properties.js.map","import { __assign } from \"tslib\";\nimport { IdentifyOperation, } from '@amplitude/analytics-types';\nimport { UNSET_VALUE } from './constants';\nimport { isValidProperties } from './utils/valid-properties';\nvar Identify = /** @class */ (function () {\n    function Identify() {\n        this._propertySet = new Set();\n        this._properties = {};\n    }\n    Identify.prototype.getUserProperties = function () {\n        return __assign({}, this._properties);\n    };\n    Identify.prototype.set = function (property, value) {\n        this._safeSet(IdentifyOperation.SET, property, value);\n        return this;\n    };\n    Identify.prototype.setOnce = function (property, value) {\n        this._safeSet(IdentifyOperation.SET_ONCE, property, value);\n        return this;\n    };\n    Identify.prototype.append = function (property, value) {\n        this._safeSet(IdentifyOperation.APPEND, property, value);\n        return this;\n    };\n    Identify.prototype.prepend = function (property, value) {\n        this._safeSet(IdentifyOperation.PREPEND, property, value);\n        return this;\n    };\n    Identify.prototype.postInsert = function (property, value) {\n        this._safeSet(IdentifyOperation.POSTINSERT, property, value);\n        return this;\n    };\n    Identify.prototype.preInsert = function (property, value) {\n        this._safeSet(IdentifyOperation.PREINSERT, property, value);\n        return this;\n    };\n    Identify.prototype.remove = function (property, value) {\n        this._safeSet(IdentifyOperation.REMOVE, property, value);\n        return this;\n    };\n    Identify.prototype.add = function (property, value) {\n        this._safeSet(IdentifyOperation.ADD, property, value);\n        return this;\n    };\n    Identify.prototype.unset = function (property) {\n        this._safeSet(IdentifyOperation.UNSET, property, UNSET_VALUE);\n        return this;\n    };\n    Identify.prototype.clearAll = function () {\n        // When clear all happens, all properties are unset. Reset the entire object.\n        this._properties = {};\n        this._properties[IdentifyOperation.CLEAR_ALL] = UNSET_VALUE;\n        return this;\n    };\n    // Returns whether or not this set actually worked.\n    Identify.prototype._safeSet = function (operation, property, value) {\n        if (this._validate(operation, property, value)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            var userPropertyMap = this._properties[operation];\n            if (userPropertyMap === undefined) {\n                userPropertyMap = {};\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                this._properties[operation] = userPropertyMap;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            userPropertyMap[property] = value;\n            this._propertySet.add(property);\n            return true;\n        }\n        return false;\n    };\n    Identify.prototype._validate = function (operation, property, value) {\n        if (this._properties[IdentifyOperation.CLEAR_ALL] !== undefined) {\n            // clear all already set. Skipping operation;\n            return false;\n        }\n        if (this._propertySet.has(property)) {\n            // Property already used. Skipping operation\n            return false;\n        }\n        if (operation === IdentifyOperation.ADD) {\n            return typeof value === 'number';\n        }\n        if (operation !== IdentifyOperation.UNSET && operation !== IdentifyOperation.REMOVE) {\n            return isValidProperties(property, value);\n        }\n        return true;\n    };\n    return Identify;\n}());\nexport { Identify };\n//# sourceMappingURL=identify.js.map","import { __assign } from \"tslib\";\nimport { RevenueProperty, } from '@amplitude/analytics-types';\nimport { isValidObject } from './utils/valid-properties';\nvar Revenue = /** @class */ (function () {\n    function Revenue() {\n        this.productId = '';\n        this.quantity = 1;\n        this.price = 0.0;\n    }\n    Revenue.prototype.setProductId = function (productId) {\n        this.productId = productId;\n        return this;\n    };\n    Revenue.prototype.setQuantity = function (quantity) {\n        if (quantity > 0) {\n            this.quantity = quantity;\n        }\n        return this;\n    };\n    Revenue.prototype.setPrice = function (price) {\n        this.price = price;\n        return this;\n    };\n    Revenue.prototype.setRevenueType = function (revenueType) {\n        this.revenueType = revenueType;\n        return this;\n    };\n    Revenue.prototype.setRevenue = function (revenue) {\n        this.revenue = revenue;\n        return this;\n    };\n    Revenue.prototype.setEventProperties = function (properties) {\n        if (isValidObject(properties)) {\n            this.properties = properties;\n        }\n        return this;\n    };\n    Revenue.prototype.getEventProperties = function () {\n        var eventProperties = this.properties ? __assign({}, this.properties) : {};\n        eventProperties[RevenueProperty.REVENUE_PRODUCT_ID] = this.productId;\n        eventProperties[RevenueProperty.REVENUE_QUANTITY] = this.quantity;\n        eventProperties[RevenueProperty.REVENUE_PRICE] = this.price;\n        eventProperties[RevenueProperty.REVENUE_TYPE] = this.revenueType;\n        eventProperties[RevenueProperty.REVENUE] = this.revenue;\n        return eventProperties;\n    };\n    return Revenue;\n}());\nexport { Revenue };\n//# sourceMappingURL=revenue.js.map","import { __assign, __awaiter, __generator, __read, __values } from \"tslib\";\nimport { buildResult } from './utils/result-builder';\nimport { UUID } from './utils/uuid';\nvar Timeline = /** @class */ (function () {\n    function Timeline(client) {\n        this.client = client;\n        this.queue = [];\n        // Flag to guarantee one schedule apply is running\n        this.applying = false;\n        // Flag indicates whether timeline is ready to process event\n        // Events collected before timeline is ready will stay in the queue to be processed later\n        this.plugins = [];\n    }\n    Timeline.prototype.register = function (plugin, config) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        plugin.name = (_a = plugin.name) !== null && _a !== void 0 ? _a : UUID();\n                        plugin.type = (_b = plugin.type) !== null && _b !== void 0 ? _b : 'enrichment';\n                        return [4 /*yield*/, ((_c = plugin.setup) === null || _c === void 0 ? void 0 : _c.call(plugin, config, this.client))];\n                    case 1:\n                        _d.sent();\n                        this.plugins.push(plugin);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.deregister = function (pluginName) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var index, plugin;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        index = this.plugins.findIndex(function (plugin) { return plugin.name === pluginName; });\n                        plugin = this.plugins[index];\n                        this.plugins.splice(index, 1);\n                        return [4 /*yield*/, ((_a = plugin.teardown) === null || _a === void 0 ? void 0 : _a.call(plugin))];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.reset = function (client) {\n        this.applying = false;\n        var plugins = this.plugins;\n        plugins.map(function (plugin) { var _a; return (_a = plugin.teardown) === null || _a === void 0 ? void 0 : _a.call(plugin); });\n        this.plugins = [];\n        this.client = client;\n    };\n    Timeline.prototype.push = function (event) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            _this.queue.push([event, resolve]);\n            _this.scheduleApply(0);\n        });\n    };\n    Timeline.prototype.scheduleApply = function (timeout) {\n        var _this = this;\n        if (this.applying)\n            return;\n        this.applying = true;\n        setTimeout(function () {\n            void _this.apply(_this.queue.shift()).then(function () {\n                _this.applying = false;\n                if (_this.queue.length > 0) {\n                    _this.scheduleApply(0);\n                }\n            });\n        }, timeout);\n    };\n    Timeline.prototype.apply = function (item) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, event, _b, resolve, before, before_1, before_1_1, plugin, e, e_1_1, enrichment, enrichment_1, enrichment_1_1, plugin, e, e_2_1, destination, executeDestinations;\n            var e_1, _c, e_2, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!item) {\n                            return [2 /*return*/];\n                        }\n                        _a = __read(item, 1), event = _a[0];\n                        _b = __read(item, 2), resolve = _b[1];\n                        before = this.plugins.filter(function (plugin) { return plugin.type === 'before'; });\n                        _e.label = 1;\n                    case 1:\n                        _e.trys.push([1, 6, 7, 8]);\n                        before_1 = __values(before), before_1_1 = before_1.next();\n                        _e.label = 2;\n                    case 2:\n                        if (!!before_1_1.done) return [3 /*break*/, 5];\n                        plugin = before_1_1.value;\n                        /* istanbul ignore if */\n                        if (!plugin.execute) {\n                            // do nothing\n                            return [3 /*break*/, 4];\n                        }\n                        return [4 /*yield*/, plugin.execute(__assign({}, event))];\n                    case 3:\n                        e = _e.sent();\n                        if (e === null) {\n                            resolve({ event: event, code: 0, message: '' });\n                            return [2 /*return*/];\n                        }\n                        else {\n                            event = e;\n                        }\n                        _e.label = 4;\n                    case 4:\n                        before_1_1 = before_1.next();\n                        return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        e_1_1 = _e.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 8];\n                    case 7:\n                        try {\n                            if (before_1_1 && !before_1_1.done && (_c = before_1.return)) _c.call(before_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                        return [7 /*endfinally*/];\n                    case 8:\n                        enrichment = this.plugins.filter(function (plugin) { return plugin.type === 'enrichment' || plugin.type === undefined; });\n                        _e.label = 9;\n                    case 9:\n                        _e.trys.push([9, 14, 15, 16]);\n                        enrichment_1 = __values(enrichment), enrichment_1_1 = enrichment_1.next();\n                        _e.label = 10;\n                    case 10:\n                        if (!!enrichment_1_1.done) return [3 /*break*/, 13];\n                        plugin = enrichment_1_1.value;\n                        /* istanbul ignore if */\n                        if (!plugin.execute) {\n                            // do nothing\n                            return [3 /*break*/, 12];\n                        }\n                        return [4 /*yield*/, plugin.execute(__assign({}, event))];\n                    case 11:\n                        e = _e.sent();\n                        if (e === null) {\n                            resolve({ event: event, code: 0, message: '' });\n                            return [2 /*return*/];\n                        }\n                        else {\n                            event = e;\n                        }\n                        _e.label = 12;\n                    case 12:\n                        enrichment_1_1 = enrichment_1.next();\n                        return [3 /*break*/, 10];\n                    case 13: return [3 /*break*/, 16];\n                    case 14:\n                        e_2_1 = _e.sent();\n                        e_2 = { error: e_2_1 };\n                        return [3 /*break*/, 16];\n                    case 15:\n                        try {\n                            if (enrichment_1_1 && !enrichment_1_1.done && (_d = enrichment_1.return)) _d.call(enrichment_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                        return [7 /*endfinally*/];\n                    case 16:\n                        destination = this.plugins.filter(function (plugin) { return plugin.type === 'destination'; });\n                        executeDestinations = destination.map(function (plugin) {\n                            var eventClone = __assign({}, event);\n                            return plugin.execute(eventClone).catch(function (e) { return buildResult(eventClone, 0, String(e)); });\n                        });\n                        void Promise.all(executeDestinations).then(function (_a) {\n                            var _b = __read(_a, 1), result = _b[0];\n                            var resolveResult = result || buildResult(event, 100, 'Event not tracked, no destination plugins on the instance');\n                            resolve(resolveResult);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.flush = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var queue, destination, executeDestinations;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        queue = this.queue;\n                        this.queue = [];\n                        return [4 /*yield*/, Promise.all(queue.map(function (item) { return _this.apply(item); }))];\n                    case 1:\n                        _a.sent();\n                        destination = this.plugins.filter(function (plugin) { return plugin.type === 'destination'; });\n                        executeDestinations = destination.map(function (plugin) {\n                            return plugin.flush && plugin.flush();\n                        });\n                        return [4 /*yield*/, Promise.all(executeDestinations)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Timeline;\n}());\nexport { Timeline };\n//# sourceMappingURL=timeline.js.map","import { __assign } from \"tslib\";\nimport { SpecialEventType, } from '@amplitude/analytics-types';\nimport { Identify } from '../identify';\nexport var createTrackEvent = function (eventInput, eventProperties, eventOptions) {\n    var baseEvent = typeof eventInput === 'string' ? { event_type: eventInput } : eventInput;\n    return __assign(__assign(__assign({}, baseEvent), eventOptions), (eventProperties && { event_properties: eventProperties }));\n};\nexport var createIdentifyEvent = function (identify, eventOptions) {\n    var identifyEvent = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.IDENTIFY, user_properties: identify.getUserProperties() });\n    return identifyEvent;\n};\nexport var createGroupIdentifyEvent = function (groupType, groupName, identify, eventOptions) {\n    var _a;\n    var groupIdentify = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.GROUP_IDENTIFY, group_properties: identify.getUserProperties(), groups: (_a = {},\n            _a[groupType] = groupName,\n            _a) });\n    return groupIdentify;\n};\nexport var createGroupEvent = function (groupType, groupName, eventOptions) {\n    var _a;\n    var identify = new Identify();\n    identify.set(groupType, groupName);\n    var groupEvent = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.IDENTIFY, user_properties: identify.getUserProperties(), groups: (_a = {},\n            _a[groupType] = groupName,\n            _a) });\n    return groupEvent;\n};\nexport var createRevenueEvent = function (revenue, eventOptions) {\n    return __assign(__assign({}, eventOptions), { event_type: SpecialEventType.REVENUE, event_properties: revenue.getEventProperties() });\n};\n//# sourceMappingURL=event-builder.js.map","import { __awaiter, __generator, __values } from \"tslib\";\nimport { CLIENT_NOT_INITIALIZED, OPT_OUT_MESSAGE } from './messages';\nimport { Timeline } from './timeline';\nimport { createGroupEvent, createGroupIdentifyEvent, createIdentifyEvent, createRevenueEvent, createTrackEvent, } from './utils/event-builder';\nimport { buildResult } from './utils/result-builder';\nimport { returnWrapper } from './utils/return-wrapper';\nvar AmplitudeCore = /** @class */ (function () {\n    function AmplitudeCore(name) {\n        if (name === void 0) { name = '$default'; }\n        this.initializing = false;\n        this.q = [];\n        this.dispatchQ = [];\n        this.logEvent = this.track.bind(this);\n        this.timeline = new Timeline(this);\n        this.name = name;\n    }\n    AmplitudeCore.prototype._init = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.config = config;\n                        this.timeline.reset(this);\n                        return [4 /*yield*/, this.runQueuedFunctions('q')];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.runQueuedFunctions = function (queueName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var queuedFunctions, queuedFunctions_1, queuedFunctions_1_1, queuedFunction, e_1_1;\n            var e_1, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        queuedFunctions = this[queueName];\n                        this[queueName] = [];\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 6, 7, 8]);\n                        queuedFunctions_1 = __values(queuedFunctions), queuedFunctions_1_1 = queuedFunctions_1.next();\n                        _b.label = 2;\n                    case 2:\n                        if (!!queuedFunctions_1_1.done) return [3 /*break*/, 5];\n                        queuedFunction = queuedFunctions_1_1.value;\n                        return [4 /*yield*/, queuedFunction()];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4:\n                        queuedFunctions_1_1 = queuedFunctions_1.next();\n                        return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        e_1_1 = _b.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 8];\n                    case 7:\n                        try {\n                            if (queuedFunctions_1_1 && !queuedFunctions_1_1.done && (_a = queuedFunctions_1.return)) _a.call(queuedFunctions_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                        return [7 /*endfinally*/];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.track = function (eventInput, eventProperties, eventOptions) {\n        var event = createTrackEvent(eventInput, eventProperties, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.identify = function (identify, eventOptions) {\n        var event = createIdentifyEvent(identify, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.groupIdentify = function (groupType, groupName, identify, eventOptions) {\n        var event = createGroupIdentifyEvent(groupType, groupName, identify, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.setGroup = function (groupType, groupName, eventOptions) {\n        var event = createGroupEvent(groupType, groupName, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.revenue = function (revenue, eventOptions) {\n        var event = createRevenueEvent(revenue, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.add = function (plugin) {\n        if (!this.config) {\n            this.q.push(this.add.bind(this, plugin));\n            return returnWrapper();\n        }\n        return returnWrapper(this.timeline.register(plugin, this.config));\n    };\n    AmplitudeCore.prototype.remove = function (pluginName) {\n        if (!this.config) {\n            this.q.push(this.remove.bind(this, pluginName));\n            return returnWrapper();\n        }\n        return returnWrapper(this.timeline.deregister(pluginName));\n    };\n    AmplitudeCore.prototype.dispatchWithCallback = function (event, callback) {\n        if (!this.config) {\n            return callback(buildResult(event, 0, CLIENT_NOT_INITIALIZED));\n        }\n        void this.process(event).then(callback);\n    };\n    AmplitudeCore.prototype.dispatch = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (!this.config) {\n                    return [2 /*return*/, new Promise(function (resolve) {\n                            _this.dispatchQ.push(_this.dispatchWithCallback.bind(_this, event, resolve));\n                        })];\n                }\n                return [2 /*return*/, this.process(event)];\n            });\n        });\n    };\n    AmplitudeCore.prototype.process = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, e_2, message, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        // skip event processing if opt out\n                        if (this.config.optOut) {\n                            return [2 /*return*/, buildResult(event, 0, OPT_OUT_MESSAGE)];\n                        }\n                        return [4 /*yield*/, this.timeline.push(event)];\n                    case 1:\n                        result = _a.sent();\n                        result.code === 200\n                            ? this.config.loggerProvider.log(result.message)\n                            : result.code === 100\n                                ? this.config.loggerProvider.warn(result.message)\n                                : this.config.loggerProvider.error(result.message);\n                        return [2 /*return*/, result];\n                    case 2:\n                        e_2 = _a.sent();\n                        message = String(e_2);\n                        this.config.loggerProvider.error(message);\n                        result = buildResult(event, 0, message);\n                        return [2 /*return*/, result];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.setOptOut = function (optOut) {\n        if (!this.config) {\n            this.q.push(this.setOptOut.bind(this, Boolean(optOut)));\n            return;\n        }\n        this.config.optOut = Boolean(optOut);\n    };\n    AmplitudeCore.prototype.flush = function () {\n        return returnWrapper(this.timeline.flush());\n    };\n    return AmplitudeCore;\n}());\nexport { AmplitudeCore };\n//# sourceMappingURL=core-client.js.map","var ApplicationContextProviderImpl = /** @class */ (function () {\n    function ApplicationContextProviderImpl() {\n    }\n    ApplicationContextProviderImpl.prototype.getApplicationContext = function () {\n        return {\n            versionName: this.versionName,\n            language: getLanguage(),\n            platform: 'Web',\n            os: undefined,\n            deviceModel: undefined,\n        };\n    };\n    return ApplicationContextProviderImpl;\n}());\nvar getLanguage = function () {\n    return ((typeof navigator !== 'undefined' &&\n        ((navigator.languages && navigator.languages[0]) ||\n            navigator.language)) ||\n        '');\n};\n\nvar EventBridgeImpl = /** @class */ (function () {\n    function EventBridgeImpl() {\n        this.queue = [];\n    }\n    EventBridgeImpl.prototype.logEvent = function (event) {\n        if (!this.receiver) {\n            if (this.queue.length < 512) {\n                this.queue.push(event);\n            }\n        }\n        else {\n            this.receiver(event);\n        }\n    };\n    EventBridgeImpl.prototype.setEventReceiver = function (receiver) {\n        this.receiver = receiver;\n        if (this.queue.length > 0) {\n            this.queue.forEach(function (event) {\n                receiver(event);\n            });\n            this.queue = [];\n        }\n    };\n    return EventBridgeImpl;\n}());\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar isEqual = function (obj1, obj2) {\n    var primitive = ['string', 'number', 'boolean', 'undefined'];\n    var typeA = typeof obj1;\n    var typeB = typeof obj2;\n    if (typeA !== typeB) {\n        return false;\n    }\n    for (var _i = 0, primitive_1 = primitive; _i < primitive_1.length; _i++) {\n        var p = primitive_1[_i];\n        if (p === typeA) {\n            return obj1 === obj2;\n        }\n    }\n    // check null\n    if (obj1 == null && obj2 == null) {\n        return true;\n    }\n    else if (obj1 == null || obj2 == null) {\n        return false;\n    }\n    // if got here - objects\n    if (obj1.length !== obj2.length) {\n        return false;\n    }\n    //check if arrays\n    var isArrayA = Array.isArray(obj1);\n    var isArrayB = Array.isArray(obj2);\n    if (isArrayA !== isArrayB) {\n        return false;\n    }\n    if (isArrayA && isArrayB) {\n        //arrays\n        for (var i = 0; i < obj1.length; i++) {\n            if (!isEqual(obj1[i], obj2[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        //objects\n        var sorted1 = Object.keys(obj1).sort();\n        var sorted2 = Object.keys(obj2).sort();\n        if (!isEqual(sorted1, sorted2)) {\n            return false;\n        }\n        //compare object values\n        var result_1 = true;\n        Object.keys(obj1).forEach(function (key) {\n            if (!isEqual(obj1[key], obj2[key])) {\n                result_1 = false;\n            }\n        });\n        return result_1;\n    }\n    return true;\n};\n\nvar ID_OP_SET = '$set';\nvar ID_OP_UNSET = '$unset';\nvar ID_OP_CLEAR_ALL = '$clearAll';\n// Polyfill for Object.entries\nif (!Object.entries) {\n    Object.entries = function (obj) {\n        var ownProps = Object.keys(obj);\n        var i = ownProps.length;\n        var resArray = new Array(i);\n        while (i--) {\n            resArray[i] = [ownProps[i], obj[ownProps[i]]];\n        }\n        return resArray;\n    };\n}\nvar IdentityStoreImpl = /** @class */ (function () {\n    function IdentityStoreImpl() {\n        this.identity = { userProperties: {} };\n        this.listeners = new Set();\n    }\n    IdentityStoreImpl.prototype.editIdentity = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var actingUserProperties = __assign({}, this.identity.userProperties);\n        var actingIdentity = __assign(__assign({}, this.identity), { userProperties: actingUserProperties });\n        return {\n            setUserId: function (userId) {\n                actingIdentity.userId = userId;\n                return this;\n            },\n            setDeviceId: function (deviceId) {\n                actingIdentity.deviceId = deviceId;\n                return this;\n            },\n            setUserProperties: function (userProperties) {\n                actingIdentity.userProperties = userProperties;\n                return this;\n            },\n            setOptOut: function (optOut) {\n                actingIdentity.optOut = optOut;\n                return this;\n            },\n            updateUserProperties: function (actions) {\n                var actingProperties = actingIdentity.userProperties || {};\n                for (var _i = 0, _a = Object.entries(actions); _i < _a.length; _i++) {\n                    var _b = _a[_i], action = _b[0], properties = _b[1];\n                    switch (action) {\n                        case ID_OP_SET:\n                            for (var _c = 0, _d = Object.entries(properties); _c < _d.length; _c++) {\n                                var _e = _d[_c], key = _e[0], value = _e[1];\n                                actingProperties[key] = value;\n                            }\n                            break;\n                        case ID_OP_UNSET:\n                            for (var _f = 0, _g = Object.keys(properties); _f < _g.length; _f++) {\n                                var key = _g[_f];\n                                delete actingProperties[key];\n                            }\n                            break;\n                        case ID_OP_CLEAR_ALL:\n                            actingProperties = {};\n                            break;\n                    }\n                }\n                actingIdentity.userProperties = actingProperties;\n                return this;\n            },\n            commit: function () {\n                self.setIdentity(actingIdentity);\n                return this;\n            },\n        };\n    };\n    IdentityStoreImpl.prototype.getIdentity = function () {\n        return __assign({}, this.identity);\n    };\n    IdentityStoreImpl.prototype.setIdentity = function (identity) {\n        var originalIdentity = __assign({}, this.identity);\n        this.identity = __assign({}, identity);\n        if (!isEqual(originalIdentity, this.identity)) {\n            this.listeners.forEach(function (listener) {\n                listener(identity);\n            });\n        }\n    };\n    IdentityStoreImpl.prototype.addIdentityListener = function (listener) {\n        this.listeners.add(listener);\n    };\n    IdentityStoreImpl.prototype.removeIdentityListener = function (listener) {\n        this.listeners.delete(listener);\n    };\n    return IdentityStoreImpl;\n}());\n\nvar safeGlobal = typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n        ? global\n        : self;\n\nvar AnalyticsConnector = /** @class */ (function () {\n    function AnalyticsConnector() {\n        this.identityStore = new IdentityStoreImpl();\n        this.eventBridge = new EventBridgeImpl();\n        this.applicationContextProvider = new ApplicationContextProviderImpl();\n    }\n    AnalyticsConnector.getInstance = function (instanceName) {\n        if (!safeGlobal['analyticsConnectorInstances']) {\n            safeGlobal['analyticsConnectorInstances'] = {};\n        }\n        if (!safeGlobal['analyticsConnectorInstances'][instanceName]) {\n            safeGlobal['analyticsConnectorInstances'][instanceName] =\n                new AnalyticsConnector();\n        }\n        return safeGlobal['analyticsConnectorInstances'][instanceName];\n    };\n    return AnalyticsConnector;\n}());\n\nexport { AnalyticsConnector };\n","import { AnalyticsConnector } from '@amplitude/analytics-connector';\nexport var getAnalyticsConnector = function (instanceName) {\n    if (instanceName === void 0) { instanceName = '$default_instance'; }\n    return AnalyticsConnector.getInstance(instanceName);\n};\nexport var setConnectorUserId = function (userId, instanceName) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setUserId(userId).commit();\n};\nexport var setConnectorDeviceId = function (deviceId, instanceName) {\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setDeviceId(deviceId).commit();\n};\n//# sourceMappingURL=analytics-connector.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { getAnalyticsConnector } from '../analytics-connector';\nvar IdentityEventSender = /** @class */ (function () {\n    function IdentityEventSender() {\n        this.name = 'identity';\n        this.type = 'before';\n        this.identityStore = getAnalyticsConnector().identityStore;\n    }\n    IdentityEventSender.prototype.execute = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var userProperties;\n            return __generator(this, function (_a) {\n                userProperties = context.user_properties;\n                if (userProperties) {\n                    this.identityStore.editIdentity().updateUserProperties(userProperties).commit();\n                }\n                return [2 /*return*/, context];\n            });\n        });\n    };\n    IdentityEventSender.prototype.setup = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (config.instanceName) {\n                    this.identityStore = getAnalyticsConnector(config.instanceName).identityStore;\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return IdentityEventSender;\n}());\nexport { IdentityEventSender };\n//# sourceMappingURL=identity.js.map","import { __assign } from \"tslib\";\n/**\n * Returns false if defaultTracking === false or if defaultTracking[event],\n * otherwise returns true\n */\nvar isTrackingEnabled = function (defaultTracking, event) {\n    if (typeof defaultTracking === 'boolean') {\n        return defaultTracking;\n    }\n    if ((defaultTracking === null || defaultTracking === void 0 ? void 0 : defaultTracking[event]) === false) {\n        return false;\n    }\n    return true;\n};\nexport var isAttributionTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'attribution');\n};\nexport var isFileDownloadTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'fileDownloads');\n};\nexport var isFormInteractionTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'formInteractions');\n};\nexport var isPageViewTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'pageViews');\n};\nexport var isSessionTrackingEnabled = function (defaultTracking) {\n    return isTrackingEnabled(defaultTracking, 'sessions');\n};\nexport var getPageViewTrackingConfig = function (config) {\n    var trackOn = function () { return false; };\n    var trackHistoryChanges = undefined;\n    var eventType;\n    var isDefaultPageViewTrackingEnabled = isPageViewTrackingEnabled(config.defaultTracking);\n    if (isDefaultPageViewTrackingEnabled) {\n        trackOn = undefined;\n        eventType = undefined;\n        if (config.defaultTracking &&\n            typeof config.defaultTracking === 'object' &&\n            config.defaultTracking.pageViews &&\n            typeof config.defaultTracking.pageViews === 'object') {\n            if ('trackOn' in config.defaultTracking.pageViews) {\n                trackOn = config.defaultTracking.pageViews.trackOn;\n            }\n            if ('trackHistoryChanges' in config.defaultTracking.pageViews) {\n                trackHistoryChanges = config.defaultTracking.pageViews.trackHistoryChanges;\n            }\n            if ('eventType' in config.defaultTracking.pageViews && config.defaultTracking.pageViews.eventType) {\n                eventType = config.defaultTracking.pageViews.eventType;\n            }\n        }\n    }\n    return {\n        trackOn: trackOn,\n        trackHistoryChanges: trackHistoryChanges,\n        eventType: eventType,\n    };\n};\nexport var getAttributionTrackingConfig = function (config) {\n    if (isAttributionTrackingEnabled(config.defaultTracking) &&\n        config.defaultTracking &&\n        typeof config.defaultTracking === 'object' &&\n        config.defaultTracking.attribution &&\n        typeof config.defaultTracking.attribution === 'object') {\n        return __assign({}, config.defaultTracking.attribution);\n    }\n    return {};\n};\n//# sourceMappingURL=default-tracking.js.map","export var isNewSession = function (sessionTimeout, lastEventTime) {\n    if (lastEventTime === void 0) { lastEventTime = Date.now(); }\n    var currentTime = Date.now();\n    var timeSinceLastEvent = currentTime - lastEventTime;\n    return timeSinceLastEvent > sessionTimeout;\n};\n//# sourceMappingURL=session.js.map","/**\n * Applies the proxied functions on the proxied amplitude snippet to an instance of the real object.\n * @ignore\n */\nexport var runQueuedFunctions = function (instance, queue) {\n    convertProxyObjectToRealObject(instance, queue);\n};\n/**\n * Applies the proxied functions on the proxied object to an instance of the real object.\n * Used to convert proxied Identify and Revenue objects.\n */\nexport var convertProxyObjectToRealObject = function (instance, queue) {\n    for (var i = 0; i < queue.length; i++) {\n        var _a = queue[i], name_1 = _a.name, args = _a.args, resolve = _a.resolve;\n        var fn = instance && instance[name_1];\n        if (typeof fn === 'function') {\n            var result = fn.apply(instance, args);\n            if (typeof resolve === 'function') {\n                resolve(result === null || result === void 0 ? void 0 : result.promise);\n            }\n        }\n    }\n    return instance;\n};\n/**\n * Check if the param is snippet proxy\n */\nexport var isInstanceProxy = function (instance) {\n    var instanceProxy = instance;\n    return instanceProxy && instanceProxy._q !== undefined;\n};\n//# sourceMappingURL=snippet-helper.js.map","export var getLanguage = function () {\n    var _a, _b, _c, _d;\n    if (typeof navigator === 'undefined')\n        return '';\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    var userLanguage = navigator.userLanguage;\n    return (_d = (_c = (_b = (_a = navigator.languages) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : navigator.language) !== null && _c !== void 0 ? _c : userLanguage) !== null && _d !== void 0 ? _d : '';\n};\n//# sourceMappingURL=language.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { UUID } from '@amplitude/analytics-core';\nimport { getLanguage } from '@amplitude/analytics-client-common';\nimport { VERSION } from '../version';\nvar BROWSER_PLATFORM = 'Web';\nvar IP_ADDRESS = '$remote';\nvar Context = /** @class */ (function () {\n    function Context() {\n        this.name = '@amplitude/plugin-context-browser';\n        this.type = 'before';\n        this.library = \"amplitude-ts/\".concat(VERSION);\n        /* istanbul ignore else */\n        if (typeof navigator !== 'undefined') {\n            this.userAgent = navigator.userAgent;\n        }\n    }\n    Context.prototype.setup = function (config) {\n        this.config = config;\n        return Promise.resolve(undefined);\n    };\n    Context.prototype.execute = function (context) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var time, lastEventId, nextEventId, event;\n            return __generator(this, function (_c) {\n                time = new Date().getTime();\n                lastEventId = (_a = this.config.lastEventId) !== null && _a !== void 0 ? _a : -1;\n                nextEventId = (_b = context.event_id) !== null && _b !== void 0 ? _b : lastEventId + 1;\n                this.config.lastEventId = nextEventId;\n                if (!context.time) {\n                    this.config.lastEventTime = time;\n                }\n                event = __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({ user_id: this.config.userId, device_id: this.config.deviceId, session_id: this.config.sessionId, time: time }, (this.config.appVersion && { app_version: this.config.appVersion })), (this.config.trackingOptions.platform && { platform: BROWSER_PLATFORM })), (this.config.trackingOptions.language && { language: getLanguage() })), (this.config.trackingOptions.ipAddress && { ip: IP_ADDRESS })), { insert_id: UUID(), partner_id: this.config.partnerId, plan: this.config.plan }), (this.config.ingestionMetadata && {\n                    ingestion_metadata: {\n                        source_name: this.config.ingestionMetadata.sourceName,\n                        source_version: this.config.ingestionMetadata.sourceVersion,\n                    },\n                })), context), { event_id: nextEventId, library: this.library, user_agent: this.userAgent });\n                return [2 /*return*/, event];\n            });\n        });\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=context.js.map","export var VERSION = '2.3.3';\n//# sourceMappingURL=version.js.map","import { __awaiter, __generator } from \"tslib\";\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage() {\n        this.memoryStorage = new Map();\n    }\n    MemoryStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, true];\n            });\n        });\n    };\n    MemoryStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.memoryStorage.get(key)];\n            });\n        });\n    };\n    MemoryStorage.prototype.getRaw = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.get(key)];\n                    case 1:\n                        value = _a.sent();\n                        return [2 /*return*/, value ? JSON.stringify(value) : undefined];\n                }\n            });\n        });\n    };\n    MemoryStorage.prototype.set = function (key, value) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.set(key, value);\n                return [2 /*return*/];\n            });\n        });\n    };\n    MemoryStorage.prototype.remove = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.delete(key);\n                return [2 /*return*/];\n            });\n        });\n    };\n    MemoryStorage.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.clear();\n                return [2 /*return*/];\n            });\n        });\n    };\n    return MemoryStorage;\n}());\nexport { MemoryStorage };\n//# sourceMappingURL=memory.js.map","import { AMPLITUDE_PREFIX } from '@amplitude/analytics-core';\nexport var getCookieName = function (apiKey, postKey, limit) {\n    if (postKey === void 0) { postKey = ''; }\n    if (limit === void 0) { limit = 10; }\n    return [AMPLITUDE_PREFIX, postKey, apiKey.substring(0, limit)].filter(Boolean).join('_');\n};\nexport var getOldCookieName = function (apiKey) {\n    return \"\".concat(AMPLITUDE_PREFIX.toLowerCase(), \"_\").concat(apiKey.substring(0, 6));\n};\n//# sourceMappingURL=cookie-name.js.map","/* eslint-disable no-restricted-globals */\n/* Only file allowed to access to globalThis, window, self */\nexport var getGlobalScope = function () {\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    return undefined;\n};\n//# sourceMappingURL=global-scope.js.map","import { getGlobalScope } from './global-scope';\nexport var getQueryParams = function () {\n    var _a;\n    var globalScope = getGlobalScope();\n    /* istanbul ignore if */\n    if (!((_a = globalScope === null || globalScope === void 0 ? void 0 : globalScope.location) === null || _a === void 0 ? void 0 : _a.search)) {\n        return {};\n    }\n    var pairs = globalScope.location.search.substring(1).split('&').filter(Boolean);\n    var params = pairs.reduce(function (acc, curr) {\n        var query = curr.split('=', 2);\n        var key = tryDecodeURIComponent(query[0]);\n        var value = tryDecodeURIComponent(query[1]);\n        if (!value) {\n            return acc;\n        }\n        acc[key] = value;\n        return acc;\n    }, {});\n    return params;\n};\nexport var tryDecodeURIComponent = function (value) {\n    if (value === void 0) { value = ''; }\n    try {\n        return decodeURIComponent(value);\n    }\n    catch (_a) {\n        return '';\n    }\n};\n//# sourceMappingURL=query-params.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { getGlobalScope } from '../global-scope';\nvar CookieStorage = /** @class */ (function () {\n    function CookieStorage(options) {\n        this.options = __assign({}, options);\n    }\n    CookieStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var testStrorage, testKey, value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (!getGlobalScope()) {\n                            return [2 /*return*/, false];\n                        }\n                        CookieStorage.testValue = String(Date.now());\n                        testStrorage = new CookieStorage(this.options);\n                        testKey = 'AMP_TEST';\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, 5, 7]);\n                        return [4 /*yield*/, testStrorage.set(testKey, CookieStorage.testValue)];\n                    case 2:\n                        _b.sent();\n                        return [4 /*yield*/, testStrorage.get(testKey)];\n                    case 3:\n                        value = _b.sent();\n                        return [2 /*return*/, value === CookieStorage.testValue];\n                    case 4:\n                        _a = _b.sent();\n                        /* istanbul ignore next */\n                        return [2 /*return*/, false];\n                    case 5: return [4 /*yield*/, testStrorage.remove(testKey)];\n                    case 6:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRaw(key)];\n                    case 1:\n                        value = _a.sent();\n                        if (!value) {\n                            return [2 /*return*/, undefined];\n                        }\n                        try {\n                            try {\n                                value = decodeURIComponent(atob(value));\n                            }\n                            catch (_b) {\n                                // value not encoded\n                            }\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                            return [2 /*return*/, JSON.parse(value)];\n                        }\n                        catch (_c) {\n                            /* istanbul ignore next */\n                            return [2 /*return*/, undefined];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.getRaw = function (key) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var globalScope, cookie, match;\n            return __generator(this, function (_c) {\n                globalScope = getGlobalScope();\n                cookie = (_b = (_a = globalScope === null || globalScope === void 0 ? void 0 : globalScope.document) === null || _a === void 0 ? void 0 : _a.cookie.split('; ')) !== null && _b !== void 0 ? _b : [];\n                match = cookie.find(function (c) { return c.indexOf(key + '=') === 0; });\n                if (!match) {\n                    return [2 /*return*/, undefined];\n                }\n                return [2 /*return*/, match.substring(key.length + 1)];\n            });\n        });\n    };\n    CookieStorage.prototype.set = function (key, value) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var expirationDays, expires, expireDate, date, str, globalScope;\n            return __generator(this, function (_b) {\n                try {\n                    expirationDays = (_a = this.options.expirationDays) !== null && _a !== void 0 ? _a : 0;\n                    expires = value !== null ? expirationDays : -1;\n                    expireDate = undefined;\n                    if (expires) {\n                        date = new Date();\n                        date.setTime(date.getTime() + expires * 24 * 60 * 60 * 1000);\n                        expireDate = date;\n                    }\n                    str = \"\".concat(key, \"=\").concat(btoa(encodeURIComponent(JSON.stringify(value))));\n                    if (expireDate) {\n                        str += \"; expires=\".concat(expireDate.toUTCString());\n                    }\n                    str += '; path=/';\n                    if (this.options.domain) {\n                        str += \"; domain=\".concat(this.options.domain);\n                    }\n                    if (this.options.secure) {\n                        str += '; Secure';\n                    }\n                    if (this.options.sameSite) {\n                        str += \"; SameSite=\".concat(this.options.sameSite);\n                    }\n                    globalScope = getGlobalScope();\n                    if (globalScope) {\n                        globalScope.document.cookie = str;\n                    }\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    CookieStorage.prototype.remove = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.set(key, null)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    return CookieStorage;\n}());\nexport { CookieStorage };\n//# sourceMappingURL=cookie.js.map","/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport { Status } from '@amplitude/analytics-types';\nvar BaseTransport = /** @class */ (function () {\n    function BaseTransport() {\n    }\n    BaseTransport.prototype.send = function (_serverUrl, _payload) {\n        return Promise.resolve(null);\n    };\n    BaseTransport.prototype.buildResponse = function (responseJSON) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n        if (typeof responseJSON !== 'object') {\n            return null;\n        }\n        var statusCode = responseJSON.code || 0;\n        var status = this.buildStatus(statusCode);\n        switch (status) {\n            case Status.Success:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        eventsIngested: (_a = responseJSON.events_ingested) !== null && _a !== void 0 ? _a : 0,\n                        payloadSizeBytes: (_b = responseJSON.payload_size_bytes) !== null && _b !== void 0 ? _b : 0,\n                        serverUploadTime: (_c = responseJSON.server_upload_time) !== null && _c !== void 0 ? _c : 0,\n                    },\n                };\n            case Status.Invalid:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_d = responseJSON.error) !== null && _d !== void 0 ? _d : '',\n                        missingField: (_e = responseJSON.missing_field) !== null && _e !== void 0 ? _e : '',\n                        eventsWithInvalidFields: (_f = responseJSON.events_with_invalid_fields) !== null && _f !== void 0 ? _f : {},\n                        eventsWithMissingFields: (_g = responseJSON.events_with_missing_fields) !== null && _g !== void 0 ? _g : {},\n                        eventsWithInvalidIdLengths: (_h = responseJSON.events_with_invalid_id_lengths) !== null && _h !== void 0 ? _h : {},\n                        epsThreshold: (_j = responseJSON.eps_threshold) !== null && _j !== void 0 ? _j : 0,\n                        exceededDailyQuotaDevices: (_k = responseJSON.exceeded_daily_quota_devices) !== null && _k !== void 0 ? _k : {},\n                        silencedDevices: (_l = responseJSON.silenced_devices) !== null && _l !== void 0 ? _l : [],\n                        silencedEvents: (_m = responseJSON.silenced_events) !== null && _m !== void 0 ? _m : [],\n                        throttledDevices: (_o = responseJSON.throttled_devices) !== null && _o !== void 0 ? _o : {},\n                        throttledEvents: (_p = responseJSON.throttled_events) !== null && _p !== void 0 ? _p : [],\n                    },\n                };\n            case Status.PayloadTooLarge:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_q = responseJSON.error) !== null && _q !== void 0 ? _q : '',\n                    },\n                };\n            case Status.RateLimit:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_r = responseJSON.error) !== null && _r !== void 0 ? _r : '',\n                        epsThreshold: (_s = responseJSON.eps_threshold) !== null && _s !== void 0 ? _s : 0,\n                        throttledDevices: (_t = responseJSON.throttled_devices) !== null && _t !== void 0 ? _t : {},\n                        throttledUsers: (_u = responseJSON.throttled_users) !== null && _u !== void 0 ? _u : {},\n                        exceededDailyQuotaDevices: (_v = responseJSON.exceeded_daily_quota_devices) !== null && _v !== void 0 ? _v : {},\n                        exceededDailyQuotaUsers: (_w = responseJSON.exceeded_daily_quota_users) !== null && _w !== void 0 ? _w : {},\n                        throttledEvents: (_x = responseJSON.throttled_events) !== null && _x !== void 0 ? _x : [],\n                    },\n                };\n            case Status.Timeout:\n            default:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                };\n        }\n    };\n    BaseTransport.prototype.buildStatus = function (code) {\n        if (code >= 200 && code < 300) {\n            return Status.Success;\n        }\n        if (code === 429) {\n            return Status.RateLimit;\n        }\n        if (code === 413) {\n            return Status.PayloadTooLarge;\n        }\n        if (code === 408) {\n            return Status.Timeout;\n        }\n        if (code >= 400 && code < 500) {\n            return Status.Invalid;\n        }\n        if (code >= 500) {\n            return Status.Failed;\n        }\n        return Status.Unknown;\n    };\n    return BaseTransport;\n}());\nexport { BaseTransport };\n//# sourceMappingURL=base.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar FetchTransport = /** @class */ (function (_super) {\n    __extends(FetchTransport, _super);\n    function FetchTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FetchTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var options, response, responsePayload;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (typeof fetch === 'undefined') {\n                            throw new Error('FetchTransport is not supported');\n                        }\n                        options = {\n                            headers: {\n                                'Content-Type': 'application/json',\n                                Accept: '*/*',\n                            },\n                            body: JSON.stringify(payload),\n                            method: 'POST',\n                        };\n                        return [4 /*yield*/, fetch(serverUrl, options)];\n                    case 1:\n                        response = _a.sent();\n                        return [4 /*yield*/, response.json()];\n                    case 2:\n                        responsePayload = _a.sent();\n                        return [2 /*return*/, this.buildResponse(responsePayload)];\n                }\n            });\n        });\n    };\n    return FetchTransport;\n}(BaseTransport));\nexport { FetchTransport };\n//# sourceMappingURL=fetch.js.map","import { __awaiter, __generator } from \"tslib\";\nvar BrowserStorage = /** @class */ (function () {\n    function BrowserStorage(storage) {\n        this.storage = storage;\n    }\n    BrowserStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var random, testStorage, testKey, value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (!this.storage) {\n                            return [2 /*return*/, false];\n                        }\n                        random = String(Date.now());\n                        testStorage = new BrowserStorage(this.storage);\n                        testKey = 'AMP_TEST';\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, 5, 7]);\n                        return [4 /*yield*/, testStorage.set(testKey, random)];\n                    case 2:\n                        _b.sent();\n                        return [4 /*yield*/, testStorage.get(testKey)];\n                    case 3:\n                        value = _b.sent();\n                        return [2 /*return*/, value === random];\n                    case 4:\n                        _a = _b.sent();\n                        /* istanbul ignore next */\n                        return [2 /*return*/, false];\n                    case 5: return [4 /*yield*/, testStorage.remove(testKey)];\n                    case 6:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.getRaw(key)];\n                    case 1:\n                        value = _b.sent();\n                        if (!value) {\n                            return [2 /*return*/, undefined];\n                        }\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                        return [2 /*return*/, JSON.parse(value)];\n                    case 2:\n                        _a = _b.sent();\n                        console.error(\"[Amplitude] Error: Could not get value from storage\");\n                        return [2 /*return*/, undefined];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserStorage.prototype.getRaw = function (key) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                return [2 /*return*/, ((_a = this.storage) === null || _a === void 0 ? void 0 : _a.getItem(key)) || undefined];\n            });\n        });\n    };\n    BrowserStorage.prototype.set = function (key, value) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = this.storage) === null || _a === void 0 ? void 0 : _a.setItem(key, JSON.stringify(value));\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserStorage.prototype.remove = function (key) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = this.storage) === null || _a === void 0 ? void 0 : _a.removeItem(key);\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserStorage.prototype.reset = function () {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = this.storage) === null || _a === void 0 ? void 0 : _a.clear();\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return BrowserStorage;\n}());\nexport { BrowserStorage };\n//# sourceMappingURL=browser-storage.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nimport { BrowserStorage } from './browser-storage';\nvar MAX_ARRAY_LENGTH = 1000;\nvar LocalStorage = /** @class */ (function (_super) {\n    __extends(LocalStorage, _super);\n    function LocalStorage(config) {\n        var _this = this;\n        var _a;\n        _this = _super.call(this, (_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.localStorage) || this;\n        _this.loggerProvider = config === null || config === void 0 ? void 0 : config.loggerProvider;\n        return _this;\n    }\n    LocalStorage.prototype.set = function (key, value) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var droppedEventsCount;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(Array.isArray(value) && value.length > MAX_ARRAY_LENGTH)) return [3 /*break*/, 2];\n                        droppedEventsCount = value.length - MAX_ARRAY_LENGTH;\n                        return [4 /*yield*/, _super.prototype.set.call(this, key, value.slice(0, MAX_ARRAY_LENGTH))];\n                    case 1:\n                        _b.sent();\n                        (_a = this.loggerProvider) === null || _a === void 0 ? void 0 : _a.error(\"Failed to save \".concat(droppedEventsCount, \" events because the queue length exceeded \").concat(MAX_ARRAY_LENGTH, \".\"));\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, _super.prototype.set.call(this, key, value)];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return LocalStorage;\n}(BrowserStorage));\nexport { LocalStorage };\n//# sourceMappingURL=local-storage.js.map","import { __extends } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nimport { BrowserStorage } from './browser-storage';\nvar SessionStorage = /** @class */ (function (_super) {\n    __extends(SessionStorage, _super);\n    function SessionStorage() {\n        var _a;\n        return _super.call(this, (_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.sessionStorage) || this;\n    }\n    return SessionStorage;\n}(BrowserStorage));\nexport { SessionStorage };\n//# sourceMappingURL=session-storage.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar XHRTransport = /** @class */ (function (_super) {\n    __extends(XHRTransport, _super);\n    function XHRTransport() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            done: 4,\n        };\n        return _this;\n    }\n    XHRTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        /* istanbul ignore if */\n                        if (typeof XMLHttpRequest === 'undefined') {\n                            reject(new Error('XHRTransport is not supported.'));\n                        }\n                        var xhr = new XMLHttpRequest();\n                        xhr.open('POST', serverUrl, true);\n                        xhr.onreadystatechange = function () {\n                            if (xhr.readyState === _this.state.done) {\n                                try {\n                                    var responsePayload = xhr.responseText;\n                                    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                                    var parsedResponsePayload = JSON.parse(responsePayload);\n                                    var result = _this.buildResponse(parsedResponsePayload);\n                                    resolve(result);\n                                }\n                                catch (e) {\n                                    reject(e);\n                                }\n                            }\n                        };\n                        xhr.setRequestHeader('Content-Type', 'application/json');\n                        xhr.setRequestHeader('Accept', '*/*');\n                        xhr.send(JSON.stringify(payload));\n                    })];\n            });\n        });\n    };\n    return XHRTransport;\n}(BaseTransport));\nexport { XHRTransport };\n//# sourceMappingURL=xhr.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar SendBeaconTransport = /** @class */ (function (_super) {\n    __extends(SendBeaconTransport, _super);\n    function SendBeaconTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SendBeaconTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var globalScope = getGlobalScope();\n                        /* istanbul ignore if */\n                        if (!(globalScope === null || globalScope === void 0 ? void 0 : globalScope.navigator.sendBeacon)) {\n                            throw new Error('SendBeaconTransport is not supported');\n                        }\n                        try {\n                            var data = JSON.stringify(payload);\n                            var success = globalScope.navigator.sendBeacon(serverUrl, JSON.stringify(payload));\n                            if (success) {\n                                return resolve(_this.buildResponse({\n                                    code: 200,\n                                    events_ingested: payload.events.length,\n                                    payload_size_bytes: data.length,\n                                    server_upload_time: Date.now(),\n                                }));\n                            }\n                            return resolve(_this.buildResponse({ code: 500 }));\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                    })];\n            });\n        });\n    };\n    return SendBeaconTransport;\n}(BaseTransport));\nexport { SendBeaconTransport };\n//# sourceMappingURL=send-beacon.js.map","import { __awaiter, __generator, __read } from \"tslib\";\nimport { getOldCookieName } from '@amplitude/analytics-client-common';\nexport var parseLegacyCookies = function (apiKey, cookieStorage, deleteLegacyCookies) {\n    if (deleteLegacyCookies === void 0) { deleteLegacyCookies = true; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var cookieName, cookies, _a, deviceId, userId, optOut, sessionId, lastEventTime, lastEventId;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    cookieName = getOldCookieName(apiKey);\n                    return [4 /*yield*/, cookieStorage.getRaw(cookieName)];\n                case 1:\n                    cookies = _b.sent();\n                    if (!cookies) {\n                        return [2 /*return*/, {\n                                optOut: false,\n                            }];\n                    }\n                    if (!deleteLegacyCookies) return [3 /*break*/, 3];\n                    return [4 /*yield*/, cookieStorage.remove(cookieName)];\n                case 2:\n                    _b.sent();\n                    _b.label = 3;\n                case 3:\n                    _a = __read(cookies.split('.'), 6), deviceId = _a[0], userId = _a[1], optOut = _a[2], sessionId = _a[3], lastEventTime = _a[4], lastEventId = _a[5];\n                    return [2 /*return*/, {\n                            deviceId: deviceId,\n                            userId: decode(userId),\n                            sessionId: parseTime(sessionId),\n                            lastEventId: parseTime(lastEventId),\n                            lastEventTime: parseTime(lastEventTime),\n                            optOut: Boolean(optOut),\n                        }];\n            }\n        });\n    });\n};\nexport var parseTime = function (num) {\n    var integer = parseInt(num, 32);\n    if (isNaN(integer)) {\n        return undefined;\n    }\n    return integer;\n};\nexport var decode = function (value) {\n    if (!atob || !escape || !value) {\n        return undefined;\n    }\n    try {\n        return decodeURIComponent(escape(atob(value)));\n    }\n    catch (_a) {\n        return undefined;\n    }\n};\n//# sourceMappingURL=index.js.map","export var DEFAULT_EVENT_PREFIX = '[Amplitude]';\nexport var DEFAULT_PAGE_VIEW_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Page Viewed\");\nexport var DEFAULT_FORM_START_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Started\");\nexport var DEFAULT_FORM_SUBMIT_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Submitted\");\nexport var DEFAULT_FILE_DOWNLOAD_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Downloaded\");\nexport var DEFAULT_SESSION_START_EVENT = 'session_start';\nexport var DEFAULT_SESSION_END_EVENT = 'session_end';\nexport var FILE_EXTENSION = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Extension\");\nexport var FILE_NAME = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Name\");\nexport var LINK_ID = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link ID\");\nexport var LINK_TEXT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link Text\");\nexport var LINK_URL = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link URL\");\nexport var FORM_ID = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form ID\");\nexport var FORM_NAME = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Name\");\nexport var FORM_DESTINATION = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Destination\");\nexport var DEFAULT_IDENTITY_STORAGE = 'cookie';\nexport var DEFAULT_SERVER_ZONE = 'US';\n//# sourceMappingURL=constants.js.map","import { __assign, __awaiter, __extends, __generator } from \"tslib\";\nimport { LogLevel, } from '@amplitude/analytics-types';\nimport { Config, Logger, MemoryStorage, UUID } from '@amplitude/analytics-core';\nimport { CookieStorage, getCookieName, FetchTransport, getQueryParams } from '@amplitude/analytics-client-common';\nimport { LocalStorage } from './storage/local-storage';\nimport { SessionStorage } from './storage/session-storage';\nimport { XHRTransport } from './transports/xhr';\nimport { SendBeaconTransport } from './transports/send-beacon';\nimport { parseLegacyCookies } from './cookie-migration';\nimport { DEFAULT_IDENTITY_STORAGE, DEFAULT_SERVER_ZONE } from './constants';\n// Exported for testing purposes only. Do not expose to public interface.\nvar BrowserConfig = /** @class */ (function (_super) {\n    __extends(BrowserConfig, _super);\n    function BrowserConfig(apiKey, appVersion, cookieStorage, cookieOptions, defaultTracking, deviceId, flushIntervalMillis, flushMaxRetries, flushQueueSize, identityStorage, ingestionMetadata, instanceName, lastEventId, lastEventTime, loggerProvider, logLevel, minIdLength, optOut, partnerId, plan, serverUrl, serverZone, sessionId, sessionTimeout, storageProvider, trackingOptions, transport, useBatch, userId) {\n        if (cookieStorage === void 0) { cookieStorage = new MemoryStorage(); }\n        if (cookieOptions === void 0) { cookieOptions = {\n            domain: '',\n            expiration: 365,\n            sameSite: 'Lax',\n            secure: false,\n            upgrade: true,\n        }; }\n        if (flushIntervalMillis === void 0) { flushIntervalMillis = 1000; }\n        if (flushMaxRetries === void 0) { flushMaxRetries = 5; }\n        if (flushQueueSize === void 0) { flushQueueSize = 30; }\n        if (identityStorage === void 0) { identityStorage = DEFAULT_IDENTITY_STORAGE; }\n        if (loggerProvider === void 0) { loggerProvider = new Logger(); }\n        if (logLevel === void 0) { logLevel = LogLevel.Warn; }\n        if (optOut === void 0) { optOut = false; }\n        if (serverUrl === void 0) { serverUrl = ''; }\n        if (serverZone === void 0) { serverZone = DEFAULT_SERVER_ZONE; }\n        if (sessionTimeout === void 0) { sessionTimeout = 30 * 60 * 1000; }\n        if (storageProvider === void 0) { storageProvider = new LocalStorage({ loggerProvider: loggerProvider }); }\n        if (trackingOptions === void 0) { trackingOptions = {\n            ipAddress: true,\n            language: true,\n            platform: true,\n        }; }\n        if (transport === void 0) { transport = 'fetch'; }\n        if (useBatch === void 0) { useBatch = false; }\n        var _this = _super.call(this, { apiKey: apiKey, storageProvider: storageProvider, transportProvider: createTransport(transport) }) || this;\n        _this.apiKey = apiKey;\n        _this.appVersion = appVersion;\n        _this.cookieOptions = cookieOptions;\n        _this.defaultTracking = defaultTracking;\n        _this.flushIntervalMillis = flushIntervalMillis;\n        _this.flushMaxRetries = flushMaxRetries;\n        _this.flushQueueSize = flushQueueSize;\n        _this.identityStorage = identityStorage;\n        _this.ingestionMetadata = ingestionMetadata;\n        _this.instanceName = instanceName;\n        _this.loggerProvider = loggerProvider;\n        _this.logLevel = logLevel;\n        _this.minIdLength = minIdLength;\n        _this.partnerId = partnerId;\n        _this.plan = plan;\n        _this.serverUrl = serverUrl;\n        _this.serverZone = serverZone;\n        _this.sessionTimeout = sessionTimeout;\n        _this.storageProvider = storageProvider;\n        _this.trackingOptions = trackingOptions;\n        _this.transport = transport;\n        _this.useBatch = useBatch;\n        _this._optOut = false;\n        _this._cookieStorage = cookieStorage;\n        _this.deviceId = deviceId;\n        _this.lastEventId = lastEventId;\n        _this.lastEventTime = lastEventTime;\n        _this.optOut = optOut;\n        _this.sessionId = sessionId;\n        _this.userId = userId;\n        _this.loggerProvider.enable(_this.logLevel);\n        return _this;\n    }\n    Object.defineProperty(BrowserConfig.prototype, \"cookieStorage\", {\n        get: function () {\n            return this._cookieStorage;\n        },\n        set: function (cookieStorage) {\n            if (this._cookieStorage !== cookieStorage) {\n                this._cookieStorage = cookieStorage;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"deviceId\", {\n        get: function () {\n            return this._deviceId;\n        },\n        set: function (deviceId) {\n            if (this._deviceId !== deviceId) {\n                this._deviceId = deviceId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"userId\", {\n        get: function () {\n            return this._userId;\n        },\n        set: function (userId) {\n            if (this._userId !== userId) {\n                this._userId = userId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"sessionId\", {\n        get: function () {\n            return this._sessionId;\n        },\n        set: function (sessionId) {\n            if (this._sessionId !== sessionId) {\n                this._sessionId = sessionId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"optOut\", {\n        get: function () {\n            return this._optOut;\n        },\n        set: function (optOut) {\n            if (this._optOut !== optOut) {\n                this._optOut = optOut;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"lastEventTime\", {\n        get: function () {\n            return this._lastEventTime;\n        },\n        set: function (lastEventTime) {\n            if (this._lastEventTime !== lastEventTime) {\n                this._lastEventTime = lastEventTime;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"lastEventId\", {\n        get: function () {\n            return this._lastEventId;\n        },\n        set: function (lastEventId) {\n            if (this._lastEventId !== lastEventId) {\n                this._lastEventId = lastEventId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BrowserConfig.prototype.updateStorage = function () {\n        var cache = {\n            deviceId: this._deviceId,\n            userId: this._userId,\n            sessionId: this._sessionId,\n            optOut: this._optOut,\n            lastEventTime: this._lastEventTime,\n            lastEventId: this._lastEventId,\n        };\n        void this.cookieStorage.set(getCookieName(this.apiKey), cache);\n    };\n    return BrowserConfig;\n}(Config));\nexport { BrowserConfig };\nexport var useBrowserConfig = function (apiKey, options, amplitudeInstance) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var identityStorage, cookieOptions, _a, _b, cookieStorage, legacyCookies, previousCookies, queryParams, deviceId, lastEventId, lastEventTime, optOut, sessionId, userId, trackingOptions;\n        var _c;\n        var _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1;\n        return __generator(this, function (_2) {\n            switch (_2.label) {\n                case 0:\n                    identityStorage = options.identityStorage || DEFAULT_IDENTITY_STORAGE;\n                    _c = {};\n                    if (!(identityStorage !== DEFAULT_IDENTITY_STORAGE)) return [3 /*break*/, 1];\n                    _a = '';\n                    return [3 /*break*/, 5];\n                case 1:\n                    if (!((_e = (_d = options.cookieOptions) === null || _d === void 0 ? void 0 : _d.domain) !== null && _e !== void 0)) return [3 /*break*/, 2];\n                    _b = _e;\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, getTopLevelDomain()];\n                case 3:\n                    _b = (_2.sent());\n                    _2.label = 4;\n                case 4:\n                    _a = _b;\n                    _2.label = 5;\n                case 5:\n                    cookieOptions = __assign.apply(void 0, [(_c.domain = _a, _c.expiration = 365, _c.sameSite = 'Lax', _c.secure = false, _c.upgrade = true, _c), options.cookieOptions]);\n                    cookieStorage = createCookieStorage(options.identityStorage, cookieOptions);\n                    return [4 /*yield*/, parseLegacyCookies(apiKey, cookieStorage, (_g = (_f = options.cookieOptions) === null || _f === void 0 ? void 0 : _f.upgrade) !== null && _g !== void 0 ? _g : true)];\n                case 6:\n                    legacyCookies = _2.sent();\n                    return [4 /*yield*/, cookieStorage.get(getCookieName(apiKey))];\n                case 7:\n                    previousCookies = _2.sent();\n                    queryParams = getQueryParams();\n                    deviceId = (_l = (_k = (_j = (_h = options.deviceId) !== null && _h !== void 0 ? _h : queryParams.deviceId) !== null && _j !== void 0 ? _j : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.deviceId) !== null && _k !== void 0 ? _k : legacyCookies.deviceId) !== null && _l !== void 0 ? _l : UUID();\n                    lastEventId = (_m = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.lastEventId) !== null && _m !== void 0 ? _m : legacyCookies.lastEventId;\n                    lastEventTime = (_o = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.lastEventTime) !== null && _o !== void 0 ? _o : legacyCookies.lastEventTime;\n                    optOut = (_q = (_p = options.optOut) !== null && _p !== void 0 ? _p : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.optOut) !== null && _q !== void 0 ? _q : legacyCookies.optOut;\n                    sessionId = (_r = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.sessionId) !== null && _r !== void 0 ? _r : legacyCookies.sessionId;\n                    userId = (_t = (_s = options.userId) !== null && _s !== void 0 ? _s : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.userId) !== null && _t !== void 0 ? _t : legacyCookies.userId;\n                    amplitudeInstance.previousSessionDeviceId = (_u = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.deviceId) !== null && _u !== void 0 ? _u : legacyCookies.deviceId;\n                    amplitudeInstance.previousSessionUserId = (_v = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.userId) !== null && _v !== void 0 ? _v : legacyCookies.userId;\n                    trackingOptions = {\n                        ipAddress: (_x = (_w = options.trackingOptions) === null || _w === void 0 ? void 0 : _w.ipAddress) !== null && _x !== void 0 ? _x : true,\n                        language: (_z = (_y = options.trackingOptions) === null || _y === void 0 ? void 0 : _y.language) !== null && _z !== void 0 ? _z : true,\n                        platform: (_1 = (_0 = options.trackingOptions) === null || _0 === void 0 ? void 0 : _0.platform) !== null && _1 !== void 0 ? _1 : true,\n                    };\n                    return [2 /*return*/, new BrowserConfig(apiKey, options.appVersion, cookieStorage, cookieOptions, options.defaultTracking, deviceId, options.flushIntervalMillis, options.flushMaxRetries, options.flushQueueSize, identityStorage, options.ingestionMetadata, options.instanceName, lastEventId, lastEventTime, options.loggerProvider, options.logLevel, options.minIdLength, optOut, options.partnerId, options.plan, options.serverUrl, options.serverZone, sessionId, options.sessionTimeout, options.storageProvider, trackingOptions, options.transport, options.useBatch, userId)];\n            }\n        });\n    });\n};\nexport var createCookieStorage = function (identityStorage, cookieOptions) {\n    if (identityStorage === void 0) { identityStorage = DEFAULT_IDENTITY_STORAGE; }\n    if (cookieOptions === void 0) { cookieOptions = {}; }\n    switch (identityStorage) {\n        case 'localStorage':\n            return new LocalStorage();\n        case 'sessionStorage':\n            return new SessionStorage();\n        case 'none':\n            return new MemoryStorage();\n        case 'cookie':\n        default:\n            return new CookieStorage(__assign(__assign({}, cookieOptions), { expirationDays: cookieOptions.expiration }));\n    }\n};\nexport var createTransport = function (transport) {\n    if (transport === 'xhr') {\n        return new XHRTransport();\n    }\n    if (transport === 'beacon') {\n        return new SendBeaconTransport();\n    }\n    return new FetchTransport();\n};\nexport var getTopLevelDomain = function (url) { return __awaiter(void 0, void 0, void 0, function () {\n    var host, parts, levels, storageKey, i, i, domain, options, storage, value;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, new CookieStorage().isEnabled()];\n            case 1:\n                if (!(_a.sent()) || (!url && typeof location === 'undefined')) {\n                    return [2 /*return*/, ''];\n                }\n                host = url !== null && url !== void 0 ? url : location.hostname;\n                parts = host.split('.');\n                levels = [];\n                storageKey = 'AMP_TLDTEST';\n                for (i = parts.length - 2; i >= 0; --i) {\n                    levels.push(parts.slice(i).join('.'));\n                }\n                i = 0;\n                _a.label = 2;\n            case 2:\n                if (!(i < levels.length)) return [3 /*break*/, 7];\n                domain = levels[i];\n                options = { domain: '.' + domain };\n                storage = new CookieStorage(options);\n                return [4 /*yield*/, storage.set(storageKey, 1)];\n            case 3:\n                _a.sent();\n                return [4 /*yield*/, storage.get(storageKey)];\n            case 4:\n                value = _a.sent();\n                if (!value) return [3 /*break*/, 6];\n                return [4 /*yield*/, storage.remove(storageKey)];\n            case 5:\n                _a.sent();\n                return [2 /*return*/, '.' + domain];\n            case 6:\n                i++;\n                return [3 /*break*/, 2];\n            case 7: return [2 /*return*/, ''];\n        }\n    });\n}); };\n//# sourceMappingURL=config.js.map","export var UTM_CAMPAIGN = 'utm_campaign';\nexport var UTM_CONTENT = 'utm_content';\nexport var UTM_ID = 'utm_id';\nexport var UTM_MEDIUM = 'utm_medium';\nexport var UTM_SOURCE = 'utm_source';\nexport var UTM_TERM = 'utm_term';\nexport var DCLID = 'dclid';\nexport var FBCLID = 'fbclid';\nexport var GBRAID = 'gbraid';\nexport var GCLID = 'gclid';\nexport var KO_CLICK_ID = 'ko_click_id';\nexport var LI_FAT_ID = 'li_fat_id';\nexport var MSCLKID = 'msclkid';\nexport var RDT_CID = 'rtd_cid';\nexport var TTCLID = 'ttclid';\nexport var TWCLID = 'twclid';\nexport var WBRAID = 'wbraid';\nexport var EMPTY_VALUE = 'EMPTY';\nexport var BASE_CAMPAIGN = {\n    utm_campaign: undefined,\n    utm_content: undefined,\n    utm_id: undefined,\n    utm_medium: undefined,\n    utm_source: undefined,\n    utm_term: undefined,\n    referrer: undefined,\n    referring_domain: undefined,\n    dclid: undefined,\n    gbraid: undefined,\n    gclid: undefined,\n    fbclid: undefined,\n    ko_click_id: undefined,\n    li_fat_id: undefined,\n    msclkid: undefined,\n    rtd_cid: undefined,\n    ttclid: undefined,\n    twclid: undefined,\n    wbraid: undefined,\n};\nexport var MKTG = 'MKTG';\n//# sourceMappingURL=constants.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { getQueryParams } from '../query-params';\nimport { UTM_CAMPAIGN, UTM_CONTENT, UTM_MEDIUM, UTM_SOURCE, UTM_TERM, GCLID, FBCLID, BASE_CAMPAIGN, DCLID, MSCLKID, RDT_CID, TWCLID, TTCLID, KO_CLICK_ID, LI_FAT_ID, GBRAID, WBRAID, UTM_ID, } from './constants';\nvar CampaignParser = /** @class */ (function () {\n    function CampaignParser() {\n    }\n    CampaignParser.prototype.parse = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, __assign(__assign(__assign(__assign({}, BASE_CAMPAIGN), this.getUtmParam()), this.getReferrer()), this.getClickIds())];\n            });\n        });\n    };\n    CampaignParser.prototype.getUtmParam = function () {\n        var params = getQueryParams();\n        var utmCampaign = params[UTM_CAMPAIGN];\n        var utmContent = params[UTM_CONTENT];\n        var utmId = params[UTM_ID];\n        var utmMedium = params[UTM_MEDIUM];\n        var utmSource = params[UTM_SOURCE];\n        var utmTerm = params[UTM_TERM];\n        return {\n            utm_campaign: utmCampaign,\n            utm_content: utmContent,\n            utm_id: utmId,\n            utm_medium: utmMedium,\n            utm_source: utmSource,\n            utm_term: utmTerm,\n        };\n    };\n    CampaignParser.prototype.getReferrer = function () {\n        var _a, _b;\n        var data = {\n            referrer: undefined,\n            referring_domain: undefined,\n        };\n        try {\n            data.referrer = document.referrer || undefined;\n            data.referring_domain = (_b = (_a = data.referrer) === null || _a === void 0 ? void 0 : _a.split('/')[2]) !== null && _b !== void 0 ? _b : undefined;\n        }\n        catch (_c) {\n            // nothing to track\n        }\n        return data;\n    };\n    CampaignParser.prototype.getClickIds = function () {\n        var _a;\n        var params = getQueryParams();\n        return _a = {},\n            _a[DCLID] = params[DCLID],\n            _a[FBCLID] = params[FBCLID],\n            _a[GBRAID] = params[GBRAID],\n            _a[GCLID] = params[GCLID],\n            _a[KO_CLICK_ID] = params[KO_CLICK_ID],\n            _a[LI_FAT_ID] = params[LI_FAT_ID],\n            _a[MSCLKID] = params[MSCLKID],\n            _a[RDT_CID] = params[RDT_CID],\n            _a[TTCLID] = params[TTCLID],\n            _a[TWCLID] = params[TWCLID],\n            _a[WBRAID] = params[WBRAID],\n            _a;\n    };\n    return CampaignParser;\n}());\nexport { CampaignParser };\n//# sourceMappingURL=campaign-parser.js.map","import { __assign, __read, __rest } from \"tslib\";\nimport { BASE_CAMPAIGN } from '@amplitude/analytics-client-common';\nimport { AMPLITUDE_PREFIX, createIdentifyEvent, Identify } from '@amplitude/analytics-core';\nexport var getStorageKey = function (apiKey, postKey, limit) {\n    if (postKey === void 0) { postKey = ''; }\n    if (limit === void 0) { limit = 10; }\n    return [AMPLITUDE_PREFIX, postKey, apiKey.substring(0, limit)].filter(Boolean).join('_');\n};\nvar domainWithoutSubdomain = function (domain) {\n    var parts = domain.split('.');\n    if (parts.length <= 2) {\n        return domain;\n    }\n    return parts.slice(parts.length - 2, parts.length).join('.');\n};\n//Direct traffic mean no external referral, no UTMs, no click-ids, and no other customer identified marketing campaign url params.\nvar isDirectTraffic = function (current) {\n    return Object.values(current).every(function (value) { return !value; });\n};\nexport var isNewCampaign = function (current, previous, options, isNewSession) {\n    if (isNewSession === void 0) { isNewSession = true; }\n    var referrer = current.referrer, referring_domain = current.referring_domain, currentCampaign = __rest(current, [\"referrer\", \"referring_domain\"]);\n    var _a = previous || {}, _previous_referrer = _a.referrer, prevReferringDomain = _a.referring_domain, previousCampaign = __rest(_a, [\"referrer\", \"referring_domain\"]);\n    if (isExcludedReferrer(options.excludeReferrers, current.referring_domain)) {\n        return false;\n    }\n    //In the same session, direct traffic should not override or unset any persisting query params\n    if (!isNewSession && isDirectTraffic(current) && previous) {\n        return false;\n    }\n    var hasNewCampaign = JSON.stringify(currentCampaign) !== JSON.stringify(previousCampaign);\n    var hasNewDomain = domainWithoutSubdomain(referring_domain || '') !== domainWithoutSubdomain(prevReferringDomain || '');\n    return !previous || hasNewCampaign || hasNewDomain;\n};\nexport var isExcludedReferrer = function (excludeReferrers, referringDomain) {\n    if (excludeReferrers === void 0) { excludeReferrers = []; }\n    if (referringDomain === void 0) { referringDomain = ''; }\n    return excludeReferrers.some(function (value) {\n        return value instanceof RegExp ? value.test(referringDomain) : value === referringDomain;\n    });\n};\nexport var createCampaignEvent = function (campaign, options) {\n    var campaignParameters = __assign(__assign({}, BASE_CAMPAIGN), campaign);\n    var identifyEvent = Object.entries(campaignParameters).reduce(function (identify, _a) {\n        var _b;\n        var _c = __read(_a, 2), key = _c[0], value = _c[1];\n        identify.setOnce(\"initial_\".concat(key), (_b = value !== null && value !== void 0 ? value : options.initialEmptyValue) !== null && _b !== void 0 ? _b : 'EMPTY');\n        if (value) {\n            return identify.set(key, value);\n        }\n        return identify.unset(key);\n    }, new Identify());\n    return createIdentifyEvent(identifyEvent);\n};\nexport var getDefaultExcludedReferrers = function (cookieDomain) {\n    var domain = cookieDomain;\n    if (domain) {\n        if (domain.startsWith('.')) {\n            domain = domain.substring(1);\n        }\n        return [new RegExp(\"\".concat(domain.replace('.', '\\\\.'), \"$\"))];\n    }\n    return [];\n};\n//# sourceMappingURL=helpers.js.map","import { __assign, __awaiter, __generator, __read } from \"tslib\";\nimport { CampaignParser } from '@amplitude/analytics-client-common';\nimport { createCampaignEvent, getDefaultExcludedReferrers, getStorageKey, isNewCampaign } from './helpers';\nimport { isNewSession } from '@amplitude/analytics-client-common';\nexport var webAttributionPlugin = function (options) {\n    var _this = this;\n    if (options === void 0) { options = {}; }\n    var plugin = {\n        name: '@amplitude/plugin-web-attribution-browser',\n        type: 'before',\n        setup: function (config, amplitude) {\n            var _a;\n            return __awaiter(this, void 0, void 0, function () {\n                var pluginConfig, storage, storageKey, _b, currentCampaign, previousCampaign, isEventInNewSession, campaignEvent;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0:\n                            pluginConfig = __assign({ initialEmptyValue: 'EMPTY', resetSessionOnNewCampaign: false, excludeReferrers: getDefaultExcludedReferrers((_a = config.cookieOptions) === null || _a === void 0 ? void 0 : _a.domain) }, options);\n                            config.loggerProvider.log('Installing @amplitude/plugin-web-attribution-browser.');\n                            storage = config.cookieStorage;\n                            storageKey = getStorageKey(config.apiKey, 'MKTG');\n                            return [4 /*yield*/, Promise.all([\n                                    new CampaignParser().parse(),\n                                    storage.get(storageKey),\n                                ])];\n                        case 1:\n                            _b = __read.apply(void 0, [_c.sent(), 2]), currentCampaign = _b[0], previousCampaign = _b[1];\n                            isEventInNewSession = isNewSession(config.sessionTimeout, config.lastEventTime);\n                            if (isNewCampaign(currentCampaign, previousCampaign, pluginConfig, isEventInNewSession)) {\n                                if (pluginConfig.resetSessionOnNewCampaign) {\n                                    amplitude.setSessionId(Date.now());\n                                    config.loggerProvider.log('Created a new session for new campaign.');\n                                }\n                                config.loggerProvider.log('Tracking attribution.');\n                                campaignEvent = createCampaignEvent(currentCampaign, pluginConfig);\n                                amplitude.track(campaignEvent);\n                                void storage.set(storageKey, currentCampaign);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        execute: function (event) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n            return [2 /*return*/, event];\n        }); }); },\n    };\n    return plugin;\n};\n//# sourceMappingURL=web-attribution.js.map","export var omitUndefined = function (input) {\n    var obj = {};\n    for (var key in input) {\n        var val = input[key];\n        if (val) {\n            obj[key] = val;\n        }\n    }\n    return obj;\n};\n//# sourceMappingURL=utils.js.map","import { __assign, __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nimport { CampaignParser, getGlobalScope } from '@amplitude/analytics-client-common';\nimport { IdentifyOperation, } from '@amplitude/analytics-types';\nimport { BASE_CAMPAIGN } from '@amplitude/analytics-client-common';\nimport { omitUndefined } from './utils';\nexport var pageViewTrackingPlugin = function (options) {\n    if (options === void 0) { options = {}; }\n    var amplitude;\n    var globalScope = getGlobalScope();\n    var loggerProvider = undefined;\n    var pushState;\n    var createPageViewEvent = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var _a;\n        var _b;\n        var _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    _b = {\n                        event_type: (_c = options.eventType) !== null && _c !== void 0 ? _c : '[Amplitude] Page Viewed'\n                    };\n                    _a = [{}];\n                    return [4 /*yield*/, getCampaignParams()];\n                case 1: return [2 /*return*/, (_b.event_properties = __assign.apply(void 0, [__assign.apply(void 0, _a.concat([(_d.sent())])), { '[Amplitude] Page Domain': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.hostname) || '', '[Amplitude] Page Location': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.href) || '', '[Amplitude] Page Path': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.pathname) || '', '[Amplitude] Page Title': /* istanbul ignore next */ (typeof document !== 'undefined' && document.title) || '', '[Amplitude] Page URL': \n                            /* istanbul ignore next */ (typeof location !== 'undefined' && location.href.split('?')[0]) || '' }]),\n                        _b)];\n            }\n        });\n    }); };\n    var shouldTrackOnPageLoad = function () {\n        return typeof options.trackOn === 'undefined' || (typeof options.trackOn === 'function' && options.trackOn());\n    };\n    /* istanbul ignore next */\n    var previousURL = typeof location !== 'undefined' ? location.href : null;\n    var trackHistoryPageView = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var newURL, shouldTrackPageView, _a, _b, _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    newURL = location.href;\n                    shouldTrackPageView = shouldTrackHistoryPageView(options.trackHistoryChanges, newURL, previousURL || '') && shouldTrackOnPageLoad();\n                    // Note: Update `previousURL` in the same clock tick as `shouldTrackHistoryPageView()`\n                    // This was previously done after `amplitude?.track(await createPageViewEvent());` and\n                    // causes a concurrency issue where app triggers `pushState` twice with the same URL target\n                    // but `previousURL` is only updated after the second `pushState` producing two page viewed events\n                    previousURL = newURL;\n                    if (!shouldTrackPageView) return [3 /*break*/, 4];\n                    /* istanbul ignore next */\n                    loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Tracking page view event');\n                    if (!(amplitude === null || amplitude === void 0)) return [3 /*break*/, 1];\n                    _a = void 0;\n                    return [3 /*break*/, 3];\n                case 1:\n                    _c = (_b = amplitude).track;\n                    return [4 /*yield*/, createPageViewEvent()];\n                case 2:\n                    _a = _c.apply(_b, [_d.sent()]);\n                    _d.label = 3;\n                case 3:\n                    _a;\n                    _d.label = 4;\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    /* istanbul ignore next */\n    var trackHistoryPageViewWrapper = function () {\n        void trackHistoryPageView();\n    };\n    var plugin = {\n        name: '@amplitude/plugin-page-view-tracking-browser',\n        type: 'enrichment',\n        setup: function (config, client) { return __awaiter(void 0, void 0, void 0, function () {\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        amplitude = client;\n                        loggerProvider = config.loggerProvider;\n                        loggerProvider.log('Installing @amplitude/plugin-page-view-tracking-browser');\n                        if (globalScope) {\n                            globalScope.addEventListener('popstate', trackHistoryPageViewWrapper);\n                            // Save reference to original push state, to be used in teardown\n                            // eslint-disable-next-line @typescript-eslint/unbound-method\n                            pushState = globalScope.history.pushState;\n                            /* istanbul ignore next */\n                            // There is no global browser listener for changes to history, so we have\n                            // to modify pushState directly.\n                            // https://stackoverflow.com/a/64927639\n                            // eslint-disable-next-line @typescript-eslint/unbound-method\n                            globalScope.history.pushState = new Proxy(globalScope.history.pushState, {\n                                apply: function (target, thisArg, _a) {\n                                    var _b = __read(_a, 3), state = _b[0], unused = _b[1], url = _b[2];\n                                    target.apply(thisArg, [state, unused, url]);\n                                    void trackHistoryPageView();\n                                },\n                            });\n                        }\n                        if (!shouldTrackOnPageLoad()) return [3 /*break*/, 2];\n                        loggerProvider.log('Tracking page view event');\n                        _b = (_a = amplitude).track;\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        _b.apply(_a, [_c.sent()]);\n                        _c.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        }); },\n        execute: function (event) { return __awaiter(void 0, void 0, void 0, function () {\n            var pageViewEvent;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(options.trackOn === 'attribution' && isCampaignEvent(event))) return [3 /*break*/, 2];\n                        /* istanbul ignore next */ // loggerProvider should be defined by the time execute is invoked\n                        loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Enriching campaign event to page view event with campaign parameters');\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        pageViewEvent = _a.sent();\n                        event.event_type = pageViewEvent.event_type;\n                        event.event_properties = __assign(__assign({}, event.event_properties), pageViewEvent.event_properties);\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, event];\n                }\n            });\n        }); },\n        teardown: function () { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (globalScope) {\n                    globalScope.removeEventListener('popstate', trackHistoryPageViewWrapper);\n                    if (pushState) {\n                        globalScope.history.pushState = pushState;\n                    }\n                }\n                return [2 /*return*/];\n            });\n        }); },\n    };\n    return plugin;\n};\nvar getCampaignParams = function () { return __awaiter(void 0, void 0, void 0, function () { var _a; return __generator(this, function (_b) {\n    switch (_b.label) {\n        case 0:\n            _a = omitUndefined;\n            return [4 /*yield*/, new CampaignParser().parse()];\n        case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n    }\n}); }); };\nvar isCampaignEvent = function (event) {\n    if (event.event_type === '$identify' && event.user_properties) {\n        var properties = event.user_properties;\n        var $set = properties[IdentifyOperation.SET] || {};\n        var $unset = properties[IdentifyOperation.UNSET] || {};\n        var userProperties_1 = __spreadArray(__spreadArray([], __read(Object.keys($set)), false), __read(Object.keys($unset)), false);\n        return Object.keys(BASE_CAMPAIGN).every(function (value) { return userProperties_1.includes(value); });\n    }\n    return false;\n};\nexport var shouldTrackHistoryPageView = function (trackingOption, newURL, oldURL) {\n    switch (trackingOption) {\n        case 'pathOnly':\n            return newURL.split('?')[0] !== oldURL.split('?')[0];\n        default:\n            return newURL !== oldURL;\n    }\n};\n//# sourceMappingURL=page-view-tracking.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { DEFAULT_FORM_START_EVENT, DEFAULT_FORM_SUBMIT_EVENT, FORM_ID, FORM_NAME, FORM_DESTINATION, } from '../constants';\nexport var formInteractionTracking = function () {\n    var observer;\n    var eventListeners = [];\n    var addEventListener = function (element, type, handler) {\n        element.addEventListener(type, handler);\n        eventListeners.push({\n            element: element,\n            type: type,\n            handler: handler,\n        });\n    };\n    var removeClickListeners = function () {\n        eventListeners.forEach(function (_a) {\n            var element = _a.element, type = _a.type, handler = _a.handler;\n            /* istanbul ignore next */\n            element === null || element === void 0 ? void 0 : element.removeEventListener(type, handler);\n        });\n        eventListeners = [];\n    };\n    var name = '@amplitude/plugin-form-interaction-tracking-browser';\n    var type = 'enrichment';\n    var setup = function (config, amplitude) { return __awaiter(void 0, void 0, void 0, function () {\n        var addFormInteractionListener, forms;\n        return __generator(this, function (_a) {\n            /* istanbul ignore if */\n            if (!amplitude) {\n                // TODO: Add required minimum version of @amplitude/analytics-browser\n                config.loggerProvider.warn('Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.');\n                return [2 /*return*/];\n            }\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') {\n                return [2 /*return*/];\n            }\n            addFormInteractionListener = function (form) {\n                var hasFormChanged = false;\n                addEventListener(form, 'change', function () {\n                    var _a;\n                    if (!hasFormChanged) {\n                        amplitude.track(DEFAULT_FORM_START_EVENT, (_a = {},\n                            _a[FORM_ID] = form.id,\n                            _a[FORM_NAME] = stringOrUndefined(form.name),\n                            _a[FORM_DESTINATION] = form.action,\n                            _a));\n                    }\n                    hasFormChanged = true;\n                });\n                addEventListener(form, 'submit', function () {\n                    var _a, _b;\n                    if (!hasFormChanged) {\n                        amplitude.track(DEFAULT_FORM_START_EVENT, (_a = {},\n                            _a[FORM_ID] = form.id,\n                            _a[FORM_NAME] = stringOrUndefined(form.name),\n                            _a[FORM_DESTINATION] = form.action,\n                            _a));\n                    }\n                    amplitude.track(DEFAULT_FORM_SUBMIT_EVENT, (_b = {},\n                        _b[FORM_ID] = form.id,\n                        _b[FORM_NAME] = stringOrUndefined(form.name),\n                        _b[FORM_DESTINATION] = form.action,\n                        _b));\n                    hasFormChanged = false;\n                });\n            };\n            forms = Array.from(document.getElementsByTagName('form'));\n            forms.forEach(addFormInteractionListener);\n            // Adds listener to anchor tags added after initial load\n            /* istanbul ignore else */\n            if (typeof MutationObserver !== 'undefined') {\n                observer = new MutationObserver(function (mutations) {\n                    mutations.forEach(function (mutation) {\n                        mutation.addedNodes.forEach(function (node) {\n                            if (node.nodeName === 'FORM') {\n                                addFormInteractionListener(node);\n                            }\n                            if ('querySelectorAll' in node && typeof node.querySelectorAll === 'function') {\n                                Array.from(node.querySelectorAll('form')).map(addFormInteractionListener);\n                            }\n                        });\n                    });\n                });\n                observer.observe(document.body, {\n                    subtree: true,\n                    childList: true,\n                });\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var execute = function (event) { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        return [2 /*return*/, event];\n    }); }); };\n    var teardown = function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n            removeClickListeners();\n            return [2 /*return*/];\n        });\n    }); };\n    return {\n        name: name,\n        type: type,\n        setup: setup,\n        execute: execute,\n        teardown: teardown,\n    };\n};\nexport var stringOrUndefined = function (name) {\n    /* istanbul ignore if */\n    if (typeof name !== 'string') {\n        // We found instances where the value of `name` is an Element and not a string.\n        // Elements may have circular references and would throw an error when passed to `JSON.stringify(...)`.\n        // If a non-string value is seen, assume there is no value.\n        return undefined;\n    }\n    return name;\n};\n//# sourceMappingURL=form-interaction-tracking.js.map","var notified = false;\nexport var detNotify = function (config) {\n    if (notified || config.defaultTracking !== undefined) {\n        return;\n    }\n    var message = \"`options.defaultTracking` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to `options.defaultTracking`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:\\n\\namplitude.init(<YOUR_API_KEY>, {\\n  defaultTracking: true,\\n});\\n\\nVisit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.\";\n    config.loggerProvider.warn(message);\n    notified = true;\n};\n/**\n * @private\n * This function is meant for testing purposes only\n */\nexport var resetNotify = function () {\n    notified = false;\n};\n//# sourceMappingURL=det-notification.js.map","import { debugWrapper, getClientLogConfig, getClientStates } from '@amplitude/analytics-core';\nimport { AmplitudeBrowser } from './browser-client';\nexport var createInstance = function () {\n    var client = new AmplitudeBrowser();\n    return {\n        init: debugWrapper(client.init.bind(client), 'init', getClientLogConfig(client), getClientStates(client, ['config'])),\n        add: debugWrapper(client.add.bind(client), 'add', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.plugins'])),\n        remove: debugWrapper(client.remove.bind(client), 'remove', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.plugins'])),\n        track: debugWrapper(client.track.bind(client), 'track', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        logEvent: debugWrapper(client.logEvent.bind(client), 'logEvent', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        identify: debugWrapper(client.identify.bind(client), 'identify', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        groupIdentify: debugWrapper(client.groupIdentify.bind(client), 'groupIdentify', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        setGroup: debugWrapper(client.setGroup.bind(client), 'setGroup', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        revenue: debugWrapper(client.revenue.bind(client), 'revenue', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        flush: debugWrapper(client.flush.bind(client), 'flush', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        getUserId: debugWrapper(client.getUserId.bind(client), 'getUserId', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId'])),\n        setUserId: debugWrapper(client.setUserId.bind(client), 'setUserId', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId'])),\n        getDeviceId: debugWrapper(client.getDeviceId.bind(client), 'getDeviceId', getClientLogConfig(client), getClientStates(client, ['config', 'config.deviceId'])),\n        setDeviceId: debugWrapper(client.setDeviceId.bind(client), 'setDeviceId', getClientLogConfig(client), getClientStates(client, ['config', 'config.deviceId'])),\n        reset: debugWrapper(client.reset.bind(client), 'reset', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId', 'config.deviceId'])),\n        getSessionId: debugWrapper(client.getSessionId.bind(client), 'getSessionId', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setSessionId: debugWrapper(client.setSessionId.bind(client), 'setSessionId', getClientLogConfig(client), getClientStates(client, ['config'])),\n        extendSession: debugWrapper(client.extendSession.bind(client), 'extendSession', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setOptOut: debugWrapper(client.setOptOut.bind(client), 'setOptOut', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setTransport: debugWrapper(client.setTransport.bind(client), 'setTransport', getClientLogConfig(client), getClientStates(client, ['config'])),\n    };\n};\nexport default createInstance();\n//# sourceMappingURL=browser-client-factory.js.map","/* eslint-disable @typescript-eslint/unbound-method */\nimport client from './browser-client-factory';\nexport { createInstance } from './browser-client-factory';\nexport var add = client.add, extendSession = client.extendSession, flush = client.flush, getDeviceId = client.getDeviceId, getSessionId = client.getSessionId, getUserId = client.getUserId, groupIdentify = client.groupIdentify, identify = client.identify, init = client.init, logEvent = client.logEvent, remove = client.remove, reset = client.reset, revenue = client.revenue, setDeviceId = client.setDeviceId, setGroup = client.setGroup, setOptOut = client.setOptOut, setSessionId = client.setSessionId, setTransport = client.setTransport, setUserId = client.setUserId, track = client.track;\nexport { runQueuedFunctions } from './utils/snippet-helper';\nexport { Revenue, Identify } from '@amplitude/analytics-core';\nimport * as Types_1 from '@amplitude/analytics-types';\nexport { Types_1 as Types };\n//# sourceMappingURL=index.js.map","import { __assign, __awaiter, __extends, __generator } from \"tslib\";\nimport { AmplitudeCore, Destination, Identify, returnWrapper, Revenue, UUID } from '@amplitude/analytics-core';\nimport { getAnalyticsConnector, getAttributionTrackingConfig, getPageViewTrackingConfig, IdentityEventSender, isAttributionTrackingEnabled, isSessionTrackingEnabled, isFileDownloadTrackingEnabled, isFormInteractionTrackingEnabled, setConnectorDeviceId, setConnectorUserId, isNewSession, } from '@amplitude/analytics-client-common';\nimport { convertProxyObjectToRealObject, isInstanceProxy } from './utils/snippet-helper';\nimport { Context } from './plugins/context';\nimport { useBrowserConfig, createTransport } from './config';\nimport { webAttributionPlugin } from '@amplitude/plugin-web-attribution-browser';\nimport { pageViewTrackingPlugin } from '@amplitude/plugin-page-view-tracking-browser';\nimport { formInteractionTracking } from './plugins/form-interaction-tracking';\nimport { fileDownloadTracking } from './plugins/file-download-tracking';\nimport { DEFAULT_SESSION_END_EVENT, DEFAULT_SESSION_START_EVENT } from './constants';\nimport { detNotify } from './det-notification';\nvar AmplitudeBrowser = /** @class */ (function (_super) {\n    __extends(AmplitudeBrowser, _super);\n    function AmplitudeBrowser() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AmplitudeBrowser.prototype.init = function (apiKey, userIdOrOptions, maybeOptions) {\n        if (apiKey === void 0) { apiKey = ''; }\n        var userId;\n        var options;\n        if (arguments.length > 2) {\n            userId = userIdOrOptions;\n            options = maybeOptions;\n        }\n        else {\n            if (typeof userIdOrOptions === 'string') {\n                userId = userIdOrOptions;\n                options = undefined;\n            }\n            else {\n                userId = userIdOrOptions === null || userIdOrOptions === void 0 ? void 0 : userIdOrOptions.userId;\n                options = userIdOrOptions;\n            }\n        }\n        return returnWrapper(this._init(__assign(__assign({}, options), { userId: userId, apiKey: apiKey })));\n    };\n    AmplitudeBrowser.prototype._init = function (options) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var browserOptions, connector, attributionTrackingOptions, webAttribution;\n            var _this = this;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        // Step 1: Block concurrent initialization\n                        if (this.initializing) {\n                            return [2 /*return*/];\n                        }\n                        this.initializing = true;\n                        return [4 /*yield*/, useBrowserConfig(options.apiKey, options, this)];\n                    case 1:\n                        browserOptions = _c.sent();\n                        return [4 /*yield*/, _super.prototype._init.call(this, browserOptions)];\n                    case 2:\n                        _c.sent();\n                        // Step 3: Set session ID\n                        // Priority 1: `options.sessionId`\n                        // Priority 2: last known sessionId from user identity storage\n                        // Default: `Date.now()`\n                        // Session ID is handled differently than device ID and user ID due to session events\n                        this.setSessionId((_b = (_a = options.sessionId) !== null && _a !== void 0 ? _a : this.config.sessionId) !== null && _b !== void 0 ? _b : Date.now());\n                        connector = getAnalyticsConnector(options.instanceName);\n                        connector.identityStore.setIdentity({\n                            userId: this.config.userId,\n                            deviceId: this.config.deviceId,\n                        });\n                        // Step 4: Install plugins\n                        // Do not track any events before this\n                        return [4 /*yield*/, this.add(new Destination()).promise];\n                    case 3:\n                        // Step 4: Install plugins\n                        // Do not track any events before this\n                        _c.sent();\n                        return [4 /*yield*/, this.add(new Context()).promise];\n                    case 4:\n                        _c.sent();\n                        return [4 /*yield*/, this.add(new IdentityEventSender()).promise];\n                    case 5:\n                        _c.sent();\n                        // Notify if DET is enabled\n                        detNotify(this.config);\n                        if (!isFileDownloadTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, this.add(fileDownloadTracking()).promise];\n                    case 6:\n                        _c.sent();\n                        _c.label = 7;\n                    case 7:\n                        if (!isFormInteractionTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, this.add(formInteractionTracking()).promise];\n                    case 8:\n                        _c.sent();\n                        _c.label = 9;\n                    case 9:\n                        if (!isAttributionTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 11];\n                        attributionTrackingOptions = getAttributionTrackingConfig(this.config);\n                        webAttribution = webAttributionPlugin(attributionTrackingOptions);\n                        return [4 /*yield*/, this.add(webAttribution).promise];\n                    case 10:\n                        _c.sent();\n                        _c.label = 11;\n                    case 11: \n                    // Add page view plugin\n                    return [4 /*yield*/, this.add(pageViewTrackingPlugin(getPageViewTrackingConfig(this.config))).promise];\n                    case 12:\n                        // Add page view plugin\n                        _c.sent();\n                        this.initializing = false;\n                        // Step 6: Run queued dispatch functions\n                        return [4 /*yield*/, this.runQueuedFunctions('dispatchQ')];\n                    case 13:\n                        // Step 6: Run queued dispatch functions\n                        _c.sent();\n                        // Step 7: Add the event receiver after running remaining queued functions.\n                        connector.eventBridge.setEventReceiver(function (event) {\n                            void _this.track(event.eventType, event.eventProperties);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeBrowser.prototype.getUserId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.userId;\n    };\n    AmplitudeBrowser.prototype.setUserId = function (userId) {\n        if (!this.config) {\n            this.q.push(this.setUserId.bind(this, userId));\n            return;\n        }\n        if (userId !== this.config.userId || userId === undefined) {\n            this.config.userId = userId;\n            setConnectorUserId(userId, this.config.instanceName);\n        }\n    };\n    AmplitudeBrowser.prototype.getDeviceId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.deviceId;\n    };\n    AmplitudeBrowser.prototype.setDeviceId = function (deviceId) {\n        if (!this.config) {\n            this.q.push(this.setDeviceId.bind(this, deviceId));\n            return;\n        }\n        this.config.deviceId = deviceId;\n        setConnectorDeviceId(deviceId, this.config.instanceName);\n    };\n    AmplitudeBrowser.prototype.reset = function () {\n        this.setDeviceId(UUID());\n        this.setUserId(undefined);\n    };\n    AmplitudeBrowser.prototype.getSessionId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.sessionId;\n    };\n    AmplitudeBrowser.prototype.setSessionId = function (sessionId) {\n        var _a;\n        if (!this.config) {\n            this.q.push(this.setSessionId.bind(this, sessionId));\n            return;\n        }\n        // Prevents starting a new session with the same session ID\n        if (sessionId === this.config.sessionId) {\n            return;\n        }\n        var previousSessionId = this.getSessionId();\n        var lastEventTime = this.config.lastEventTime;\n        var lastEventId = (_a = this.config.lastEventId) !== null && _a !== void 0 ? _a : -1;\n        this.config.sessionId = sessionId;\n        this.config.lastEventTime = undefined;\n        if (isSessionTrackingEnabled(this.config.defaultTracking)) {\n            if (previousSessionId && lastEventTime) {\n                this.track(DEFAULT_SESSION_END_EVENT, undefined, {\n                    device_id: this.previousSessionDeviceId,\n                    event_id: ++lastEventId,\n                    session_id: previousSessionId,\n                    time: lastEventTime + 1,\n                    user_id: this.previousSessionUserId,\n                });\n            }\n            this.config.lastEventTime = this.config.sessionId;\n            this.track(DEFAULT_SESSION_START_EVENT, undefined, {\n                event_id: ++lastEventId,\n                session_id: this.config.sessionId,\n                time: this.config.lastEventTime,\n            });\n        }\n        this.previousSessionDeviceId = this.config.deviceId;\n        this.previousSessionUserId = this.config.userId;\n    };\n    AmplitudeBrowser.prototype.extendSession = function () {\n        if (!this.config) {\n            this.q.push(this.extendSession.bind(this));\n            return;\n        }\n        this.config.lastEventTime = Date.now();\n    };\n    AmplitudeBrowser.prototype.setTransport = function (transport) {\n        if (!this.config) {\n            this.q.push(this.setTransport.bind(this, transport));\n            return;\n        }\n        this.config.transportProvider = createTransport(transport);\n    };\n    AmplitudeBrowser.prototype.identify = function (identify, eventOptions) {\n        if (isInstanceProxy(identify)) {\n            var queue = identify._q;\n            identify._q = [];\n            identify = convertProxyObjectToRealObject(new Identify(), queue);\n        }\n        if (eventOptions === null || eventOptions === void 0 ? void 0 : eventOptions.user_id) {\n            this.setUserId(eventOptions.user_id);\n        }\n        if (eventOptions === null || eventOptions === void 0 ? void 0 : eventOptions.device_id) {\n            this.setDeviceId(eventOptions.device_id);\n        }\n        return _super.prototype.identify.call(this, identify, eventOptions);\n    };\n    AmplitudeBrowser.prototype.groupIdentify = function (groupType, groupName, identify, eventOptions) {\n        if (isInstanceProxy(identify)) {\n            var queue = identify._q;\n            identify._q = [];\n            identify = convertProxyObjectToRealObject(new Identify(), queue);\n        }\n        return _super.prototype.groupIdentify.call(this, groupType, groupName, identify, eventOptions);\n    };\n    AmplitudeBrowser.prototype.revenue = function (revenue, eventOptions) {\n        if (isInstanceProxy(revenue)) {\n            var queue = revenue._q;\n            revenue._q = [];\n            revenue = convertProxyObjectToRealObject(new Revenue(), queue);\n        }\n        return _super.prototype.revenue.call(this, revenue, eventOptions);\n    };\n    AmplitudeBrowser.prototype.process = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var currentTime, isEventInNewSession;\n            return __generator(this, function (_a) {\n                currentTime = Date.now();\n                isEventInNewSession = isNewSession(this.config.sessionTimeout, this.config.lastEventTime);\n                if (event.event_type !== DEFAULT_SESSION_START_EVENT &&\n                    event.event_type !== DEFAULT_SESSION_END_EVENT &&\n                    (!event.session_id || event.session_id === this.getSessionId()) &&\n                    isEventInNewSession) {\n                    this.setSessionId(currentTime);\n                }\n                return [2 /*return*/, _super.prototype.process.call(this, event)];\n            });\n        });\n    };\n    return AmplitudeBrowser;\n}(AmplitudeCore));\nexport { AmplitudeBrowser };\n//# sourceMappingURL=browser-client.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { DEFAULT_FILE_DOWNLOAD_EVENT, FILE_EXTENSION, FILE_NAME, LINK_ID, LINK_TEXT, LINK_URL } from '../constants';\nexport var fileDownloadTracking = function () {\n    var observer;\n    var eventListeners = [];\n    var addEventListener = function (element, type, handler) {\n        element.addEventListener(type, handler);\n        eventListeners.push({\n            element: element,\n            type: type,\n            handler: handler,\n        });\n    };\n    var removeClickListeners = function () {\n        eventListeners.forEach(function (_a) {\n            var element = _a.element, type = _a.type, handler = _a.handler;\n            /* istanbul ignore next */\n            element === null || element === void 0 ? void 0 : element.removeEventListener(type, handler);\n        });\n        eventListeners = [];\n    };\n    var name = '@amplitude/plugin-file-download-tracking-browser';\n    var type = 'enrichment';\n    var setup = function (config, amplitude) { return __awaiter(void 0, void 0, void 0, function () {\n        var addFileDownloadListener, ext, links;\n        return __generator(this, function (_a) {\n            /* istanbul ignore if */\n            if (!amplitude) {\n                // TODO: Add required minimum version of @amplitude/analytics-browser\n                config.loggerProvider.warn('File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.');\n                return [2 /*return*/];\n            }\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') {\n                return [2 /*return*/];\n            }\n            addFileDownloadListener = function (a) {\n                var url;\n                try {\n                    // eslint-disable-next-line no-restricted-globals\n                    url = new URL(a.href, window.location.href);\n                }\n                catch (_a) {\n                    /* istanbul ignore next */\n                    return;\n                }\n                var result = ext.exec(url.href);\n                var fileExtension = result === null || result === void 0 ? void 0 : result[1];\n                if (fileExtension) {\n                    addEventListener(a, 'click', function () {\n                        var _a;\n                        if (fileExtension) {\n                            amplitude.track(DEFAULT_FILE_DOWNLOAD_EVENT, (_a = {},\n                                _a[FILE_EXTENSION] = fileExtension,\n                                _a[FILE_NAME] = url.pathname,\n                                _a[LINK_ID] = a.id,\n                                _a[LINK_TEXT] = a.text,\n                                _a[LINK_URL] = a.href,\n                                _a));\n                        }\n                    });\n                }\n            };\n            ext = /\\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/;\n            links = Array.from(document.getElementsByTagName('a'));\n            links.forEach(addFileDownloadListener);\n            // Adds listener to anchor tags added after initial load\n            /* istanbul ignore else */\n            if (typeof MutationObserver !== 'undefined') {\n                observer = new MutationObserver(function (mutations) {\n                    mutations.forEach(function (mutation) {\n                        mutation.addedNodes.forEach(function (node) {\n                            if (node.nodeName === 'A') {\n                                addFileDownloadListener(node);\n                            }\n                            if ('querySelectorAll' in node && typeof node.querySelectorAll === 'function') {\n                                Array.from(node.querySelectorAll('a')).map(addFileDownloadListener);\n                            }\n                        });\n                    });\n                });\n                observer.observe(document.body, {\n                    subtree: true,\n                    childList: true,\n                });\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var execute = function (event) { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        return [2 /*return*/, event];\n    }); }); };\n    var teardown = function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n            removeClickListeners();\n            return [2 /*return*/];\n        });\n    }); };\n    return {\n        name: name,\n        type: type,\n        setup: setup,\n        execute: execute,\n        teardown: teardown,\n    };\n};\n//# sourceMappingURL=file-download-tracking.js.map","import * as amplitude from \"@amplitude/analytics-browser\"\n\nexport function track(eventName, eventParams) {\n\tif (eventParams) {\n\t\tamplitude.track(eventName, eventParams)\n\t} else {\n\t\tamplitude.track(eventName)\n\t}\n}\n\nexport const ampliEvents = {\n\ttest: \"TEST\",\n\tethConnect: \"eth_connect\",\n\tethConnected: \"eth_connected\",\n\tethConnectError: \"eth_connect_error\",\n\tcryptoSelect: \"crypto_select\",\n\tcryptoSelectButton: \"crypto_select_button\",\n\tscrollPlace: \"scroll_place\",\n\tpurchase: \"purchase\",\n\tpurchaseSuccess: \"purchase_success\",\n\tpurchaseFailure: \"purchase_failure\",\n\tpurchaseTx: \"purchase_transaction\",\n\n\tconnectWalletButton: \"connect_wallet_button_click\",\n\tconnectWalletError: \"connect_wallet_error\",\n\tconnectWalletSuccess: \"connect_wallet_success\",\n\tpurchaseSubmit: \"mint_submit\",\n\tpurchaseError: \"purchase_error\",\n\tpurchaseInput: \"mint_input_active\",\n\tetherscanClick: \"etherscan_click\",\n}\n\nexport const ampli = {\n\tnavClick: \"NavigationClick\",\n\twalletHeader: \"HeaderConnectWalletClick\",\n\tecoClick: \"EcosystemClick\",\n\tvaluesClick: \"ValuesClick\",\n\ttokenClick: \"TokenomicClick\",\n\tutilClick: \"UtilitiesClick\",\n\n\twalletMint: \"MintConnectWalletClick\",\n\tmintNFT: \"MintMintToonClick\",\n\tfooterClick: \"FooterClick\",\n\n\twalletSuccess: \"Successful Wallet Connect\",\n\twalletSuccessBalance: \"Successful Wallet Connect Balance\",\n\n\twalletError: \"Error Wallet Connect\",\n\tmintError: \"Mint NFT error\",\n\tmintSuccess: \"Mint NFT success\",\n\tchain: \"Chain Switch\",\n\tdiscordCom: \"Discord Community Click\",\n\tdiscordComLink: \"Discord Community Click (text link)\",\n\n\tpageLoad: \"Page Load\",\n\tpageScroll: \"Page Scrolled\",\n\n\tconnectModal: \"Mobile Connect Modal\",\n\tjoin: \"Join Us Click\",\n\tdisconnect: \"Wallet Disconnected\",\n\tdiscordHolder: \"MintDiscordClick\",\n}\n","import { useWeb3Modal } from \"@web3modal/wagmi/react\"\nimport Button from \"../ui/Button/Button\"\nimport React from \"react\"\n\nconst UnsupportedBlock = () => {\n\tconst { open } = useWeb3Modal()\n\n\treturn (\n\t\t<>\n\t\t\t<h6>\n\t\t\t\tOur NFTs are <b>not yet available on this blockchain</b>. Please switch your wallet to one of the <b>supported chains</b>.\n\t\t\t</h6>\n\t\t\t<Button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tdismissAll()\n\t\t\t\t\topen({ view: \"Networks\" })\n\t\t\t\t}}\n\t\t\t\tmint\n\t\t\t>\n\t\t\t\t<div className=\"sh\"></div>\n\t\t\t\tSwitch Chain\n\t\t\t</Button>\n\t\t</>\n\t)\n}\n\nexport default React.memo(UnsupportedBlock)\n","import React from \"react\"\nimport { ampli, track } from \"~/helpers/amplitude\"\n\nimport { supportedChains } from \"~/config\"\nimport Button from \"../ui/Button/Button\"\nimport UnsupportedBlock from \"./UnsupportedBlock\"\n\nconst MintButton = (props) => {\n\tconst { isLoading, onCloseModal, write, chain } = props\n\treturn (\n\t\t<>\n\t\t\t{!supportedChains.includes(chain.id) /* && !isMetaMask  */ ? (\n\t\t\t\t<UnsupportedBlock chain={chain} />\n\t\t\t) : (\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrack(ampli.mintNFT)\n\n\t\t\t\t\t\tonCloseModal()\n\t\t\t\t\t\twrite?.()\n\t\t\t\t\t}}\n\t\t\t\t\tmint\n\t\t\t\t>\n\t\t\t\t\t<div className=\"sh\"></div>\n\t\t\t\t\t{isLoading ? \"Minting...\" : \"Mint ToON Pass\"}\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default React.memo(MintButton)\n","/* eslint-disable react/no-unescaped-entities */\nimport React, { Suspense, useCallback, useEffect, useState } from \"react\"\n\nimport { useAccount, useConnect, useNetwork, useBalance, usePrepareContractWrite, useContractWrite, useWaitForTransaction } from \"wagmi\"\nimport cls from \"./MintNFT.module.scss\"\nimport \"./toast.scss\"\n\nimport \"react-toastify/dist/ReactToastify.css\"\n\nimport ConnectButton from \"./ConnectButton\"\nimport MintSuccess from \"./MintSuccess/MintSuccess\"\nimport { useToast } from \"../helpers/hooks/useToast\"\nimport { ampli, track } from \"~/helpers/amplitude\"\n\nimport mainconfig, { supportedChains } from \"../config\"\n\nimport MintButton from \"./MintButton\"\nimport { InjectedConnector } from \"wagmi/connectors/injected\"\nimport { PURCHASE_ERRORS } from \"../helpers/texts\"\n\nconst NFTcontracts = {\n\tSepolia: \"0x42Fbf87Cd983c0F0BCdfF2d8A5904CD4968cD76F\",\n\tEthereum: \"0x49cC7de889C1e4bDc1b4156B882cA5c76C668987\",\n\t\"Arbitrum One\": \"0x6f2C97dB74D4d3E8A31e628325A39bbef928dd59\",\n\tPolygon: \"0xA42ccA468fd07491824Ab121CB559f1B3791e92C\",\n\t\"BNB Smart Chain\": \"0xFA17c9e4f5Ec1A62d032731fE0a9529D7B851BE6\",\n}\n\nconst MintNFT = () => {\n\tconst isMetaMask = mainconfig.isMetaMask\n\tconst isMobile = mainconfig.isMobile\n\n\tconst [isSuccessModal, setIsSuccessModal] = useState(false)\n\tconst { dismissAll, mintError, chainSwitch, connectSuccess } = useToast()\n\tconst trackWalletMint = useCallback(() => {\n\t\ttrack(ampli.walletMint)\n\t}, [])\n\tconst { chain } = useNetwork()\n\tconst { isConnected, address } = useAccount({\n\t\tonConnect({ address, connector, isReconnected }) {\n\t\t\ttrack(ampli.walletSuccess, { account: address, connector: connector.name, isReconnected: isReconnected, chain: chain.name })\n\t\t\trefetch()\n\t\t\tconnectSuccess()\n\t\t},\n\n\t\tonDisconnect() {\n\t\t\tdismissAll()\n\t\t},\n\t})\n\tuseEffect(() => {\n\t\tif (!isConnected) {\n\t\t\tdismissAll()\n\t\t}\n\t\treturn\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isConnected])\n\n\tuseBalance({\n\t\taddress: address,\n\t\tonSuccess(data) {\n\t\t\ttrack(ampli.walletSuccessBalance, { balance: `${data.formatted} ${data.symbol}`, currency: data.symbol })\n\t\t},\n\t})\n\n\tconst { connect } = useConnect({\n\t\tconnector: new InjectedConnector(),\n\t\tonError(error) {\n\t\t\tconsole.log(\"Error\", error)\n\t\t\ttrack(ampli.walletError, { error: error.message })\n\t\t},\n\t})\n\n\tconst handleConnect = useCallback(() => {\n\t\tif (isMobile && isMetaMask) {\n\t\t\tconnect()\n\t\t}\n\t}, [connect, isMetaMask, isMobile])\n\n\tuseEffect(() => {\n\t\tif (isConnected) {\n\t\t\treturn\n\t\t} else handleConnect()\n\t\treturn\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\tconst { refetch, config } = usePrepareContractWrite({\n\t\taddress: isConnected ? NFTcontracts[chain.name] : \"0x0\",\n\t\tabi: [\n\t\t\t{\n\t\t\t\tname: \"mint\",\n\t\t\t\ttype: \"function\",\n\t\t\t\tstateMutability: \"payable\",\n\t\t\t\tinputs: [{ internalType: \"uint256\", name: \"_mintAmount\", type: \"uint256\" }],\n\t\t\t\toutputs: [],\n\t\t\t},\n\t\t],\n\t\targs: [\"1\"],\n\t\tfunctionName: \"mint\",\n\t})\n\n\tconst { error, isError, write, data } = useContractWrite(config)\n\n\tconst {\n\t\tisLoading,\n\t\terror: transError,\n\t\tisError: isTransError,\n\t} = useWaitForTransaction({\n\t\thash: data?.hash,\n\t\tonSuccess(data) {\n\t\t\ttrack(ampli.mintSuccess, { transHash: data.transactionHash, NFTcontract: data.to })\n\t\t\tonOpenModal()\n\t\t},\n\t\tonError(error) {\n\t\t\ttrack(ampli.mintError, { error: error.message })\n\t\t},\n\t})\n\tuseEffect(() => {\n\t\tif (isConnected && chain) {\n\t\t\tif (supportedChains.includes(chain.id)) {\n\t\t\t\ttrack(ampli.chain, { chain: chain })\n\t\t\t\tchainSwitch(chain)\n\t\t\t\trefetch()\n\t\t\t} else {\n\t\t\t\tconsole.log(\"unsupported chain\")\n\t\t\t}\n\t\t}\n\t\treturn\n\t}, [chain, chainSwitch, isConnected, refetch])\n\n\tuseEffect(() => {\n\t\tif (isError || isTransError) {\n\t\t\tif (\n\t\t\t\t(error || transError)?.message.includes(\"cancelled\") ||\n\t\t\t\t(error || transError)?.message.includes(\"canceled\") ||\n\t\t\t\t(error || transError)?.message.includes(\"rejected\") ||\n\t\t\t\terror?.code === 4001\n\t\t\t) {\n\t\t\t\tmintError(PURCHASE_ERRORS[4001])\n\t\t\t\ttrack(ampli.mintError, { error: (error || transError)?.message, type: \"cancelled\" })\n\t\t\t} else if ((error || transError)?.message.includes(\"funds\") || error?.code === -3200) {\n\t\t\t\tmintError(PURCHASE_ERRORS[3200])\n\t\t\t\ttrack(ampli.mintError, { error: (error || transError)?.message, type: \"insufficient funds\" })\n\t\t\t} else if ((error || transError)?.message) {\n\t\t\t\tmintError(PURCHASE_ERRORS.general)\n\t\t\t\ttrack(ampli.mintError, { error: (error || transError)?.message, type: \"other\" })\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [error, isError, isTransError, transError])\n\n\tconst onCloseModal = useCallback(() => {\n\t\tsetIsSuccessModal(false)\n\t}, [])\n\n\tconst onOpenModal = useCallback(() => {\n\t\tdismissAll()\n\t\tsetIsSuccessModal(true)\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\treturn (\n\t\t<div className={cls.MintNFT}>\n\t\t\t<div className={`${cls.buttonsBlock} ${isLoading ? \"disabled\" : \"\"}`}>\n\t\t\t\t<div className={isConnected ? cls.connected : cls.disconnected} id=\"mintID\">\n\t\t\t\t\t<ConnectButton chain={chain} connect header={false} action={trackWalletMint} />\n\t\t\t\t</div>\n\t\t\t\t{isConnected && (\n\t\t\t\t\t<Suspense fallback={<span className=\"loader\"></span>}>\n\t\t\t\t\t\t<MintButton isLoading={isLoading} onCloseModal={onCloseModal} write={write} chain={chain} />\n\t\t\t\t\t</Suspense>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{isConnected && <>{isSuccessModal && <MintSuccess isOpen={isSuccessModal} onClose={onCloseModal} />}</>}\n\t\t</div>\n\t)\n}\n\nexport default React.memo(MintNFT)\n","import React, { useCallback } from \"react\"\nimport { toast } from \"react-toastify\"\nimport Success from \"@/VALUES/vote.webp\"\nimport Error from \"@/UI/icons/error.svg\"\n\nimport { WALLET_SUCCESS } from \"../texts\"\n\nfunction getImage(chain) {\n\tswitch (chain.id) {\n\t\tcase 1:\n\t\t\treturn \"./assets/UI/icons/1.webp\"\n\t\tcase 56:\n\t\t\treturn \"./assets/UI/icons/56.webp\"\n\t\tcase 137:\n\t\t\treturn \"./assets/UI/icons/137.webp\"\n\t\tcase 42161:\n\t\t\treturn \"./assets/UI/icons/42161.webp\"\n\t\tdefault:\n\t\t\treturn \"./assets/UI/icons/default.webp\"\n\t}\n}\n\nexport function useToast() {\n\tconst connectSuccess = useCallback(() => {\n\t\ttoast.success(WALLET_SUCCESS, {\n\t\t\ticon: () => <img src={Success} className=\"toastIcon\" />,\n\t\t})\n\t}, [])\n\n\tconst mintError = useCallback((error) => {\n\t\ttoast.error(error, {\n\t\t\ticon: () => <img src={Error} className=\"toastIcon\" />,\n\t\t\ttoastId: \"error\",\n\t\t})\n\t}, [])\n\n\tconst chainSwitch = useCallback((chain) => {\n\t\tconst imageSrc = getImage(chain)\n\t\ttoast.success(\n\t\t\t() => (\n\t\t\t\t<>\n\t\t\t\t\tYou are successfully connected to <b>{chain.name}</b>\n\t\t\t\t</>\n\t\t\t),\n\t\t\t{\n\t\t\t\ticon: () => <img src={imageSrc} className=\"toastIcon\" />,\n\t\t\t\ttoastId: chain.name,\n\t\t\t}\n\t\t)\n\t}, [])\n\n\tconst dismissAll = () => toast.dismiss()\n\n\treturn {\n\t\tconnectSuccess,\n\t\tmintError,\n\t\tchainSwitch,\n\t\tdismissAll,\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"MintNFT\":\"MintNFT_VBpiD\",\"buttonsBlock\":\"buttonsBlock_leyc3\",\"disconnected\":\"disconnected_jKOEC\",\"connected\":\"connected_P2wML\"};"],"names":["classNames","cls","mods","additional","filter","Boolean","Object","entries","_ref","_","value","map","_ref2","join","Button","props","link","href","size","app","headerBtn","primary","className","yellow","icon","blue","pink","connect","children","glass","onClick","mint","discord","modal","type","otherProps","React","concat","_extends","target","rel","Link","arrow","src","Arrow","alt","width","height","Portal","element","document","body","createPortal","Modal","isOpen","onClose","isClosing","setIsClosing","useState","timerRef","useRef","closeHandler","useCallback","current","setTimeout","onKeyDown","e","key","useEffect","window","addEventListener","clearTimeout","removeEventListener","Cross","stopPropagation","WCConnector","open","useWeb3Modal","WC","MMConnector","MM","ConnectModal","cardsBlock","Account","header","balance","Chain","ConnectButton","action","chain","isConnected","useAccount","isMetaMask","mainconfig","isMobile","connectModal","setConnectModal","onCloseModal","supportedChains","includes","id","Blue","Purple","Desk","Card","Small","Links","DiscordIcon","PURCHASE_ERRORS","general","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","LogLevel","__assign","assign","t","s","i","n","arguments","length","apply","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","f","y","g","label","sent","trys","ops","verb","Symbol","iterator","v","op","pop","push","__values","o","m","__read","r","ar","error","__spreadArray","to","from","pack","l","slice","SuppressedError","Status","getClientLogConfig","client","_a","config","logger","loggerProvider","logLevel","getValueByStringPath","obj","path","e_1","replace","_b","split","_c","attr","e_1_1","return","getClientStates","paths","e_2","res","paths_1","paths_1_1","e_2_1","debugWrapper","fn","fnName","getLogConfig","getStates","fnContext","args","_i","Debug","ignoreDepth","debugContext","name","stacktrace","Error","stack","text","trim","time","start","Date","toISOString","states","before","promise","after","end","debug","JSON","stringify","returnWrapper","awaitable","AMPLITUDE_PREFIX","STORAGE_PREFIX","AMPLITUDE_SERVER_URL","buildResult","event","code","message","Unknown","PREFIX","Logger","None","disable","enable","Warn","log","Verbose","console","warn","getDefaultConfig","flushMaxRetries","flushQueueSize","flushIntervalMillis","instanceName","optOut","serverUrl","serverZone","useBatch","Config","options","_d","_optOut","defaultConfig","apiKey","minIdLength","plan","ingestionMetadata","storageProvider","transportProvider","serverConfig","createServerConfig","defineProperty","get","set","enumerable","configurable","getServerUrl","undefined","_serverZone","getResponseBodyString","responseBodyString","IdentifyOperation","RevenueProperty","SpecialEventType","Destination","retryTimeout","throttleTimeout","storageKey","scheduled","queue","setup","unsent","_this","substring","saveEvents","all","execute","catch","context","attempts","callback","timeout","addToQueue","list","fulfillRequest","forEach","schedule","flush","useRetry","later","batches","arr","chunkSize","Math","max","reduce","chunks","index","chunkIndex","floor","batch","send","payload","errorMessage","api_key","events","extra","min_id_length","client_upload_time","handleResponse","statusCode","status","Success","handleSuccessResponse","Invalid","handleInvalidResponse","PayloadTooLarge","handlePayloadTooLargeResponse","RateLimit","handleRateLimitResponse","handleOtherResponse","missingField","startsWith","dropIndex","values","eventsWithInvalidFields","eventsWithMissingFields","eventsWithInvalidIdLengths","silencedEvents","flat","dropIndexSet","Set","retry","has","dropUserIds","keys","exceededDailyQuotaUsers","dropDeviceIds","exceededDailyQuotaDevices","throttledIndex","throttledEvents","dropUserIdsSet","dropDeviceIdsSet","throttledIndexSet","user_id","device_id","UUID","a","random","toString","isValidObject","properties","isValidProperties","property","isArray","isValid","value_1","value_1_1","valueElement","Identify","_propertySet","_properties","getUserProperties","_safeSet","SET","setOnce","SET_ONCE","append","APPEND","prepend","PREPEND","postInsert","POSTINSERT","preInsert","PREINSERT","remove","REMOVE","add","ADD","unset","UNSET","clearAll","CLEAR_ALL","operation","_validate","userPropertyMap","Revenue","productId","quantity","price","setProductId","setQuantity","setPrice","setRevenueType","revenueType","setRevenue","revenue","setEventProperties","getEventProperties","eventProperties","REVENUE_PRODUCT_ID","REVENUE_QUANTITY","REVENUE_PRICE","REVENUE_TYPE","REVENUE","Timeline","applying","plugins","register","plugin","deregister","pluginName","findIndex","splice","teardown","reset","scheduleApply","shift","item","before_1","before_1_1","enrichment","enrichment_1","enrichment_1_1","destination","executeDestinations","_e","eventClone","resolveResult","createIdentifyEvent","identify","eventOptions","event_type","IDENTIFY","user_properties","AmplitudeCore","initializing","q","dispatchQ","logEvent","track","bind","timeline","_init","runQueuedFunctions","queueName","queuedFunctions","queuedFunctions_1","queuedFunctions_1_1","queuedFunction","eventInput","event_properties","createTrackEvent","dispatch","groupIdentify","groupType","groupName","GROUP_IDENTIFY","group_properties","groups","createGroupIdentifyEvent","setGroup","createGroupEvent","createRevenueEvent","dispatchWithCallback","process","setOptOut","ApplicationContextProviderImpl","getApplicationContext","versionName","language","getLanguage","platform","os","deviceModel","navigator","languages","EventBridgeImpl","receiver","setEventReceiver","isEqual","obj1","obj2","typeA","primitive_1","isArrayA","isArrayB","sorted1","sort","sorted2","result_1","ownProps","resArray","IdentityStoreImpl","identity","userProperties","listeners","editIdentity","self","actingUserProperties","actingIdentity","setUserId","userId","setDeviceId","deviceId","setUserProperties","updateUserProperties","actions","actingProperties","_f","_g","commit","setIdentity","getIdentity","originalIdentity","listener","addIdentityListener","removeIdentityListener","delete","safeGlobal","globalThis","AnalyticsConnector","identityStore","eventBridge","applicationContextProvider","getInstance","getAnalyticsConnector","IdentityEventSender","isTrackingEnabled","defaultTracking","isAttributionTrackingEnabled","getPageViewTrackingConfig","eventType","trackOn","trackHistoryChanges","pageViews","isNewSession","sessionTimeout","lastEventTime","now","convertProxyObjectToRealObject","instance","name_1","isInstanceProxy","_q","userLanguage","Context","library","userAgent","lastEventId","nextEventId","getTime","event_id","session_id","sessionId","appVersion","app_version","trackingOptions","ipAddress","ip","insert_id","partner_id","partnerId","ingestion_metadata","source_name","sourceName","source_version","sourceVersion","user_agent","MemoryStorage","memoryStorage","Map","isEnabled","getRaw","clear","getCookieName","postKey","limit","getGlobalScope","getQueryParams","globalScope","location","search","acc","curr","query","tryDecodeURIComponent","decodeURIComponent","CookieStorage","testStrorage","testKey","testValue","atob","parse","cookie","match","find","c","expirationDays","expires","expireDate","date","str","setTime","btoa","encodeURIComponent","toUTCString","domain","secure","sameSite","BaseTransport","_serverUrl","_payload","buildResponse","responseJSON","_h","_j","_k","_l","_m","_o","_p","_r","_s","_t","_u","_v","_w","_x","buildStatus","eventsIngested","events_ingested","payloadSizeBytes","payload_size_bytes","serverUploadTime","server_upload_time","missing_field","events_with_invalid_fields","events_with_missing_fields","events_with_invalid_id_lengths","epsThreshold","eps_threshold","exceeded_daily_quota_devices","silencedDevices","silenced_devices","silenced_events","throttledDevices","throttled_devices","throttled_events","throttledUsers","throttled_users","exceeded_daily_quota_users","Timeout","Failed","FetchTransport","_super","responsePayload","fetch","headers","Accept","method","json","BrowserStorage","storage","testStorage","getItem","setItem","removeItem","MAX_ARRAY_LENGTH","LocalStorage","localStorage","droppedEventsCount","SessionStorage","sessionStorage","XHRTransport","state","XMLHttpRequest","xhr","onreadystatechange","readyState","responseText","parsedResponsePayload","setRequestHeader","SendBeaconTransport","sendBeacon","data","parseLegacyCookies","cookieStorage","deleteLegacyCookies","cookieName","cookies","toLowerCase","getOldCookieName","decode","parseTime","num","integer","parseInt","isNaN","escape","DEFAULT_EVENT_PREFIX","DEFAULT_FORM_START_EVENT","DEFAULT_FORM_SUBMIT_EVENT","DEFAULT_FILE_DOWNLOAD_EVENT","DEFAULT_SESSION_START_EVENT","DEFAULT_SESSION_END_EVENT","FILE_EXTENSION","FILE_NAME","LINK_ID","LINK_TEXT","LINK_URL","FORM_ID","FORM_NAME","FORM_DESTINATION","DEFAULT_IDENTITY_STORAGE","BrowserConfig","cookieOptions","identityStorage","transport","expiration","upgrade","createTransport","_cookieStorage","updateStorage","_deviceId","_userId","_sessionId","_lastEventTime","_lastEventId","cache","useBrowserConfig","amplitudeInstance","legacyCookies","previousCookies","queryParams","_y","_z","_0","_1","_2","getTopLevelDomain","createCookieStorage","previousSessionDeviceId","previousSessionUserId","url","host","parts","levels","hostname","DCLID","FBCLID","GBRAID","GCLID","KO_CLICK_ID","LI_FAT_ID","MSCLKID","RDT_CID","TTCLID","TWCLID","WBRAID","BASE_CAMPAIGN","utm_campaign","utm_content","utm_id","utm_medium","utm_source","utm_term","referrer","referring_domain","dclid","gbraid","gclid","fbclid","ko_click_id","li_fat_id","msclkid","rtd_cid","ttclid","twclid","wbraid","CampaignParser","getUtmParam","getReferrer","getClickIds","params","domainWithoutSubdomain","isExcludedReferrer","excludeReferrers","referringDomain","some","RegExp","test","webAttributionPlugin","amplitude","pluginConfig","currentCampaign","previousCampaign","isEventInNewSession","campaignEvent","initialEmptyValue","resetSessionOnNewCampaign","cookieDomain","previous","prevReferringDomain","every","isDirectTraffic","hasNewCampaign","hasNewDomain","isNewCampaign","setSessionId","campaign","campaignParameters","identifyEvent","createCampaignEvent","omitUndefined","input","val","pageViewTrackingPlugin","pushState","createPageViewEvent","getCampaignParams","pathname","title","shouldTrackOnPageLoad","previousURL","trackHistoryPageView","newURL","shouldTrackPageView","shouldTrackHistoryPageView","trackHistoryPageViewWrapper","history","Proxy","unused","pageViewEvent","isCampaignEvent","$set","$unset","userProperties_1","trackingOption","oldURL","formInteractionTracking","observer","eventListeners","handler","addFormInteractionListener","form","hasFormChanged","stringOrUndefined","getElementsByTagName","MutationObserver","mutations","mutation","addedNodes","node","nodeName","querySelectorAll","observe","subtree","childList","disconnect","notified","init","AmplitudeBrowser","userIdOrOptions","maybeOptions","browserOptions","connector","attributionTrackingOptions","webAttribution","addFileDownloadListener","ext","URL","exec","fileExtension","isFormInteractionTrackingEnabled","attribution","getAttributionTrackingConfig","getUserId","setConnectorUserId","getDeviceId","setConnectorDeviceId","getSessionId","previousSessionId","extendSession","setTransport","currentTime","eventName","eventParams","ampli","UnsupportedBlock","dismissAll","view","MintButton","isLoading","write","disabled","NFTcontracts","Sepolia","Ethereum","Polygon","MintNFT","isSuccessModal","setIsSuccessModal","mintError","chainSwitch","connectSuccess","toast","success","toastId","imageSrc","getImage","dismiss","trackWalletMint","useNetwork","address","onConnect","isReconnected","account","refetch","onDisconnect","useBalance","onSuccess","formatted","symbol","currency","useConnect","InjectedConnector","onError","handleConnect","usePrepareContractWrite","abi","stateMutability","inputs","internalType","outputs","functionName","isError","useContractWrite","transError","isTransError","useWaitForTransaction","hash","transHash","transactionHash","NFTcontract","onOpenModal","_ref3","_ref4","_ref6","_ref8","_ref5","_ref7","_ref9","Suspense","fallback","MintSuccess"],"sourceRoot":""}